<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc6264
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.34.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.34.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-ietf-v6ops-incremental-cgn/">
  <meta name="description" content="An Incremental Carrier-Grade NAT (CGN) for IPv6 Transition (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.34.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.34.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgorange"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc6264.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc6264.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc6264.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc6264/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc6264/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/v6ops/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-ietf-v6ops-incremental-cgn@ietf.org?subject=draft-ietf-v6ops-incremental-cgn" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-ietf-v6ops-incremental-cgn-03.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-ietf-v6ops-incremental-cgn-03.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-ietf-v6ops-incremental-cgn-03.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-ietf-v6ops-incremental-cgn-03">draft-ietf-v6ops-incremental-cgn-03</a>                  Informational
                                                        <a class="text-warning" href="/ipr/search/?submit=draft&amp;id=draft-ietf-v6ops-incremental-cgn">IPR declarations</a></pre>
      </div>
    

    <div class="draftcontent">
    <pre>Internet Engineering Task Force (IETF)                          S. Jiang
Request for Comments: 6264                                        D. Guo
Category: Informational                                           Huawei
ISSN: 2070-1721                                             B. Carpenter
                                                  University of Auckland
                                                               June 2011


       <span class="h1">An Incremental Carrier-Grade NAT (CGN) for IPv6 Transition</span>

Abstract

   Global IPv6 deployment was slower than originally expected.  As IPv4
   address exhaustion approaches, IPv4 to IPv6 transition issues become
   more critical and less tractable.  Host-based transition mechanisms
   used in dual-stack environments cannot meet all transition
   requirements.  Most end users are not sufficiently expert to
   configure or maintain host-based transition mechanisms.  Carrier-
   Grade NAT (CGN) devices with integrated transition mechanisms can
   reduce the operational changes required during the IPv4 to IPv6
   migration or coexistence period.

   This document proposes an incremental CGN approach for IPv6
   transition.  It can provide IPv6 access services for IPv6 hosts and
   IPv4 access services for IPv4 hosts while leaving much of a legacy
   ISP network unchanged during the initial stage of IPv4 to IPv6
   migration.  Unlike CGN alone, incremental CGN also supports and
   encourages smooth transition towards dual-stack or IPv6-only ISP
   networks.  An integrated configurable CGN device and an adaptive home
   gateway (HG) device are described.  Both are reusable during
   different transition phases, avoiding multiple upgrades.  This
   enables IPv6 migration to be incrementally achieved according to real
   user requirements.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="/doc/html/rfc5741#section-2">Section&nbsp;2 of RFC 5741</a>.






<span class="grey">Jiang, et al.                 Informational                     [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc6264">RFC 6264</a>           Incremental CGN for IPv6 Transition         June 2011</span>


   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6264">http://www.rfc-editor.org/info/rfc6264</a>.

Copyright Notice

   Copyright (c) 2011 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="/doc/html/bcp78">BCP 78</a> and the IETF Trust&#x27;s Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. An Incremental CGN Approach .....................................<a href="#page-4">4</a>
      <a href="#section-2.1">2.1</a>. Incremental CGN Approach Overview ..........................<a href="#page-4">4</a>
      <a href="#section-2.2">2.2</a>. Choice of Tunneling Technology .............................<a href="#page-5">5</a>
      <a href="#section-2.3">2.3</a>. Behavior of Dual-Stack Home Gateway ........................<a href="#page-6">6</a>
      <a href="#section-2.4">2.4</a>. Behavior of Dual-Stack CGN .................................<a href="#page-6">6</a>
      <a href="#section-2.5">2.5</a>. Impact for Existing Hosts and Unchanged Networks ...........<a href="#page-7">7</a>
      <a href="#section-2.6">2.6</a>. IPv4/IPv6 Intercommunication ...............................<a href="#page-7">7</a>
      <a href="#section-2.7">2.7</a>. Discussion .................................................<a href="#page-8">8</a>
   <a href="#section-3">3</a>. Smooth Transition towards IPv6 Infrastructure ...................<a href="#page-8">8</a>
   <a href="#section-4">4</a>. Security Considerations ........................................<a href="#page-10">10</a>
   <a href="#section-5">5</a>. Acknowledgements ...............................................<a href="#page-10">10</a>
   <a href="#section-6">6</a>. References .....................................................<a href="#page-10">10</a>
      <a href="#section-6.1">6.1</a>. Normative References ......................................<a href="#page-10">10</a>
      <a href="#section-6.2">6.2</a>. Informative References ....................................<a href="#page-11">11</a>

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Introduction</span>

   Global IPv6 deployment did not happen as was forecast 10 years ago.
   Network providers were hesitant to make the first move while IPv4 was
   and is still working well.  However, IPv4 address exhaustion is
   imminent.  The dynamically updated IPv4 Address Report [<a href="#ref-IPUSAGE" title="June 2011">IPUSAGE</a>] has
   analyzed this issue. IANA unallocated address pool exhaustion
   occurred in February 2011, and at the time of publication, the site
   predicts imminent exhaustion for Regional Internet Registry (RIR)





<span class="grey">Jiang, et al.                 Informational                     [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc6264">RFC 6264</a>           Incremental CGN for IPv6 Transition         June 2011</span>


   unallocated address pools.  Based on this fact, the Internet industry
   appears to have reached consensus that global IPv6 deployment is
   inevitable and has to be done expeditiously.

   IPv4 to IPv6 transition issues therefore become more critical and
   complicated for the approaching global IPv6 deployment.  Host-based
   transition mechanisms alone are not able to meet the requirements in
   all cases.  Therefore, network-based supporting functions and/or new
   transition mechanisms with simple user-side operation are needed.

   Carrier-Grade NAT (CGN) [<a href="#ref-CGN-REQS" title="&quot;Common requirements for IP address sharing schemes&quot;">CGN-REQS</a>], also called NAT444 CGN or Large
   Scale NAT, compounds IPv4 operational problems when used alone but
   does nothing to encourage IPv4 to IPv6 transition.  Deployment of
   NAT444 CGN allows ISPs to delay the transition and therefore causes
   double transition costs (once to add CGN and again to support IPv6).

   CGN deployments that integrate multiple transition mechanisms can
   simplify the operation of end-user services during the IPv4 to IPv6
   migration and coexistence periods.  CGNs are deployed on the network
   side and managed/maintained by professionals.  On the user side, new
   home gateway (HG) devices may be needed too.  They may be provided by
   network providers, depending on the specific business model.  Dual-
   stack lite [<a href="#ref-DS-LITE" title="&quot;Dual- Stack Lite Broadband Deployments Following IPv4 Exhaustion&quot;">DS-LITE</a>], also called DS-Lite, is a CGN-based solution
   that supports transition, but it requires the ISP to upgrade its
   network to IPv6 immediately.  Many ISPs hesitate to do this as the
   first step.  Theoretically, DS-Lite can be used with double
   encapsulation (IPv4-in-IPv6-in-IPv4), but this seems even less likely
   to be accepted by an ISP and is not discussed in this document.

   This document proposes an incremental CGN approach for IPv6
   transition.  It does not define any new protocols or mechanisms but
   describes how to combine existing proposals in an incremental
   deployment.  The approach is similar to DS-Lite but the other way
   around.  It mainly combines v4-v4 NAT with v6-over-v4 tunneling
   functions.  It can provide IPv6 access services for IPv6-enabled
   hosts and IPv4 access services for IPv4 hosts while leaving most of
   legacy IPv4 ISP networks unchanged.  The deployment of this
   technology does not affect legacy IPv4 hosts with global IPv4
   addresses at all.  It is suitable for the initial stage of IPv4 to
   IPv6 migration.  It also supports transition towards dual-stack or
   IPv6-only ISP networks.

   A smooth transition mechanism is also described in this document.  It
   introduces an integrated configurable CGN device and an adaptive HG
   device.  Both CGN and HG are reusable devices during different
   transition periods, so they do not need to be replaced as the
   transition proceeds.  This enables IPv6 migration to be incrementally
   achieved according to the real user requirements.



<span class="grey">Jiang, et al.                 Informational                     [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc6264">RFC 6264</a>           Incremental CGN for IPv6 Transition         June 2011</span>


<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  An Incremental CGN Approach</span>

   Today, most consumers primarily use IPv4.  Network providers are
   starting to provide IPv6 access services for end users.  At the
   initial stage of IPv4 to IPv6 migration, IPv4 connectivity and
   traffic would continue to represent the majority of traffic for most
   ISP networks.  ISPs would like to minimize the changes to their IPv4
   networks.  Switching the whole ISP network into IPv6-only would be
   considered a radical strategy.  Switching the whole ISP network to
   dual-stack is less radical but introduces operational costs and
   complications.  Although some ISPs have successfully deployed dual-
   stack networks, others prefer not to do this as their first step in
   IPv6.  However, they currently face two urgent pressures -- to
   compensate for an immediate shortage of IPv4 addresses by deploying
   some method of address sharing and to prepare actively for the use of
   deployment of IPv6 address space and services.  ISPs facing only one
   pressure out of two could adopt either CGN (for shortage of IPv4
   addresses) or 6rd (to provide IPv6 connectivity services).  The
   approach described in this document is intended to address both of
   these pressures at the same time by combining v4-v4 CGN with v6-over-
   v4 tunneling technologies.

<span class="h3"><a class="selflink" id="section-2.1" href="#section-2.1">2.1</a>.  Incremental CGN Approach Overview</span>

   The incremental CGN approach we propose is illustrated in the
   following figure.

                                   +-------------+
                                   |IPv6 Internet|
                                   +-------------+
                                          |
                          +---------------+----------+
     +-----+   +--+       |  IPv4 ISP  +--+--+       |   +--------+
     |v4/v6|---|DS|=======+============| CGN |-------+---|  IPv4  |
     |Host |   |HG|       |   Network  +-----+   |   |   |Internet|
     +-----+   +--+       +----------------------+---+   +--------+
                  _ _ _ _ _ _ _ _ _ _ _          |
                ()_6_over_4_ _t_u_n_n_e_l_()  +---------------------+
                                              | Existing IPv4 hosts |
                                              +---------------------+

    Figure 1: Incremental CGN Approach with IPv4 ISP Network

   DS HG = Dual-Stack Home Gateway (CPE - Customer Premises Equipment).

   As shown in the figure above, the ISP has not significantly changed
   its IPv4 network.  This approach enables IPv4 hosts to access the
   IPv4 Internet and IPv6 hosts to access the IPv6 Internet.  A dual-



<span class="grey">Jiang, et al.                 Informational                     [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc6264">RFC 6264</a>           Incremental CGN for IPv6 Transition         June 2011</span>


   stack host is treated as an IPv4 host when it uses IPv4 access
   service and as an IPv6 host when it uses an IPv6 access service.  In
   order to enable IPv4 hosts to access the IPv6 Internet and IPv6 hosts
   to access IPv4 Internet, NAT64 can be integrated with the CGN; see
   <a href="#section-2.6">Section 2.6</a> for details regarding IPv4/IPv6 intercommunication.  The
   integration of such mechanisms is out of scope for this document.

   Two types of devices need to be deployed in this approach: a dual-
   stack home gateway (HG) and a dual-stack CGN.  The dual-stack home
   gateway integrates both IPv6 and IPv4 forwarding and v6-over-v4
   tunneling functions.  It should follow the requirements of [<a href="/doc/html/rfc6204" title="&quot;Basic Requirements for IPv6 Customer Edge Routers&quot;">RFC6204</a>],
   including IPv6 prefix delegation.  It may also integrate v4-v4 NAT
   functionality.  The dual-stack CGN integrates v6-over-v4 tunneling
   and v4-v4 CGN functions as well as standard IPv6 and IPv4 routing.

   The approach does not require any new mechanisms for IP packet
   forwarding or encapsulation or decapsulation at tunnel endpoints.
   The following sections describe how the HG and the incremental CGN
   interact.

<span class="h3"><a class="selflink" id="section-2.2" href="#section-2.2">2.2</a>.  Choice of Tunneling Technology</span>

   In principle, this model will work with any form of tunnel between
   the dual-stack HG and the dual-stack CGN.  However, tunnels that
   require individual configuration are clearly undesirable because of
   their operational cost.  Configured tunnels based directly on
   [<a href="/doc/html/rfc4213" title="&quot;Basic Transition Mechanisms for IPv6 Hosts and Routers&quot;">RFC4213</a>] are therefore not suitable.  A tunnel broker according to
   [<a href="/doc/html/rfc3053" title="&quot;IPv6 Tunnel Broker&quot;">RFC3053</a>] would also have high operational costs and be unsuitable
   for home users.

   6rd [RFC5569, <a href="/doc/html/rfc5969">RFC5969</a>] technology appears suitable to support
   v6-over-v4 tunneling with low operational cost.  Generic Routing
   Encapsulation (GRE) [<a href="/doc/html/rfc2784" title="&quot;Generic Routing Encapsulation (GRE)&quot;">RFC2784</a>] with an additional auto-configuration
   mechanism is also able to support v6-over-v4 tunneling.  Other
   tunneling mechanisms such as 6over4 [<a href="/doc/html/rfc2529" title="&quot;Transmission of IPv6 over IPv4 Domains without Explicit Tunnels&quot;">RFC2529</a>], 6to4 [<a href="/doc/html/rfc3056" title="&quot;Connection of IPv6 Domains via IPv4 Clouds&quot;">RFC3056</a>], the
   Intra-Site Automatic Tunnel Addressing Protocol (ISATAP) [<a href="/doc/html/rfc5214" title="&quot;Intra-Site Automatic Tunnel Addressing Protocol (ISATAP)&quot;">RFC5214</a>],
   or Virtual Enterprise Traversal (VET) [<a href="/doc/html/rfc5558" title="&quot;Virtual Enterprise Traversal (VET)&quot;">RFC5558</a>] could be considered.
   If the ISP has an entirely MPLS infrastructure between the HG and the
   dual-stack CGN, it would also be possible to use a IPv6 Provider Edge
   (6PE) [<a href="/doc/html/rfc4798" title="&quot;Connecting IPv6 Islands over IPv4 MPLS Using IPv6 Provider Edge Routers (6PE)&quot;">RFC4798</a>] tunnel directly over MPLS.  This would, however, only
   be suitable for an advanced HG that is unlikely to be found as a
   consumer device and is not further discussed here.  To simplify the
   discussion, we assume the use of 6rd.








<span class="grey">Jiang, et al.                 Informational                     [Page 5]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-6" ></span>
<span class="grey"><a href="/doc/html/rfc6264">RFC 6264</a>           Incremental CGN for IPv6 Transition         June 2011</span>


<span class="h3"><a class="selflink" id="section-2.3" href="#section-2.3">2.3</a>.  Behavior of Dual-Stack Home Gateway</span>

   When a dual-stack home gateway receives a data packet from a host, it
   will determine whether the packet is an IPv4 or IPv6 packet.  The
   packet will be handled by an IPv4 or IPv6 stack as appropriate.  For
   IPv4, and in the absence of v4-v4 NAT on the HG, the stack will
   simply forward the packet to the CGN, which will normally be the IPv4
   default router.  If v4-v4 NAT is enabled, the HG translates the
   packet source address from an HG-scope private IPv4 address into a
   CGN-scope IPv4 address, performs port mapping if needed, and then
   forwards the packet towards the CGN.  The HG records the v4-v4
   address and port mapping information for inbound packets, like any
   other NAT.

   For IPv6, the HG needs to encapsulate the data into an IPv4 tunnel
   packet, which has the dual-stack CGN as the IPv4 destination.  The HG
   sends the new IPv4 packet towards the CGN, for example, using 6rd.

   If the HG is linked to more than one CGN, it will record the mapping
   information between the tunnel and the source IPv6 address for
   inbound packets.  Detailed considerations for the use of multiple
   CGNs by one HG are for further study.

   IPv4 packets from the CGN and encapsulated IPv6 packets from the CGN
   will be translated or decapsulated according to the stored mapping
   information and forwarded to the customer side of the HG.

<span class="h3"><a class="selflink" id="section-2.4" href="#section-2.4">2.4</a>.  Behavior of Dual-Stack CGN</span>

   When a dual-stack CGN receives an IPv4 data packet from a dual-stack
   home gateway, it will determine whether the packet is a normal IPv4
   packet, which is non-encapsulated, or a v6-over-v4 tunnel packet
   addressed to a tunnel endpoint within the CGN.  For a normal IPv4
   packet, the CGN translates the packet source address from a CGN-scope
   IPv4 address into a public IPv4 address, performs port mapping if
   necessary, and then forwards it normally to the IPv4 Internet.  The
   CGN records the v4-v4 address and port mapping information for
   inbound packets, just like a normal NAT does.  For a v6-over-v4
   tunnel packet, the tunnel endpoint within the CGN will decapsulate it
   into the original IPv6 packet and then forward it to the IPv6
   Internet.  The CGN records the mapping information between the tunnel
   and the source IPv6 address for inbound packets.

   Depending on the deployed location of the CGN, it may use a further
   v6-over-v4 tunnel to connect to the IPv6 Internet.






<span class="grey">Jiang, et al.                 Informational                     [Page 6]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-7" ></span>
<span class="grey"><a href="/doc/html/rfc6264">RFC 6264</a>           Incremental CGN for IPv6 Transition         June 2011</span>


   Packets from the IPv4 Internet will be appropriately translated by
   the CGN and forwarded to the HG, and packets from the IPv6 Internet
   will be tunneled to the appropriate HG, using the stored mapping
   information as necessary.

<span class="h3"><a class="selflink" id="section-2.5" href="#section-2.5">2.5</a>.  Impact for Existing Hosts and Unchanged Networks</span>

   This approach does not affect the unchanged parts of ISP networks at
   all.  Legacy IPv4 ISP networks and their IPv4 devices remain in use.
   The existing IPv4 hosts, shown as the lower right box in Figure 1,
   having either global IPv4 addresses or behind v4-v4 NAT, can connect
   to the IPv4 Internet as it is now.  These hosts, if they are upgraded
   to become dual-stack hosts, can access the IPv6 Internet through the
   IPv4 ISP network by using IPv6-over-IPv4 tunnel technologies.  (See
   <a href="#section-2.7">Section 2.7</a> for a comment on MTU size.)

<span class="h3"><a class="selflink" id="section-2.6" href="#section-2.6">2.6</a>.  IPv4/IPv6 Intercommunication</span>

   For obvious commercial reasons, IPv6-only public services are not
   expected as long as there is a significant IPv4-only customer base in
   the world.  However, IPv4/IPv6 intercommunication may become an issue
   in many scenarios.

   The IETF is expected to standardize a recommended IPv4/IPv6
   translation algorithm, sometimes referred to as NAT64.  It is
   specified in the following:

   o  &quot;Framework for IPv4/IPv6 Translation&quot; [<a href="/doc/html/rfc6144" title="&quot;Framework for IPv4/IPv6 Translation&quot;">RFC6144</a>]
   o  &quot;IPv6 Addressing of IPv4/IPv6 Translators&quot; [<a href="/doc/html/rfc6052" title="&quot;IPv6 Addressing of IPv4/IPv6 Translators&quot;">RFC6052</a>]
   o  &quot;DNS64: DNS Extensions for Network Address Translation from IPv6
      Clients to IPv4 Servers&quot; [<a href="/doc/html/rfc6147" title="&quot;DNS64: DNS Extensions for Network Address Translation from IPv6 Clients to IPv4 Servers&quot;">RFC6147</a>]
   o  &quot;IP/ICMP Translation Algorithm&quot; [<a href="/doc/html/rfc6145" title="&quot;IP/ICMP Translation Algorithm&quot;">RFC6145</a>]
   o  &quot;Stateful NAT64: Network Address and Protocol Translation from
      IPv6 Clients to IPv4 Servers&quot; [<a href="/doc/html/rfc6146" title="&quot;Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers&quot;">RFC6146</a>]
   o  &quot;An FTP ALG for IPv6-to-IPv4 Translation&quot; [<a href="#ref-FTP-ALG" title="&quot;An FTP ALG for IPv6-to-IPv4 Translation&quot;">FTP-ALG</a>]

   The service, as described in the IETF&#x27;s &quot;Guidelines for Using IPv6
   Transition Mechanisms during IPv6 Deployment&quot; [<a href="/doc/html/rfc6180" title="&quot;Guidelines for Using IPv6 Transition Mechanisms during IPv6 Deployment&quot;">RFC6180</a>], provides for
   stateless translation between hosts in an IPv4-only domain or hosts
   that offer an IPv4-only service and hosts with an IPv4-embedded IPv6
   address in an IPv6-only domain.  It additionally provides access from
   IPv6 hosts with general format addresses to hosts in an IPv4-only
   domain or hosts that offer an IPv4-only service.  It does not provide
   any-to-any translation.  One result is that client-only hosts in the
   IPv6 domain gain access to IPv4 services through stateful
   translation.  Another result is that the IPv6 network operator has





<span class="grey">Jiang, et al.                 Informational                     [Page 7]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-8" ></span>
<span class="grey"><a href="/doc/html/rfc6264">RFC 6264</a>           Incremental CGN for IPv6 Transition         June 2011</span>


   the option of moving servers into the IPv6-only domain while
   retaining accessibility for IPv4-only clients through stateless
   translation of an IPv4-embedded IPv6 address.

   Also, &quot;Architectural Implications of NAT&quot; [<a href="/doc/html/rfc2993" title="&quot;Architectural Implications of NAT&quot;">RFC2993</a>] applies across
   the service just as in IPv4/IPv4 translation: apart from the fact
   that a system with an IPv4-embedded IPv6 address is reachable across
   the NAT, which is unlike IPv4, any assumption on the application&#x27;s
   part that a local address is meaningful to a remote peer and any use
   of an IP address literal in the application payload is a source of
   service issues.  In general, the recommended mitigation for this is
   as follows:

   o  Ideally, applications should use DNS names rather than IP address
      literals in URLs, URIs, and referrals, and in general be network
      layer agnostic.

   o  If they do not, the network may provide a relay or proxy that
      straddles the domains.  For example, an SMTP Mail Transfer Agent
      (MTA) with both IPv4 and IPv6 connectivity handles IPv4/IPv6
      translation cleanly at the application layer.

<span class="h3"><a class="selflink" id="section-2.7" href="#section-2.7">2.7</a>.  Discussion</span>

   For IPv4 traffic, the incremental CGN approach inherits all the
   problems of CGN address-sharing techniques [<a href="#ref-ADDR-ISSUES">ADDR-ISSUES</a>] (e.g.,
   scaling and the difficulty of supporting well-known ports for inbound
   traffic).  Application-layer problems created by double NAT are
   beyond the scope of this document.

   For IPv6 traffic, a user behind the DS HG will see normal IPv6
   service.  We observe that an IPv6 tunnel MTU of at least 1500 bytes
   would ensure that the mechanism does not cause excessive
   fragmentation of IPv6 traffic or excessive IPv6 path MTU discovery
   interactions.  This, and the absence of NAT problems for IPv6, will
   create an incentive for users and application service providers to
   prefer IPv6.

   ICMP filtering [<a href="/doc/html/rfc4890" title="&quot;Recommendations for Filtering ICMPv6 Messages in Firewalls&quot;">RFC4890</a>] may be included as part of CGN functions.

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  Smooth Transition towards IPv6 Infrastructure</span>

   Transition from pure NAT444 CGN or 6rd to the incremental CGN
   approach is straightforward.  The HG and CGN devices and their
   locations do not have to be changed; only software upgrading may be
   needed.  In the ideal model, described below, even software upgrading
   is not necessary; reconfiguration of the devices is enough.  NAT444
   CGN solves the public address shortage issues in the current IPv4



<span class="grey">Jiang, et al.                 Informational                     [Page 8]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-9" ></span>
<span class="grey"><a href="/doc/html/rfc6264">RFC 6264</a>           Incremental CGN for IPv6 Transition         June 2011</span>


   infrastructure.  However, it does not contribute towards IPv6
   deployment at all.  The incremental CGN approach can inherit NAT444
   CGN functions while providing overlay IPv6 services.  6rd mechanisms
   can also transform smoothly into this incremental CGN model.
   However, the home gateways need to be upgraded correspondingly to
   perform the steps described below

   The incremental CGN can also easily be transitioned to an IPv6-
   enabled infrastructure, in which the ISP network is either dual-stack
   or IPv6-only.

   If the ISP prefers to move to dual-stack routing, the HG should
   simply switch off its v6-over-v4 function when it observes native
   IPv6 Router Advertisement (RA) or DHCPv6 traffic and then forward
   both IPv6 and IPv4 traffic directly while the dual-stack CGN keeps
   only its v4-v4 NAT function.

   However, we expect ISPs to choose the approach described as
   incremental CGN here because they intend to avoid dual-stack routing
   and to move incrementally from IPv4-only routing to IPv6-only
   routing.  In this case, the ideal model for the incremental CGN
   approach is that of an integrated configurable CGN device and an
   adaptive HG device.  The integrated CGN device will be able to
   support multiple functions, including NAT444 CGN, 6rd router (or an
   alternative tunneling mechanism), DS-Lite, and dual-stack forwarding.

   The HG has to integrate the corresponding functions and be able to
   detect relevant incremental changes on the CGN side.  Typically, the
   HG will occasionally poll the CGN to discover which features are
   operational.  For example, starting from a pure IPv4-only scenario
   (in which the HG treats the CGN only as an IPv4 default router), the
   HG would discover (by infrequent polling) when 6rd became available.
   The home user would then acquire an IPv6 prefix.  At a later stage,
   the HG would observe the appearance of native IPv6 Route
   Advertisement messages or DHCPv6 messages to discover the
   availability of an IPv6 service including DS-Lite.  Thus, when an ISP
   decides to switch from incremental CGN to DS-Lite CGN, only a
   configuration change or a minor software update is needed on the
   CGNs.  The home gateway would detect this change and switch
   automatically to DS-Lite mode.  The only impact on the home user will
   be to receive a different IPv6 prefix.

   In the smooth transition model, both CGN and HG are reusable devices
   during different transition periods.  This avoids potential multiple
   upgrades.  Different regions of the same ISP network may be at
   different stages of the incremental process, using identical





<span class="grey">Jiang, et al.                 Informational                     [Page 9]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-10" ></span>
<span class="grey"><a href="/doc/html/rfc6264">RFC 6264</a>           Incremental CGN for IPv6 Transition         June 2011</span>


   equipment but with different configurations of the incremental CGN
   devices in each region.  Thus, IPv6 migration may be incrementally
   achieved according to the real ISP and customer requirements.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Security Considerations</span>

   Security issues associated with NAT have been documented in [<a href="/doc/html/rfc2663" title="&quot;IP Network Address Translator (NAT) Terminology and Considerations&quot;">RFC2663</a>]
   and [<a href="/doc/html/rfc2993" title="&quot;Architectural Implications of NAT&quot;">RFC2993</a>].  Security issues for large-scale address sharing,
   including CGN, are discussed in [<a href="#ref-ADDR-ISSUES">ADDR-ISSUES</a>].  The present
   specification does not introduce any new features to CGN itself and
   hence no new security considerations.  Security issues for 6rd are
   documented in [<a href="/doc/html/rfc5569" title="&quot;IPv6 Rapid Deployment on IPv4 Infrastructures (6rd)&quot;">RFC5569</a>] and [<a href="/doc/html/rfc5969" title="&quot;IPv6 Rapid Deployment on IPv4 Infrastructures (6rd) -- Protocol Specification&quot;">RFC5969</a>], and those for DS-Lite are
   discussed in [<a href="#ref-DS-LITE" title="&quot;Dual- Stack Lite Broadband Deployments Following IPv4 Exhaustion&quot;">DS-LITE</a>].

   Since the tunnels proposed here exist entirely within a single ISP
   network between the HG/CPE and the CGN, the threat model is
   relatively simple.  [<a href="/doc/html/rfc4891" title="&quot;Using IPsec to Secure IPv6-in-IPv4 Tunnels&quot;">RFC4891</a>] describes how to protect tunnels using
   IPsec, but an ISP could reasonably deem its infrastructure to provide
   adequate security without the additional protection and overhead of
   IPsec.  The intrinsic risks of tunnels are described in [<a href="/doc/html/rfc6169" title="&quot;Security Concerns with IP Tunneling&quot;">RFC6169</a>],
   which recommends that tunneled traffic should not cross border
   routers.  The incremental CGN approach respects this recommendation.
   To avoid other risks caused by tunnels, it is important that any
   security mechanisms based on packet inspection and any implementation
   of ingress filtering are applied to IPv6 packets after they have been
   decapsulated by the CGN.  The dual-stack home gateway will need to
   provide basic security functionality for IPv6 [<a href="/doc/html/rfc6092" title="&quot;Recommended Simple Security Capabilities in Customer Premises Equipment (CPE) for Providing Residential IPv6 Internet Service&quot;">RFC6092</a>].  Other
   aspects are described in [<a href="/doc/html/rfc4864" title="&quot;Local Network Protection for IPv6&quot;">RFC4864</a>].

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  Acknowledgements</span>

   Useful comments were made by Fred Baker, Dan Wing, Fred Templin,
   Seiichi Kawamura, Remi Despres, Janos Mohacsi, Mohamed Boucadair,
   Shin Miyakawa, Joel Jaeggli, Jari Arkko, Tim Polk, Sean Turner, and
   other members of the IETF V6OPS working group.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  References</span>

<span class="h3"><a class="selflink" id="section-6.1" href="#section-6.1">6.1</a>.  Normative References</span>

   [<a id="ref-RFC2529">RFC2529</a>]  Carpenter, B. and C. Jung, &quot;Transmission of IPv6 over IPv4
              Domains without Explicit Tunnels&quot;, <a href="/doc/html/rfc2529">RFC 2529</a>, March 1999.

   [<a id="ref-RFC2784">RFC2784</a>]  Farinacci, D., Li, T., Hanks, S., Meyer, D., and P.
              Traina, &quot;Generic Routing Encapsulation (GRE)&quot;, <a href="/doc/html/rfc2784">RFC 2784</a>,
              March 2000.





<span class="grey">Jiang, et al.                 Informational                    [Page 10]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-11" ></span>
<span class="grey"><a href="/doc/html/rfc6264">RFC 6264</a>           Incremental CGN for IPv6 Transition         June 2011</span>


   [<a id="ref-RFC5569">RFC5569</a>]  Despres, R., &quot;IPv6 Rapid Deployment on IPv4
              Infrastructures (6rd)&quot;, <a href="/doc/html/rfc5569">RFC 5569</a>, January 2010.

   [<a id="ref-RFC5969">RFC5969</a>]  Townsley, W. and O. Troan, &quot;IPv6 Rapid Deployment on IPv4
              Infrastructures (6rd) -- Protocol Specification&quot;, <a href="/doc/html/rfc5969">RFC</a>
              <a href="/doc/html/rfc5969">5969</a>, August 2010.

<span class="h3"><a class="selflink" id="section-6.2" href="#section-6.2">6.2</a>.  Informative References</span>

   [<a id="ref-RFC2663">RFC2663</a>]  Srisuresh, P. and M. Holdrege, &quot;IP Network Address
              Translator (NAT) Terminology and Considerations&quot;, <a href="/doc/html/rfc2663">RFC</a>
              <a href="/doc/html/rfc2663">2663</a>, August 1999.

   [<a id="ref-RFC2993">RFC2993</a>]  Hain, T., &quot;Architectural Implications of NAT&quot;, <a href="/doc/html/rfc2993">RFC 2993</a>,
              November 2000.

   [<a id="ref-RFC3053">RFC3053</a>]  Durand, A., Fasano, P., Guardini, I., and D. Lento, &quot;IPv6
              Tunnel Broker&quot;, <a href="/doc/html/rfc3053">RFC 3053</a>, January 2001.

   [<a id="ref-RFC3056">RFC3056</a>]  Carpenter, B. and K. Moore, &quot;Connection of IPv6 Domains
              via IPv4 Clouds&quot;, <a href="/doc/html/rfc3056">RFC 3056</a>, February 2001.

   [<a id="ref-RFC4213">RFC4213</a>]  Nordmark, E. and R. Gilligan, &quot;Basic Transition Mechanisms
              for IPv6 Hosts and Routers&quot;, <a href="/doc/html/rfc4213">RFC 4213</a>, October 2005.

   [<a id="ref-RFC4798">RFC4798</a>]  De Clercq, J., Ooms, D., Prevost, S., and F. Le Faucheur,
              &quot;Connecting IPv6 Islands over IPv4 MPLS Using IPv6
              Provider Edge Routers (6PE)&quot;, <a href="/doc/html/rfc4798">RFC 4798</a>, February 2007.

   [<a id="ref-RFC4864">RFC4864</a>]  Van de Velde, G., Hain, T., Droms, R., Carpenter, B., and
              E. Klein, &quot;Local Network Protection for IPv6&quot;, <a href="/doc/html/rfc4864">RFC 4864</a>,
              May 2007.

   [<a id="ref-RFC4890">RFC4890</a>]  Davies, E. and J. Mohacsi, &quot;Recommendations for Filtering
              ICMPv6 Messages in Firewalls&quot;, <a href="/doc/html/rfc4890">RFC 4890</a>, May 2007.

   [<a id="ref-RFC4891">RFC4891</a>]  Graveman, R., Parthasarathy, M., Savola, P., and H.
              Tschofenig, &quot;Using IPsec to Secure IPv6-in-IPv4 Tunnels&quot;,
              <a href="/doc/html/rfc4891">RFC 4891</a>, May 2007.

   [<a id="ref-RFC5214">RFC5214</a>]  Templin, F., Gleeson, T., and D. Thaler, &quot;Intra-Site
              Automatic Tunnel Addressing Protocol (ISATAP)&quot;, <a href="/doc/html/rfc5214">RFC 5214</a>,
              March 2008.

   [<a id="ref-RFC5558">RFC5558</a>]  Templin, F., Ed., &quot;Virtual Enterprise Traversal (VET)&quot;,
              <a href="/doc/html/rfc5558">RFC 5558</a>, February 2010.





<span class="grey">Jiang, et al.                 Informational                    [Page 11]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-12" ></span>
<span class="grey"><a href="/doc/html/rfc6264">RFC 6264</a>           Incremental CGN for IPv6 Transition         June 2011</span>


   [<a id="ref-RFC6052">RFC6052</a>]  Bao, C., Huitema, C., Bagnulo, M., Boucadair, M., and X.
              Li, &quot;IPv6 Addressing of IPv4/IPv6 Translators&quot;, <a href="/doc/html/rfc6052">RFC 6052</a>,
              October 2010.

   [<a id="ref-RFC6092">RFC6092</a>]  Woodyatt, J., Ed., &quot;Recommended Simple Security
              Capabilities in Customer Premises Equipment (CPE) for
              Providing Residential IPv6 Internet Service&quot;, <a href="/doc/html/rfc6092">RFC 6092</a>,
              January 2011.

   [<a id="ref-RFC6144">RFC6144</a>]  Baker, F., Li, X., Bao, C., and K. Yin, &quot;Framework for
              IPv4/IPv6 Translation&quot;, <a href="/doc/html/rfc6144">RFC 6144</a>, April 2011.

   [<a id="ref-RFC6145">RFC6145</a>]  Li, X., Bao, C., and F. Baker, &quot;IP/ICMP Translation
              Algorithm&quot;, <a href="/doc/html/rfc6145">RFC 6145</a>, April 2011.

   [<a id="ref-RFC6146">RFC6146</a>]  Bagnulo, M., Matthews, P., and I. van Beijnum, &quot;Stateful
              NAT64: Network Address and Protocol Translation from IPv6
              Clients to IPv4 Servers&quot;, <a href="/doc/html/rfc6146">RFC 6146</a>, April 2011.

   [<a id="ref-RFC6147">RFC6147</a>]  Bagnulo, M., Sullivan, A., Matthews, P., and I. van
              Beijnum, &quot;DNS64: DNS Extensions for Network Address
              Translation from IPv6 Clients to IPv4 Servers&quot;, <a href="/doc/html/rfc6147">RFC 6147</a>,
              April 2011.

   [<a id="ref-RFC6169">RFC6169</a>]  Krishnan, S., Thaler, D., and J. Hoagland, &quot;Security
              Concerns with IP Tunneling&quot;, <a href="/doc/html/rfc6169">RFC 6169</a>, April 2011.

   [<a id="ref-RFC6180">RFC6180</a>]  Arkko, J. and F. Baker, &quot;Guidelines for Using IPv6
              Transition Mechanisms during IPv6 Deployment&quot;, <a href="/doc/html/rfc6180">RFC 6180</a>,
              May 2011.

   [<a id="ref-RFC6204">RFC6204</a>]  Singh, H., Beebee, W., Donley, C., Stark, B., and O.
              Troan, Ed., &quot;Basic Requirements for IPv6 Customer Edge
              Routers&quot;, <a href="/doc/html/rfc6204">RFC 6204</a>, April 2011.

   [<a id="ref-IPUSAGE">IPUSAGE</a>]  G. Huston, IPv4 Address Report, June 2011,
              <a href="http://www.potaroo.net/tools/ipv4/index.html">http://www.potaroo.net/tools/ipv4/index.html</a>.

   [<a id="ref-DS-LITE">DS-LITE</a>]  Durand, A., Droms, R., Woodyatt, J., and Y. Lee,  &quot;Dual-
              Stack Lite Broadband Deployments Following IPv4
              Exhaustion&quot;, Work in Progress, May 2011.

   [<a id="ref-ADDR-ISSUES">ADDR-ISSUES</a>]
              Ford, M., Boucadair, M., Durand, A., Levis, P., and P.
              Roberts, &quot;Issues with IP Address Sharing&quot;, Work in
              Progress, March 2011.





<span class="grey">Jiang, et al.                 Informational                    [Page 12]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-13" ></span>
<span class="grey"><a href="/doc/html/rfc6264">RFC 6264</a>           Incremental CGN for IPv6 Transition         June 2011</span>


   [<a id="ref-CGN-REQS">CGN-REQS</a>] Perreault, S., Ed., Yamagata, I., Miyakawa, S., Nakagawa,
              A., and H.  Ashida, &quot;Common requirements for IP address
              sharing schemes&quot;, Work in Progress, March 2011.

   [<a id="ref-FTP-ALG">FTP-ALG</a>]  van Beijnum, I., &quot;An FTP ALG for IPv6-to-IPv4
              Translation&quot;, Work in Progress, May 2011.

Authors&#x27; Addresses

   Sheng Jiang
   Huawei Technologies Co., Ltd
   Huawei Building, No.3 Xinxi Rd.,
   Shang-Di Information Industry Base, Hai-Dian District
   Beijing 100085
   P.R. China
   EMail: jiangsheng@huawei.com

   Dayong Guo
   Huawei Technologies Co., Ltd
   Huawei Building, No.3 Xinxi Rd.,
   Shang-Di Information Industry Base, Hai-Dian District
   Beijing 100085
   P.R. China
   EMail: guoseu@huawei.com

   Brian Carpenter
   Department of Computer Science
   University of Auckland
   PB 92019
   Auckland, 1142
   New Zealand
   EMail: brian.e.carpenter@gmail.com



















Jiang, et al.                 Informational                    [Page 13]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

