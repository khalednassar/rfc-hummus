<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc947
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.33.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.33.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/rfc947/">
  <meta name="description" content="Multi-network broadcasting within the Internet (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.33.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.33.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgwhite"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc947.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc947.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc947.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc947/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc947/" title="Datatracker information for this document">Tracker</a>] [<a href="mailto:rfc947@ietf.org?subject=rfc947" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=rfc947-.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=rfc947-.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/rfc947-.txt" title="Run an idnits check of this document">Nits</a>]

                                                                 Unknown</pre>
      </div>
    

    <div class="draftcontent">
    <pre>Network Working Group                                       Ken Lebowitz
Request for Comments: 947                                  David Mankins
                                                        BBN Laboratories
                                                               June 1985

             <span class="h1">Multi-network Broadcasting within the Internet</span>


<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>. Status of this Memo</span>

   This RFC describes the extension of a network&#x27;s broadcast domain to
   include more than one physical network through the use of a broadcast
   packet repeater.

   The following paper will present the problem of multi-network
   broadcasting and our motivation for solving this problem which is in
   the context of developing a distributed operating system.  We discuss
   different solutions to extending a broadcast domain and why we chose
   the one that has been implemented.  In addition, there is information
   on the implementation itself and some notes on its performance.

   It is hoped that the ideas presented here will help people in the
   Internet who have applications which make use of broadcasting and
   have come up against the limitation of only being able to broadcast
   within a single network.

   The information presented here is accurate as of the date of
   publication but specific details, particularly those regarding our
   implementation, may change in the future.  Distribution of this memo
   is unlimited.

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>. The Problem</span>

   Communication between hosts on separate networks has been addressed
   largely through the use of Internet protocols and gateways. One
   aspect of internetwork communication that hasn&#x27;t been solved in the
   Internet is extending broadcasting to encompass two or more networks.
   Broadcasting is an efficient way to send information to many hosts
   while only having to transmit a single packet.  Many of the current
   local area network (LAN) architectures directly support a broadcast
   mechanism.  Unfortunately, this broadcast mechanism has a shortcoming
   when it is used in networking environments which include multiple
   LANs connected by gateways such as in the DARPA Internet.  This
   shortcoming is that broadcasted packets are only received by hosts on
   the physical network on which the packet was broadcast.  As a result,
   any application which takes advantage of LAN broadcasting can only
   broadcast to those hosts on its physical network.

   We took advantage of broadcasting in developing the Cronus
   Distributed Operating System [<a href="#ref-1" title="&quot;Cronus, A Distributed Operating System: Phase 1 Final Report&quot;">1</a>].  Cronus provides services and
   communication to processes distributed among a variety of different


<span class="grey">Lebowitz &amp; Mankins                                              [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc947">RFC 947</a>                                                        June 1985</span>
Multi-network Broadcasting within the Internet


   types of computer systems.  Cronus is built around logical clusters
   of hosts connected to one or more high-speed LANs.  Communication in
   Cronus is built upon the TCP and UDP protocols.  Cronus makes use of
   broadcasting for dynamically locating resources on other hosts and
   collecting status information from a collection of servers.  Since
   Cronus&#x27;s broadcast capabilities are not intended to be limited to the
   boundaries of a single LAN, we needed to find some way to extend our
   broadcasting domain to include hosts on distant LANs in order to
   experiment with clusters that span several physical networks.  Cronus
   predominantly uses broadcasting to communicate with a subset of the
   hosts that actually receive the broadcasted message.  A multicast
   mechanism would be more appropriate, but was unavailable in some of
   our network implementations, so we chose broadcast for the initial
   implementation of Cronus utilities.

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>. Our Solution</span>

   The technique we chose to experiment with the multi-network
   broadcasting problem can be described as a &quot;broadcast repeater&quot;.  A
   broadcast repeater is a mechanism which transparently relays
   broadcast packets from one LAN to another, and may also forward
   broadcast packets to hosts on a network which doesn&#x27;t support
   broadcasting at the link-level.  This mechanism provides flexibility
   while still taking advantage of the convenience of LAN broadcasts.

   Our broadcast repeater is a process on a network host which listens
   for broadcast packets.  These packets are picked up and
   retransmitted, using a simple repeater-to-repeater protocol, to one
   or more repeaters that are connected to distant LANs.  The repeater
   on the receiving end will rebroadcast the packet on its LAN,
   retaining the original packet&#x27;s source address.  The broadcast
   repeater can be made very intelligent in its selection of messages to
   be forwarded.  We currently have the repeater forward only broadcast
   messages sent using the UDP ports used by Cronus, but messages may be
   selected using any field in the UDP or IP headers, or all IP-level
   broadcast messages may be forwarded.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>. Alternatives to the Broadcast Repeater</span>

   We explored a few alternatives before deciding on our technique to
   forward broadcast messages.  One of these methods was to put
   additional functions into the Internet gateways.  Gateways could
   listen at the link-level for broadcast packets and relay the packets
   to one or more gateways on distant LANs.  These gateways could then
   transmit the same packet onto their networks using the local
   network&#x27;s link-level broadcast capability, if one is available.  All
   gateways participating in this scheme would have to maintain tables


<span class="grey">Lebowitz &amp; Mankins                                              [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc947">RFC 947</a>                                                        June 1985</span>
Multi-network Broadcasting within the Internet


   of all other gateways which are to receive broadcasts.  If the
   recipient gateway was serving a network without a capacity to
   broadcast it could forward the messages directly to one or more
   designated hosts on its network but, again, it would require that
   tables be kept in the gateway.  Putting this sort of function into
   gateways was rejected for a number of reasons: (a) it would require
   extensions to the gateway control protocol to allow updating the
   lists gateways would have to maintain, (b) since not all messages
   (e.g., LAN address- resolution messages) need be forwarded, the need
   to control forwarding should be under the control of higher levels of
   the protocol than may be available to the gateways, (c) Cronus could
   be put into environments where the gateways may be provided by
   alternative vendors who may not implement broadcast propagation, (d)
   as a part of the underlying network, gateways are likely to be
   controlled by a different agency from that controlling the
   configuration of a Cronus system, adding bureaucratic complexity to
   reconfiguration.

   Another idea which was rejected was to put broadcast functionality
   into the Cronus kernel.  The Cronus kernel is a process which runs on
   each host participating in Cronus, and has the task of routing all
   messages passed between Cronus processes.  The Cronus kernel is the
   only program in the Cronus system which directly uses broadcast
   capability (other parts of Cronus communicate using mechanisms
   provided by the kernel).  We could either entirely remove the Cronus
   kernel&#x27;s dependence on broadcast, or add a mechanism for emulating
   broadcast using serially-transmitted messages when the underlying
   network does not provide a broadcast facility itself.  Either
   solution requires all Cronus kernel processes to know the addresses
   of all other participants in a Cronus system, which we view as an
   undesirable limit on configuration flexibility.  Also, this solution
   would be Cronus-specific, while the broadcast-repeater solution is
   applicable to other broadcast-based protocols.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>. Implementation</span>

   The broadcast repeater is implemented as two separate processes - the
   forwarder and the repeater.  The forwarder process waits for
   broadcast UDP packets to come across its local network which match
   one or more specific port numbers (or destination addresses).  When
   such a packet is found, it is encapsulated in a forwarder-repeater
   message sent to a repeater process on a foreign network.  The
   repeater then relays the forwarded packet onto its LAN using that
   network&#x27;s link-level broadcast address in the packet&#x27;s destination
   field, but preserving the source address from the original packet.

   When the forwarder process starts for the first time it reads a


<span class="grey">Lebowitz &amp; Mankins                                              [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc947">RFC 947</a>                                                        June 1985</span>
Multi-network Broadcasting within the Internet


   configuration file.  This file specifies the addresses of repeater
   processes, and selects which packets should be forwarded to each
   repeater process (different repeaters may select different sets of
   UDP packets).  The forwarder attempts to establish a TCP connection
   to each repeater listed in the configuration file.  If a TCP link to
   a repeater fails, the forwarder will periodically retry connecting to
   it.  Non-repeater hosts may also be listed in the configuration file.
   For these hosts the forwarder will simply replace the destination
   broadcast address in the UDP packet with the host&#x27;s address and send
   this new datagram directly to the non-repeater host.

   If a repeater and a forwarder co-exist on the same LAN a problem may
   arise if the forwarder picks up packets which have been rebroadcast
   by the repeater.  As a precaution against rebroadcast of forwarded
   packets (&quot;feedback&quot; or &quot;ringing&quot;), the forwarder does not connect to
   any repeaters listed in its configuration file which are on the same
   network as the forwarder itself.  Also, to avoid a broadcast loop
   involving two LANs, each with a forwarder talking to a repeater on
   the other LAN, forwarders do not forward packets whose source address
   is not on the forwarder&#x27;s LAN.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>. Experience</span>

   To date, the broadcast repeater has been implemented on the VAX
   running 4.2 BSD UNIX operating system with BBN&#x27;s networking software
   and has proven to work quite well for our purposes.  Our current
   configuration includes two Ethernets which are physically separated
   by two other LANs.  For the past few months the broadcast repeater
   has successfully extended our broadcast domain to include both
   Ethernets even though messages between the two networks must pass
   through at least two gateways.  We were forced to add a special
   capability to the BBN TCP/IP implementation which allows privileged
   processes to send out IP packets with another host&#x27;s source address.

   The repeater imposes a fair amount of overhead on the shared hosts
   that currently support it due to the necessity of waking the
   forwarder process on all UDP packets which arrive at the host, since
   the decision to reject a packet is made by user-level software,
   rather than in the network protocol drivers.  One solution to this
   problem would be to implement the packet filtering in the system
   kernel (leaving the configuration management and rebroadcast
   mechanism in user code) as has been done by Stanford/CMU in a UNIX
   packet filter they have developed.  As an alternative we are planning
   to rehost the implementation of the repeater function as a
   specialized network service provided by a microcomputer based




<span class="grey">Lebowitz &amp; Mankins                                              [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc947">RFC 947</a>                                                        June 1985</span>
Multi-network Broadcasting within the Internet


   real-time system which is already part of our Cronus configuration.
   Such a machine is better suited to the task since scheduling overhead
   is much less for them than it is on a multi-user timesharing system.

<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>. Reference</span>

   [<a id="ref-1">1</a>]  &quot;Cronus, A Distributed Operating System: Phase 1 Final Report&quot;,
        R. Schantz, R. Thomas, R. Gurwitz, G. Bono, M. Dean,
        K. Lebowitz, K.  Schroder, M. Barrow and R. Sands, Technical
        Report No. 5885, Bolt Beranek and Newman, Inc., January 1985.
        The Cronus project is supported by the Rome Air Development
        Center.

<span class="h2"><a class="selflink" id="section-8" href="#section-8">8</a>. Editors Note</span>

   Also see RFCs 919 and 940 on this topic.

































Lebowitz &amp; Mankins                                              [Page 5]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

