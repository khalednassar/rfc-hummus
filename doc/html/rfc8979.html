<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc8979
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.33.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.33.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-ietf-sfc-serviceid-header/">
  <meta name="description" content="Subscriber and Performance Policy Identifier Context Headers in the Network Service Header (NSH) (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.33.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.33.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgblue"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc8979.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc8979.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/rfc8979.xml" title="XML source for this document">xml</a>|<a href="https://www.rfc-editor.org/rfc/rfc8979.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc8979/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc8979/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/sfc/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-ietf-sfc-serviceid-header@ietf.org?subject=draft-ietf-sfc-serviceid-header" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-ietf-sfc-serviceid-header-14.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-ietf-sfc-serviceid-header-14.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-ietf-sfc-serviceid-header-14.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-ietf-sfc-serviceid-header-14">draft-ietf-sfc-serviceid-header-14</a>               Proposed Standard</pre>
      </div>
    

    <div class="draftcontent">
    <pre>Internet Engineering Task Force (IETF)                       B. Sarikaya
Request for Comments: 8979
Category: Standards Track                                    D. von Hugo
ISSN: 2070-1721                                         Deutsche Telekom
                                                            M. Boucadair
                                                                  Orange
                                                           February 2021


  <span class="h1">Subscriber and Performance Policy Identifier Context Headers in the</span>
                      <span class="h1">Network Service Header (NSH)</span>

Abstract

   This document defines the Subscriber and Performance Policy
   Identifier Context Headers.  These Variable-Length Context Headers
   can be carried in the Network Service Header (NSH) and are used to
   inform Service Functions (SFs) of subscriber- and performance-related
   information for the sake of policy enforcement and appropriate
   Service Function Chaining (SFC) operations.  The structure of each
   Context Header and their use and processing by NSH-aware nodes are
   described.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="/doc/html/rfc7841#section-2">Section&nbsp;2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8979">https://www.rfc-editor.org/info/rfc8979</a>.

Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="/doc/html/bcp78">BCP 78</a> and the IETF Trust&#x27;s Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction
   2.  Conventions and Terminology
   3.  Subscriber Identifier NSH Variable-Length Context Header
   4.  Performance Policy Identifier NSH Variable-Length Context
           Headers
   5.  MTU Considerations
   6.  IANA Considerations
   7.  Security Considerations
   8.  References
     8.1.  Normative References
     8.2.  Informative References
   Acknowledgements
   Authors&#x27; Addresses

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Introduction</span>

   This document discusses how to inform Service Functions (SFs)
   [<a href="/doc/html/rfc7665" title="&quot;Service Function Chaining (SFC) Architecture&quot;">RFC7665</a>] about subscriber and service policy information when
   required for the sake of policy enforcement within a single
   administrative domain.  In particular, subscriber-related information
   may be required to enforce subscriber-specific SFC-based traffic
   policies.  However, the information carried in packets may not be
   sufficient to unambiguously identify a subscriber.  This document
   fills this void by specifying a new Network Service Header (NSH)
   [<a href="/doc/html/rfc8300" title="&quot;Network Service Header (NSH)&quot;">RFC8300</a>] Context Header to convey and disseminate such information
   within the boundaries of a single administrative domain.  As
   discussed in <a href="#section-3">Section 3</a>, the use of obfuscated and non-persistent
   identifiers is recommended.

   Also, traffic steering by means of SFC may be driven, for example, by
   Quality of Service (QoS) considerations.  Typically, QoS information
   may serve as an input for the computation, establishment, and
   selection of the Service Function Path (SFP).  Furthermore, the
   dynamic structuring of Service Function Chains and their subsequent
   SFPs may be conditioned by QoS requirements that will affect the
   identification, location, and sequencing of SF instances.  Hence, the
   need arises to provide downstream SFs with a performance policy
   identifier in order for them to appropriately meet the QoS
   requirements.  This document also specifies a new NSH Context Header
   (<a href="#section-4">Section 4</a>) to convey such policy identifiers.

   The context information defined in this document can be applicable in
   the context of mobile networks (particularly in the 3GPP-defined
   (S)Gi interface) [<a href="#ref-CASE-MOBILITY">CASE-MOBILITY</a>].  Typically, because of the
   widespread use of private IPv4 addresses in those networks, if the
   SFs to be invoked are located after a NAT function, the
   identification based on the internal IPv4 address is not possible
   once the NAT has been crossed.  NAT functionality can reside in a
   distinct node.  For a 4G 3GPP network, that node can be the Packet
   Data Network (PDN) Gateway (PGW) as specified in [<a href="#ref-TS23401" title="&quot;General Packet Radio Service (GPRS) enhancements for Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access, Release 16&quot;">TS23401</a>].  For a 5G
   3GPP network, it can be the User Plane Function (UPF) facing the
   external Data Network (DN) [<a href="#ref-TS23501" title="&quot;System architecture for the 5G System (5GS), Release 16&quot;">TS23501</a>].  As such, a mechanism to pass
   the internal information past the NAT boundary may optimize packet
   traversal within an SFC-enabled mobile network domain.  Furthermore,
   some SFs that are not enabled on the PGW/UPF may require a subscriber
   identifier to properly operate (see, for example, those listed in
   [<a href="/doc/html/rfc8371" title="&quot;Mobile Node Identifier Types for MIPv6&quot;">RFC8371</a>]).  It is outside the scope of this document to include a
   comprehensive list of deployments that may make use of the Context
   Headers defined in the document.

   Since subscriber identifiers are distinct from those used to identify
   a performance policy and given that multiple policies may be
   associated with a single subscriber within a Service Function Chain,
   these identifiers are carried in distinct Context Headers rather than
   being multiplexed in one single Context Header.  This approach avoids
   a requirement for additional internal structure in the Context
   Headers to specify whether an identifier refers to a subscriber or to
   a policy.

   This document does not make any assumptions about the structure of
   subscriber or performance policy identifiers; each such identifier is
   treated as an opaque value.  The semantics and validation of these
   identifiers are policies local to each SFC-enabled domain.  This
   document focuses on the data plane behavior.  Control plane
   considerations are out of the scope.

   This document adheres to the SFC data plane architecture defined in
   [<a href="/doc/html/rfc7665" title="&quot;Service Function Chaining (SFC) Architecture&quot;">RFC7665</a>].  This document assumes the reader is familiar with
   [<a href="/doc/html/rfc8300" title="&quot;Network Service Header (NSH)&quot;">RFC8300</a>].

   This document assumes the NSH is used exclusively within a single
   administrative domain.  This document follows the recommendations in
   [<a href="/doc/html/rfc8300" title="&quot;Network Service Header (NSH)&quot;">RFC8300</a>] for handling the Context Headers at both ingress and egress
   SFC boundary nodes (i.e., to strip the entire NSH, including Context
   Headers).  Revealing any subscriber-related information to parties
   outside the SFC-enabled domain is avoided by design.  Accordingly,
   the scope for privacy breaches and user tracking is limited to within
   the SFC-enabled domain where the NSH is used.  It is assumed that
   appropriate mechanisms to monitor and audit an SFC-enabled domain to
   detect misbehavior and to deter misuse are in place.

   MTU considerations are discussed in <a href="#section-5">Section 5</a>.

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  Conventions and Terminology</span>

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;NOT RECOMMENDED&quot;, &quot;MAY&quot;, and
   &quot;OPTIONAL&quot; in this document are to be interpreted as described in
   <a href="/doc/html/bcp14">BCP 14</a> [<a href="/doc/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>] [<a href="/doc/html/rfc8174" title="&quot;Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words&quot;">RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.

   The reader should be familiar with the terms defined in [<a href="/doc/html/rfc7665" title="&quot;Service Function Chaining (SFC) Architecture&quot;">RFC7665</a>].

   &quot;SFC Control Element&quot; refers to a logical entity that instructs one
   or more SFC data plane functional elements on how to process packets
   within an SFC-enabled domain.

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  Subscriber Identifier NSH Variable-Length Context Header</span>

   Subscriber Identifier is defined as an optional Variable-Length NSH
   Context Header.  Its structure is shown in Figure 1.

       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          Metadata Class       |      Type     |U|    Length   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      ~                      Subscriber Identifier                    ~
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

       Figure 1: Subscriber Identifier Variable-Length Context Header

   The fields are described as follows:

   Metadata Class:  MUST be set to 0x0 [<a href="/doc/html/rfc8300" title="&quot;Network Service Header (NSH)&quot;">RFC8300</a>].

   Type:  0x00 (see <a href="#section-6">Section 6</a>).

   U bit:  Unassigned bit (see <a href="/doc/html/rfc8300#section-2.5.1">Section&nbsp;2.5.1 of [RFC8300]</a>).

   Length:  Indicates the length of the Subscriber Identifier, in bytes
      (see <a href="/doc/html/rfc8300#section-2.5.1">Section&nbsp;2.5.1 of [RFC8300]</a>).

   Subscriber Identifier:  Carries an opaque local identifier that is
      assigned to a subscriber by a network operator.

      While this document does not specify an internal structure for
      these identifiers, it also does not provide any cryptographic
      protection for them; any internal structure to the identifier
      values chosen will thus be visible on the wire if no secure
      transport encapsulation is used.  Accordingly, in alignment with
      <a href="/doc/html/rfc8300#section-8.2.2">Section&nbsp;8.2.2 of [RFC8300]</a>, identifier values SHOULD be
      obfuscated.

   The Subscriber Identifier Context Header is used by SFs to enforce
   per-subscriber policies (e.g., resource quota, customized filtering
   profile, accounting).  To that aim, network operators may rely on
   identifiers that are generated from those used in legacy deployments
   (e.g., Section 3.3 of [<a href="#ref-CASE-MOBILITY">CASE-MOBILITY</a>]).  Alternatively, network
   operators may use identifiers that are associated with customized
   policy profiles that are preconfigured on SFs using an out-of-band
   mechanism.  Such a mechanism can be used to rotate the identifiers,
   thus allowing for better unlinkability (<a href="/doc/html/rfc6973#section-3.2">Section&nbsp;3.2 of [RFC6973]</a>).
   Such alternative methods may be suboptimal (e.g., scalability issues
   induced by maintaining and processing finer granular profiles) or
   inadequate for providing some per-subscriber policies.  The
   assessment of whether a method for defining a subscriber identifier
   provides the required functionality and whether it is compatible with
   the capabilities of the SFs at the intended performance level is
   deployment specific.

   The classifier and NSH-aware SFs MAY inject a Subscriber Identifier
   Context Header as a function of a local policy.  This local policy
   should indicate the SFP(s) for which the Subscriber Identifier
   Context Header will be added.  In order to prevent interoperability
   issues, the type and format of the identifiers to be injected in a
   Subscriber Identifier Context Header should be configured to nodes
   authorized to inject and consume such headers.  For example, a node
   can be instructed to insert such data following a type/set scheme
   (e.g., node X should inject subscriber ID type Y).  Other schemes may
   be envisaged.

   Failures to inject such headers should be logged locally, while a
   notification alarm may be sent to a Control Element.  The details of
   sending notification alarms (i.e., the parameters affecting the
   transmission of the notification alarms) might depend on the nature
   of the information in the Context Header.  Parameters for sending
   alarms, such as frequency, thresholds, and content of the alarm,
   should be configurable.

   The default behavior of intermediary NSH-aware nodes is to preserve
   Subscriber Identifier Context Headers (i.e., the information can be
   passed to next-hop NSH-aware nodes), but local policy may require an
   intermediary NSH-aware node to strip a Subscriber Identifier Context
   Header after processing it.

   NSH-aware SFs MUST ignore Context Headers carrying unknown subscriber
   identifiers.

   Local policies at NSH-aware SFs may require running additional
   validation checks on the content of these Context Headers (e.g.,
   accepting only some lengths or types).  These policies may also
   indicate the behavior to be followed by an NSH-aware SF if the
   validation checks fail (e.g., removing the Context Header from the
   packet).  These additional validation checks are deployment specific.
   If validation checks fail on a Subscriber Identifier Context Header,
   an NSH-aware SF MUST ignore that Context Header.  The event should be
   logged locally, while a notification alarm may be sent to a Control
   Element if the NSH-aware SF is instructed to do so.  For example, an
   SF will discard Subscriber Identifier Context Headers conveying
   identifiers in all formats that are different from the one the SF is
   instructed to expect.

   Multiple Subscriber Identifier Context Headers MAY be present in the
   NSH, each carrying a distinct opaque value but all pointing to the
   same subscriber.  This may be required, e.g., by policy enforcement
   mechanisms in a mobile network where some SFs rely on IP addresses as
   subscriber identifiers, while others use non-IP-specific identifiers
   such as those listed in [<a href="/doc/html/rfc8371" title="&quot;Mobile Node Identifier Types for MIPv6&quot;">RFC8371</a>] and Section 3.3.2 of
   [<a href="#ref-CASE-MOBILITY">CASE-MOBILITY</a>].  When multiple Subscriber Identifier Context Headers
   are present and an SF is instructed to strip the Subscriber
   Identifier Context Header, that SF MUST remove all Subscriber
   Identifier Context Headers.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Performance Policy Identifier NSH Variable-Length Context Headers</span>

   Dedicated service-specific performance identifiers are defined to
   differentiate between services that require specific treatment in
   order to exhibit a performance characterized by, e.g., ultra-low
   latency (ULL) or ultra-high reliability (UHR).  Other policies can be
   considered when instantiating a Service Function Chain within an SFC-
   enabled domain.  They are conveyed in the Performance Policy
   Identifier Context Header.

   The Performance Policy Identifier Context Header is inserted in an
   NSH packet so that downstream NSH-aware nodes can make use of the
   performance information for proper selection of suitably distributed
   SFC paths, SF instances, or applicable policy at SFs.  Note that the
   use of the performance policy identifier is not helpful if the path
   computation is centralized and a strict SFP is presented as local
   policy to SF Forwarders (SFFs).

   The Performance Policy Identifier Context Header allows for the
   distributed enforcement of a per-service policy such as requiring an
   SFP to only include specific SF instances (e.g., SFs located within
   the same Data Center (DC) or those that are exposing the shortest
   delay from an SFF).  Details of this process are implementation
   specific.  For illustration purposes, an SFF may retrieve the details
   of usable SFs based upon the corresponding performance policy
   identifier.  Typical criteria for instantiating specific SFs include
   location, performance, or proximity considerations.  For the
   particular case of UHR services, the standby operation of backup
   capacity or the presence of SFs deployed in multiple instances may be
   requested.

   In an environment characterized by frequent changes of link and path
   behavior (for example, due to variable load or availability caused by
   propagation conditions on a wireless link), the SFP may have to be
   adapted dynamically by on-the-move SFC path and SF instance
   selection.

   Performance Policy Identifier is defined as an optional Variable-
   Length Context Header.  Its structure is shown in Figure 2.

   The default behavior of intermediary NSH-aware nodes is to preserve
   such Context Headers (i.e., the information can be passed to next-hop
   NSH-aware nodes), but local policy may require an intermediary NSH-
   aware node to strip one Context Header after processing it.

   Multiple Performance Policy Identifier Context Headers MAY be present
   in the NSH, each carrying an opaque value for a distinct policy that
   needs to be enforced for a flow.  Supplying conflicting policies may
   complicate the SFP computation and SF instance location.
   Corresponding rules to detect conflicting policies may be provided as
   a local policy to the NSH-aware nodes.  When such conflict is
   detected by an NSH-aware node, the default behavior of the node is to
   discard the packet and send a notification alarm to a Control
   Element.

       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          Metadata Class       |      Type     |U|    Length   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      ~                     Performance Policy Identifier             ~
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      Figure 2: Performance Policy Identifier Variable-Length Context
                                   Header

   The fields are described as follows:

   Metadata Class:  MUST be set to 0x0 [<a href="/doc/html/rfc8300" title="&quot;Network Service Header (NSH)&quot;">RFC8300</a>].

   Type:  0x01 (see <a href="#section-6">Section 6</a>).

   U bit:  Unassigned bit (see <a href="/doc/html/rfc8300#section-2.5.1">Section&nbsp;2.5.1 of [RFC8300]</a>).

   Length:  Indicates the length of the Performance Policy Identifier,
      in bytes (see <a href="/doc/html/rfc8300#section-2.5.1">Section&nbsp;2.5.1 of [RFC8300]</a>).

   Performance Policy Identifier:  Represents an opaque value pointing
      to a specific performance policy to be enforced.  The structure
      and semantics of this field are deployment specific.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  MTU Considerations</span>

   As discussed in <a href="/doc/html/rfc7665#section-5.6">Section&nbsp;5.6 of [RFC7665]</a>, the SFC architecture
   prescribes that additional information be added to packets to:

   *  Identify SFPs.  This is typically the NSH Base Header (<a href="/doc/html/rfc8300#section-2.2">Section&nbsp;2.2
      of [RFC8300]</a>) and Service Path Header (<a href="/doc/html/rfc8300#section-2.3">Section&nbsp;2.3 of [RFC8300]</a>).

   *  Carry metadata such those defined in Sections <a href="#section-3">3</a> and <a href="#section-4">4</a>.

   *  Steer the traffic along the SFPs: This is realized by means of
      transport encapsulation.

   This added information increases the size of the packet to be carried
   along an SFP.

   Aligned with <a href="/doc/html/rfc8300#section-5">Section&nbsp;5 of [RFC8300]</a>, it is RECOMMENDED for network
   operators to increase the underlying MTU so that NSH traffic is
   forwarded within an SFC-enabled domain without fragmentation.  The
   available underlying MTU should be taken into account by network
   operators when providing SFs with the required Context Headers to be
   injected per SFP and the size of the data to be carried in these
   Context Headers.

   If the underlying MTU cannot be increased to accommodate the NSH
   overhead, network operators may rely upon a transport encapsulation
   protocol with the required fragmentation handling.  The impact of
   activating such feature on SFFs should be carefully assessed by
   network operators (<a href="/doc/html/rfc7665#section-5.6">Section&nbsp;5.6 of [RFC7665]</a>).

   When dealing with MTU issues, network operators should consider the
   limitations of various transport encapsulations such as those
   discussed in [<a href="#ref-INTAREA-TUNNELS">INTAREA-TUNNELS</a>].

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  IANA Considerations</span>

   IANA has assigned the following types from the &quot;NSH IETF-Assigned
   Optional Variable-Length Metadata Types&quot; subregistry (0x0000 IETF
   Base NSH MD Class) available at: &lt;<a href="https://www.iana.org/assignments/nsh">https://www.iana.org/assignments/</a>
   <a href="https://www.iana.org/assignments/nsh">nsh</a>&gt;.

           +=======+===============================+===========+
           | Value | Description                   | Reference |
           +=======+===============================+===========+
           | 0x00  | Subscriber Identifier         | [<a href="/doc/html/rfc8979">RFC8979</a>] |
           +-------+-------------------------------+-----------+
           | 0x01  | Performance Policy Identifier | [<a href="/doc/html/rfc8979">RFC8979</a>] |
           +-------+-------------------------------+-----------+

               Table 1: NSH IETF-Assigned Optional Variable-
                      Length Metadata Types Additions

<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>.  Security Considerations</span>

   Data plane SFC-related security considerations, including privacy,
   are discussed in <a href="/doc/html/rfc7665#section-6">Section&nbsp;6 of [RFC7665]</a> and <a href="/doc/html/rfc8300#section-8">Section&nbsp;8 of [RFC8300]</a>.
   In particular, <a href="/doc/html/rfc8300#section-8.2.2">Section&nbsp;8.2.2 of [RFC8300]</a> states that attached
   metadata (i.e., Context Headers) should be limited to that necessary
   for correct operation of the SFP.  <a href="/doc/html/rfc8300#section-8.2.2">Section&nbsp;8.2.2 of [RFC8300]</a>
   indicates that metadata considerations that operators can take into
   account when using NSH are discussed in [<a href="/doc/html/rfc8165" title="&quot;Design Considerations for Metadata Insertion&quot;">RFC8165</a>].

   As specified in [<a href="/doc/html/rfc8300" title="&quot;Network Service Header (NSH)&quot;">RFC8300</a>], means to prevent leaking privacy-related
   information outside an SFC-enabled domain are natively supported by
   the NSH given that the last SFF of an SFP will systematically remove
   the NSH (and therefore the identifiers defined in this specification)
   before forwarding a packet exiting the SFP.

   Nodes that are involved in an SFC-enabled domain are assumed to be
   trusted (<a href="/doc/html/rfc8300#section-1.1">Section&nbsp;1.1 of [RFC8300]</a>).  Discussion of means to check
   that only authorized nodes are traversed when a packet is crossing an
   SFC-enabled domain is out of scope of this document.

   Both Subscriber Identifier and Performance Policy Identifier Context
   Headers carry opaque data.  In particular, the Subscriber Identifier
   Context Header is locally assigned by a network provider and can be
   generated from some of the information that is already conveyed in
   the original packets from a host (e.g., internal IP address) or other
   information that is collected from various sources within an SFC-
   enabled domain (e.g., line identifier).  The structure of the
   identifiers conveyed in these Context Headers is communicated only to
   entitled NSH-aware nodes.  Nevertheless, some structures may be
   easily inferred from the headers if trivial structures are used
   (e.g., IP addresses).  As persistent identifiers facilitate tracking
   over time, the use of indirect and non-persistent identification is
   thus RECOMMENDED.

   Moreover, the presence of multiple Subscriber Identifier Context
   Headers in the same NSH allows a misbehaving node from within the
   SFC-enabled domain to bind these identifiers to the same subscriber.
   This can be used to track that subscriber more effectively.  The use
   of non-persistent (e.g., regularly randomized) identifiers as well as
   the removal of the Subscriber Identifier Context Headers from the NSH
   by the last SF making use of such headers soften this issue (see
   &quot;data minimization&quot; discussed in <a href="/doc/html/rfc8165#section-3">Section&nbsp;3 of [RFC8165]</a>).  Such
   behavior is especially strongly recommended in case no encryption is
   enabled.

   A misbehaving node from within the SFC-enabled domain may alter the
   content of Subscriber Identifier and Performance Policy Identifier
   Context Headers, which may lead to service disruption.  Such an
   attack is not unique to the Context Headers defined in this document;
   measures discussed in <a href="/doc/html/rfc8300#section-8">Section&nbsp;8 of [RFC8300]</a> are to be followed.  A
   mechanism for NSH integrity is specified in [<a href="#ref-NSH-INTEGRITY">NSH-INTEGRITY</a>].

   If no secure transport encapsulation is enabled, the use of trivial
   subscriber identifier structures, together with the presence of
   specific SFs in a Service Function Chain, may reveal sensitive
   information to every on-path device.  Also, operational staff in
   teams managing these devices could gain access to such user privacy-
   affecting data.  Such disclosure can be a violation of legal
   requirements because such information should be available to very few
   network operator personnel.  Furthermore, access to subscriber data
   usually requires specific access privilege levels.  To maintain that
   protection, an SF keeping operational logs should not log the content
   of Subscriber and Performance Policy Identifier Context Headers
   unless the SF actually uses the content of these headers for its
   operation.  As discussed in <a href="/doc/html/rfc8300#section-8.2.2">Section&nbsp;8.2.2 of [RFC8300]</a>, subscriber-
   identifying information should be obfuscated, and, if an operator
   deems cryptographic integrity protection is needed, security features
   in the transport encapsulation protocol (such as IPsec) must be used.
   A mechanism for encrypting sensitive NSH data is specified in
   [<a href="#ref-NSH-INTEGRITY">NSH-INTEGRITY</a>].  This mechanism can be considered by network
   operators when enhanced SF-to-SF security protection of NSH metadata
   is required (e.g., to protect against compromised SFFs).

   Some events are logged locally with notification alerts sent by NSH-
   aware nodes to a Control Element.  These events SHOULD be rate
   limited.

<span class="h2"><a class="selflink" id="section-8" href="#section-8">8</a>.  References</span>

<span class="h3"><a class="selflink" id="section-8.1" href="#section-8.1">8.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., &quot;Key words for use in RFCs to Indicate
              Requirement Levels&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc2119">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC7665">RFC7665</a>]  Halpern, J., Ed. and C. Pignataro, Ed., &quot;Service Function
              Chaining (SFC) Architecture&quot;, <a href="/doc/html/rfc7665">RFC 7665</a>,
              DOI 10.17487/RFC7665, October 2015,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7665">https://www.rfc-editor.org/info/rfc7665</a>&gt;.

   [<a id="ref-RFC8174">RFC8174</a>]  Leiba, B., &quot;Ambiguity of Uppercase vs Lowercase in <a href="/doc/html/rfc2119">RFC</a>
              <a href="/doc/html/rfc2119">2119</a> Key Words&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc8174">RFC 8174</a>, DOI 10.17487/RFC8174,
              May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.

   [<a id="ref-RFC8300">RFC8300</a>]  Quinn, P., Ed., Elzur, U., Ed., and C. Pignataro, Ed.,
              &quot;Network Service Header (NSH)&quot;, <a href="/doc/html/rfc8300">RFC 8300</a>,
              DOI 10.17487/RFC8300, January 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8300">https://www.rfc-editor.org/info/rfc8300</a>&gt;.

<span class="h3"><a class="selflink" id="section-8.2" href="#section-8.2">8.2</a>.  Informative References</span>

   [<a id="ref-CASE-MOBILITY">CASE-MOBILITY</a>]
              Haeffner, W., Napper, J., Stiemerling, M., Lopez, D. R.,
              and J. Uttaro, &quot;Service Function Chaining Use Cases in
              Mobile Networks&quot;, Work in Progress, Internet-Draft, <a href="/doc/html/draft-ietf-sfc-use-case-mobility-09">draft-</a>
              <a href="/doc/html/draft-ietf-sfc-use-case-mobility-09">ietf-sfc-use-case-mobility-09</a>, 1 January 2019,
              &lt;<a href="https://tools.ietf.org/html/draft-ietf-sfc-use-case-mobility-09">https://tools.ietf.org/html/draft-ietf-sfc-use-case-</a>
              <a href="https://tools.ietf.org/html/draft-ietf-sfc-use-case-mobility-09">mobility-09</a>&gt;.

   [<a id="ref-INTAREA-TUNNELS">INTAREA-TUNNELS</a>]
              Touch, J. and M. Townsley, &quot;IP Tunnels in the Internet
              Architecture&quot;, Work in Progress, Internet-Draft, <a href="/doc/html/draft-ietf-intarea-tunnels-10">draft-</a>
              <a href="/doc/html/draft-ietf-intarea-tunnels-10">ietf-intarea-tunnels-10</a>, 12 September 2019,
              &lt;<a href="https://tools.ietf.org/html/draft-ietf-intarea-tunnels-10">https://tools.ietf.org/html/draft-ietf-intarea-tunnels-</a>
              <a href="https://tools.ietf.org/html/draft-ietf-intarea-tunnels-10">10</a>&gt;.

   [<a id="ref-NSH-INTEGRITY">NSH-INTEGRITY</a>]
              Boucadair, M., Reddy.K, T., and D. Wing, &quot;Integrity
              Protection for the Network Service Header (NSH) and
              Encryption of Sensitive Context Headers&quot;, Work in
              Progress, Internet-Draft, <a href="/doc/html/draft-ietf-sfc-nsh-integrity-03">draft-ietf-sfc-nsh-integrity-03</a>,
              22 January 2021, &lt;<a href="https://tools.ietf.org/html/draft-ietf-sfc-nsh-integrity-03">https://tools.ietf.org/html/draft-ietf-</a>
              <a href="https://tools.ietf.org/html/draft-ietf-sfc-nsh-integrity-03">sfc-nsh-integrity-03</a>&gt;.

   [<a id="ref-RFC6973">RFC6973</a>]  Cooper, A., Tschofenig, H., Aboba, B., Peterson, J.,
              Morris, J., Hansen, M., and R. Smith, &quot;Privacy
              Considerations for Internet Protocols&quot;, <a href="/doc/html/rfc6973">RFC 6973</a>,
              DOI 10.17487/RFC6973, July 2013,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6973">https://www.rfc-editor.org/info/rfc6973</a>&gt;.

   [<a id="ref-RFC8165">RFC8165</a>]  Hardie, T., &quot;Design Considerations for Metadata
              Insertion&quot;, <a href="/doc/html/rfc8165">RFC 8165</a>, DOI 10.17487/RFC8165, May 2017,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8165">https://www.rfc-editor.org/info/rfc8165</a>&gt;.

   [<a id="ref-RFC8371">RFC8371</a>]  Perkins, C. and V. Devarapalli, &quot;Mobile Node Identifier
              Types for MIPv6&quot;, <a href="/doc/html/rfc8371">RFC 8371</a>, DOI 10.17487/RFC8371, July
              2018, &lt;<a href="https://www.rfc-editor.org/info/rfc8371">https://www.rfc-editor.org/info/rfc8371</a>&gt;.

   [<a id="ref-TS23401">TS23401</a>]  3GPP, &quot;General Packet Radio Service (GPRS) enhancements
              for Evolved Universal Terrestrial Radio Access Network
              (E-UTRAN) access, Release 16&quot;, Version 16.5.0, TS 23.401,
              December 2019.

   [<a id="ref-TS23501">TS23501</a>]  3GPP, &quot;System architecture for the 5G System (5GS),
              Release 16&quot;, Version 16.3.0, TS 23.501, December 2019.

Acknowledgements

   Comments from Joel Halpern on a previous draft version and from
   Carlos Bernardos are appreciated.

   Contributions and review by Christian Jacquenet, Danny Lachos,
   Debashish Purkayastha, Christian Esteve Rothenberg, Kyle Larose,
   Donald Eastlake, Qin Wu, Shunsuke Homma, and Greg Mirsky are
   thankfully acknowledged.

   Many thanks to Robert Sparks for the secdir review.

   Thanks to Barry Leiba, Erik Kline, Ã‰ric Vyncke, Robert Wilton, and
   Magnus Westerlund for the IESG review.

   Special thanks to Benjamin Kaduk for the careful review and
   suggestions that enhanced this specification.

Authors&#x27; Addresses

   Behcet Sarikaya

   Email: sarikaya@ieee.org


   Dirk von Hugo
   Deutsche Telekom
   Deutsche-Telekom-Allee 9
   D-64295 Darmstadt
   Germany

   Email: Dirk.von-Hugo@telekom.de


   Mohamed Boucadair
   Orange
   3500 Rennes
   France

   Email: mohamed.boucadair@orange.com
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

