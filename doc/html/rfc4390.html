<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc4390
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.34.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.34.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-ietf-ipoib-dhcp-over-infiniband/">
  <meta name="description" content="Dynamic Host Configuration Protocol (DHCP) over InfiniBand (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.34.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.34.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgblue"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc4390.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc4390.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc4390.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc4390/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc4390/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/ipoib/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-ietf-ipoib-dhcp-over-infiniband@ietf.org?subject=draft-ietf-ipoib-dhcp-over-infiniband" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-ietf-ipoib-dhcp-over-infiniband-10.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-ietf-ipoib-dhcp-over-infiniband-10.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-ietf-ipoib-dhcp-over-infiniband-10.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-ietf-ipoib-dhcp-over-infiniband-10">draft-ietf-ipoib-dhcp-over-infiniband-10</a>         Proposed Standard</pre>
      </div>
    

    <div class="draftcontent">
    <pre>Network Working Group                                      Vivek Kashyap
Request for Comments: 4390                                           IBM
Category: Standards Track                                     April 2006


       <span class="h1">Dynamic Host Configuration Protocol (DHCP) over InfiniBand</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the &quot;Internet
   Official Protocol Standards&quot; (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2006).

Abstract

   IP over Infiniband (IPoIB) link-layer address is 20 octets long.
   This is larger than the 16 octets reserved for the hardware address
   in a Dynamic Host Configuration Protocol/Bootstrap Protocol
   (DHCP/BOOTP) message.  The above inequality imposes restrictions on
   the use of the DHCP message fields when used over an IPoIB network.
   This document describes the use of DHCP message fields when
   implementing DHCP over IPoIB.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. The DHCP over IPoIB Mechanism ...................................<a href="#page-2">2</a>
      <a href="#section-2.1">2.1</a>. IPoIB-specific Usage of DHCP Message Fields ................<a href="#page-3">3</a>
      <a href="#section-2.2">2.2</a>. Use of the BROADCAST flag ..................................<a href="#page-3">3</a>
   <a href="#section-3">3</a>. Security Considerations .........................................<a href="#page-3">3</a>
   <a href="#section-4">4</a>. Acknowledgement .................................................<a href="#page-4">4</a>
   <a href="#section-5">5</a>. References ......................................................<a href="#page-4">4</a>
      <a href="#section-5.1">5.1</a>. Normative References .......................................<a href="#page-4">4</a>
      <a href="#section-5.2">5.2</a>. Informative References .....................................<a href="#page-4">4</a>











<span class="grey">Kashyap                     Standards Track                     [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc4390">RFC 4390</a>                  DHCP Over Infiniband                April 2006</span>


<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Introduction</span>

   The Dynamic Host Configuration Protocol (DHCP) provides a framework
   for passing configuration information to hosts on an IP network
   [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>].  DHCP is based on the Bootstrap Protocol (BOOTP) [<a href="/doc/html/rfc951" title="&quot;TELNET Authentication Using KEA and SKIPJACK&quot;">RFC951</a>]
   adding the capability of automatic allocation of reusable network
   addresses and additional configuration options [RFC2131,<a href="/doc/html/rfc2132">RFC2132</a>].

   The DHCP server receives a broadcast request from a client.  The DHCP
   server uses the client interface&#x27;s hardware address to unicast a
   reply when the client does not yet have an IP address assigned to it.
   The &quot;chaddr&quot; field in the DHCP message carries the client&#x27;s hardware
   address.

   The &quot;chaddr&quot; field is 16 octets in length.  The IPoIB link-layer
   address is 20 octets in length [<a href="/doc/html/rfc4391" title="&quot;Transmission of IP over InfiniBand (IPoIB)&quot;">RFC4391</a>].  Therefore, the IPoIB
   link-layer address will not fit in the &quot;chaddr&quot; field making it
   impossible for the DHCP server to unicast a reply to the client.

   To ensure interoperability, the usage of the fields and the method
   for DHCP interaction must be clarified.  This document describes the
   IPoIB-specific usage of some fields of DHCP.  See [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>] for the
   mechanism of DHCP and the explanations of each field.

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this
   document are to be interpreted as described in [<a href="/doc/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>].

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  The DHCP over IPoIB Mechanism</span>

   As described above, the link-layer address is unavailable to the DHCP
   server because the link-layer address is larger than the &quot;chaddr&quot;
   field length.  As a result, the server cannot unicast its reply to
   the client.  Therefore, a DHCP client MUST request that the server
   send a broadcast reply by setting the BROADCAST flag when IPoIB
   Address Resolution Protocol (ARP) is not possible, i.e., in
   situations where the client does not know its IP address.

   [<a id="ref-RFC1542">RFC1542</a>] discourages the use of a broadcast reply.  But in the case
   of IPoIB, this is a necessity because the server does not receive the
   link-layer address.  To desynchronise broadcasts at subnet startup,
   [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>] suggests that a client wait a random time (1 to 10 seconds)
   before initiating server discovery.  The same timeout will spread out
   the DHCP server broadcast responses generated due to the use of the
   BROADCAST bit.






<span class="grey">Kashyap                     Standards Track                     [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc4390">RFC 4390</a>                  DHCP Over Infiniband                April 2006</span>


   The client hardware address, &quot;chaddr&quot;, is unique in the subnet and
   hence can be used to identify a client interface.  But in the absence
   of a unique &quot;chaddr&quot;, another unique client identifier must be used.

   The DHCP protocol states that the &quot;client identifier&quot; option may be
   used as the unique identifying value for the client [<a href="/doc/html/rfc2132" title="&quot;DHCP Options and BOOTP Vendor Extensions&quot;">RFC2132</a>].  This
   value must be unique within the client&#x27;s subnet.

   The &quot;client identifier&quot; option includes a type and identifier pair.
   The identifier included in the &quot;client identifier&quot; option may consist
   of a hardware address or any other unique value such as the DNS name
   of the client.  When a hardware address is used, the type field
   should be one of the ARP hardware types listed in [<a href="#ref-ARPPARAM">ARPPARAM</a>].

<span class="h3"><a class="selflink" id="section-2.1" href="#section-2.1">2.1</a>.  IPoIB-specific Usage of DHCP Message Fields</span>

   A DHCP client, when working over an IPoIB interface, MUST follow the
   following rules:

    &quot;htype&quot; (hardware address type) MUST be 32 [<a href="#ref-ARPPARAM">ARPPARAM</a>].

    &quot;hlen&quot; (hardware address length) MUST be 0.

    &quot;chaddr&quot; (client hardware address) field MUST be zeroed.

    &quot;client-identifier&quot; option MUST be used in DHCP messages.

   The &quot;client identifier&quot; used in DHCP messages MUST conform to
   [<a href="/doc/html/rfc4361" title="&quot;Node-specific Client Identifiers for Dynamic Host Configuration Protocol Version Four (DHCPv4)&quot;">RFC4361</a>].

<span class="h3"><a class="selflink" id="section-2.2" href="#section-2.2">2.2</a>.  Use of the BROADCAST flag</span>

   A DHCP client on IPoIB MUST set the BROADCAST flag in DHCPDISCOVER
   and DHCPREQUEST messages (and set &quot;ciaddr&quot; to zero) to ensure that
   the server (or the relay agent) broadcasts its reply to the client.

   Note: As described in [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>], &quot;ciaddr&quot; MUST be filled in with the
         client&#x27;s IP address during BOUND, RENEWING or REBINDING states;
         therefore, the BROADCAST flag MUST NOT be set.  In these cases,
         the DHCP server unicasts DHCPACK message to the address in
         &quot;ciaddr&quot;.  The link address will be resolved by ARP.

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  Security Considerations</span>

   [<a id="ref-RFC2131">RFC2131</a>] describes the security considerations relevant to DHCP.
   This document does not introduce any new issues.





<span class="grey">Kashyap                     Standards Track                     [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc4390">RFC 4390</a>                  DHCP Over Infiniband                April 2006</span>


<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Acknowledgement</span>

   This document borrows extensively from [<a href="/doc/html/rfc2855" title="&quot;DHCP for IEEE 1394&quot;">RFC2855</a>].  Roy Larsen pointed
   out the length discrepancy between the IPoIB link address and DHCP&#x27;s
   &quot;chaddr&quot; field.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  References</span>

<span class="h3"><a class="selflink" id="section-5.1" href="#section-5.1">5.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]       Bradner, S., &quot;Key words for use in RFCs to Indicate
                   Requirement Levels&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc2119">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2131">RFC2131</a>]       Droms, R., &quot;Dynamic Host Configuration Protocol&quot;, <a href="/doc/html/rfc2131">RFC</a>
                   <a href="/doc/html/rfc2131">2131</a>, March 1997.

   [<a id="ref-RFC2132">RFC2132</a>]       Alexander, S. and R. Droms, &quot;DHCP Options and BOOTP
                   Vendor Extensions&quot;, <a href="/doc/html/rfc2132">RFC 2132</a>, March 1997.

   [<a id="ref-RFC951">RFC951</a>]        Housley, R., Horting, T., and P. Yee, &quot;TELNET
                   Authentication Using KEA and SKIPJACK&quot;, <a href="/doc/html/rfc2951">RFC 2951</a>,
                   September 2000.

   [<a id="ref-RFC4391">RFC4391</a>]       Chu, J. and V. Kashyap &quot;Transmission of IP over
                   InfiniBand (IPoIB)&quot;, <a href="/doc/html/rfc4391">RFC 4391</a>, April 2006.

   [<a id="ref-ARPPARAM">ARPPARAM</a>]      <a href="http://www.iana.org/numbers.html">http://www.iana.org/numbers.html</a>

   [<a id="ref-RFC4361">RFC4361</a>]       Lemon, T. and B. Sommerfeld, &quot;Node-specific Client
                   Identifiers for Dynamic Host Configuration Protocol
                   Version Four (DHCPv4)&quot;, <a href="/doc/html/rfc4361">RFC 4361</a>, February 2006.

<span class="h3"><a class="selflink" id="section-5.2" href="#section-5.2">5.2</a>.  Informative References</span>

   [<a id="ref-RFC2855">RFC2855</a>]       Fujisawa, K., &quot;DHCP for IEEE 1394&quot;, <a href="/doc/html/rfc2855">RFC 2855</a>, June
                   2000.

   [<a id="ref-RFC1542">RFC1542</a>]       Wimer, W., &quot;Clarifications and Extensions for the
                   Bootstrap Protocol&quot;, <a href="/doc/html/rfc1542">RFC 1542</a>, October 1993.












<span class="grey">Kashyap                     Standards Track                     [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc4390">RFC 4390</a>                  DHCP Over Infiniband                April 2006</span>


Author&#x27;s Address

   Vivek Kashyap
   15350, SW Koll Parkway
   Beaverton, OR 97006
   USA

   Phone: +1 503 578 3422
   EMail: vivk@us.ibm.com










































<span class="grey">Kashyap                     Standards Track                     [Page 5]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-6" ></span>
<span class="grey"><a href="/doc/html/rfc4390">RFC 4390</a>                  DHCP Over Infiniband                April 2006</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2006).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="/doc/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   &quot;AS IS&quot; basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="/doc/html/bcp78">BCP 78</a> and <a href="/doc/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).







Kashyap                     Standards Track                     [Page 6]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

