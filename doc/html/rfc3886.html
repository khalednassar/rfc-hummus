<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc3886
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.33.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.33.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-ietf-msgtrk-trkstat/">
  <meta name="description" content="An Extensible Message Format for Message Tracking Responses (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.33.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.33.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgblue"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc3886.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc3886.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc3886.txt.pdf" title="PDF version of this document">pdf</a>|<a href="https://www.rfc-editor.org/rfc/inline-errata/rfc3886.html">with errata</a>|<a href="/doc/rfc3886/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc3886/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/msgtrk/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-ietf-msgtrk-trkstat@ietf.org?subject=draft-ietf-msgtrk-trkstat" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-ietf-msgtrk-trkstat-05.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-ietf-msgtrk-trkstat-05.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-ietf-msgtrk-trkstat-05.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-ietf-msgtrk-trkstat-05">draft-ietf-msgtrk-trkstat-05</a>                     Proposed Standard
                                                            <a class="text-warning" href="https://www.rfc-editor.org/errata_search.php?rfc=3886&amp;rec_status=0">Errata exist</a></pre>
      </div>
    

    <div class="draftcontent">
    <pre>Network Working Group                                          E. Allman
Request for Comments: 3886                                Sendmail, Inc.
Updates: <a href="/doc/html/rfc3463">3463</a>                                             September 2004
Category: Standards Track


      <span class="h1">An Extensible Message Format for Message Tracking Responses</span>

Status of this Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the &quot;Internet
   Official Protocol Standards&quot; (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2004).

Abstract

   Message Tracking is expected to be used to determine the status of
   undelivered e-mail upon request.  Tracking is used in conjunction
   with Delivery Status Notifications (DSN) and Message Disposition
   Notifications (MDN); generally, a message tracking request will be
   issued only when a DSN or MDN has not been received within a
   reasonable timeout period.

   This memo defines a MIME content-type for message tracking status in
   the same spirit as <a href="/doc/html/rfc3464">RFC 3464</a>, &quot;An Extensible Message Format for
   Delivery Status Notifications&quot;.  It is to be issued upon a request as
   described in &quot;Message Tracking Query Protocol&quot;.  This memo defines
   only the format of the status information.  An extension to SMTP to
   label messages for further tracking and request tracking status is
   defined in a separate memo.















<span class="grey">Allman                      Standards Track                     [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc3886">RFC 3886</a>                Message/Tracking-Status           September 2004</span>


<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Introduction</span>

   Message Tracking is expected to be used to determine the status of
   undelivered e-mail upon request.  Tracking is used in conjunction
   with Delivery Status Notifications (DSN) [<a href="#ref-RFC-DSN-SMTP" title="&quot;Simple Mail Transfer Protocol (SMTP) Service Extension for Delivery Status Notifications (DSNs)&quot;">RFC-DSN-SMTP</a>] and Message
   Disposition Notifications (MDN) [<a href="#ref-RFC-MDN" title="&quot;Message Disposition Notifications&quot;">RFC-MDN</a>]; generally, a message
   tracking request will be issued only when a DSN or MDN has not been
   received within a reasonable timeout period.

   This memo defines a MIME [<a href="#ref-RFC-MIME" title="&quot;Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies&quot;">RFC-MIME</a>] content-type for message tracking
   status in the same spirit as <a href="/doc/html/rfc3464">RFC 3464</a>, &quot;An Extensible Message Format
   for Delivery Status Notifications&quot; [<a href="#ref-RFC-DSN-STAT" title="&quot;An Extensible Message Format for Delivery Status Notifications&quot;">RFC-DSN-STAT</a>].  It is to be
   issued upon a request as described in &quot;Message Tracking Query
   Protocol&quot; [<a href="#ref-RFC-MTRK-MTQP" title="&quot;Message Tracking Query Protocol&quot;">RFC-MTRK-MTQP</a>].  This memo defines only the format of the
   status information.  An extension to SMTP [<a href="#ref-RFC-ESMTP" title="&quot;SMTP Service Extensions&quot;">RFC-ESMTP</a>] to label
   messages for further tracking and request tracking status is defined
   in a separate memo [<a href="#ref-RFC-MTRK-SMTPEXT" title="&quot;SMTP Service Extension for Message Tracking&quot;">RFC-MTRK-SMTPEXT</a>].

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  Other Documents and Conformance</span>

   The model used for Message Tracking is described in [<a href="#ref-RFC-MTRK-MODEL" title="&quot;Message Tracking Model and Requirements&quot;">RFC-MTRK-MODEL</a>].

   Message tracking is intended for use as a &quot;last resort&quot; mechanism.
   Normally, Delivery Status Notifications (DSNs) [<a href="#ref-RFC-DSN-SMTP" title="&quot;Simple Mail Transfer Protocol (SMTP) Service Extension for Delivery Status Notifications (DSNs)&quot;">RFC-DSN-SMTP</a>] and
   Message Disposition Notifications (MDNs) [<a href="#ref-RFC-MDN" title="&quot;Message Disposition Notifications&quot;">RFC-MDN</a>] would provide the
   primary delivery status.  Only if no response is received from either
   of these mechanisms would Message Tracking be used.

   This document is based on [<a href="#ref-RFC-DSN-STAT" title="&quot;An Extensible Message Format for Delivery Status Notifications&quot;">RFC-DSN-STAT</a>].  Sections <a href="#section-1.3">1.3</a>
   (Terminology), 2.1.1 (General conventions for DSN fields), 2.1.2
   (&quot;*-type&quot; subfields), and 2.1.3 (Lexical tokens imported from <a href="/doc/html/rfc822">RFC</a>
   <a href="/doc/html/rfc822">822</a>) of [<a href="#ref-RFC-DSN-STAT" title="&quot;An Extensible Message Format for Delivery Status Notifications&quot;">RFC-DSN-STAT</a>] are included into this document by reference.
   Other sections are further incorporated as described herein.

   Syntax notation in this document conforms to [<a href="#ref-RFC-ABNF" title="&quot;Augmented BNF for Syntax Specifications: ABNF&quot;">RFC-ABNF</a>].

   The following lexical tokens, defined in [<a href="#ref-RFC-MSGFMT" title="&quot;Internet Message Format&quot;">RFC-MSGFMT</a>], are used in
   the ABNF grammar for MTSNs: atom, CHAR, comment, CR, CRLF, DIGIT, LF,
   linear-white-space, SPACE, text.  The date-time lexical token is
   defined in [<a href="#ref-RFC-HOSTREQ" title="&quot;Requirements for Internet Hosts -- Application and Support&quot;">RFC-HOSTREQ</a>].

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this
   document are to be interpreted as described in <a href="/doc/html/rfc2119">RFC 2119</a> [RFC-
   KEYWORDS].






<span class="grey">Allman                      Standards Track                     [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc3886">RFC 3886</a>                Message/Tracking-Status           September 2004</span>


<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  Format of a Message Tracking Status Notification</span>

   A Message Tracking Status Notification (MTSN) is intended to be
   returned as the body of a Message Tracking request [<a href="#ref-RFC-MTRK-MTQP" title="&quot;Message Tracking Query Protocol&quot;">RFC-MTRK-MTQP</a>].
   The actual body MUST be a multipart/related [<a href="#ref-RFC-RELATED" title="&quot;The MIME Multipart/Related Content-type&quot;">RFC-RELATED</a>] with type
   parameter of &quot;message/tracking-status&quot;; each subpart MUST be of type
   &quot;message/tracking-status&quot; as described herein.  The multipart/related
   body can include multiple message/tracking-status parts if an MTQP
   server chains requests to the next server; see [<a href="#ref-RFC-MTRK-MODEL" title="&quot;Message Tracking Model and Requirements&quot;">RFC-MTRK-MODEL</a>] and
   [<a href="#ref-RFC-MTRK-MTQP" title="&quot;Message Tracking Query Protocol&quot;">RFC-MTRK-MTQP</a>] for more information about chaining.

<span class="h3"><a class="selflink" id="section-3.1" href="#section-3.1">3.1</a>.  The message/tracking-status content-type</span>

   The message/tracking-status content-type is defined as follows:

   MIME type name:           message
   MIME subtype name:        tracking-status
   Optional parameters:      none
   Encoding considerations:  &quot;7bit&quot; encoding is sufficient and
                             MUST be used to maintain readability
                             when viewed by non-MIME mail readers.
   Security considerations:  discussed in <a href="#section-4">section 4</a> of this memo.

   The body of a message/tracking-status is modeled after [RFC-DSN-
   STAT].  That body consists of one or more &quot;fields&quot; formatted to
   according to the ABNF of <a href="/doc/html/rfc2822">RFC 2822</a> header &quot;fields&quot; (see [<a href="#ref-RFC-MSGFMT" title="&quot;Internet Message Format&quot;">RFC-MSGFMT</a>]).
   The per-message fields appear first, followed by a blank line.
   Following the per-message fields are one or more groups of per-
   recipient fields.  Each group of per-recipient fields is preceded by
   a blank line.  Note that there will be a blank line between the final
   per-recipient field and the MIME boundary, since one CRLF is
   necessary to terminate the field, and a second is necessary to
   introduce the MIME boundary.  Formally, the syntax of the
   message/tracking-status content is as follows:

   tracking-status-content =
             per-message-fields 1*( CRLF per-recipient-fields )

   The per-message fields are described in <a href="#section-3.2">section 3.2</a>.  The per-
   recipient fields are described in <a href="#section-3.3">section 3.3</a>.

<span class="h4"><a class="selflink" id="section-3.1.1" href="#section-3.1.1">3.1.1</a>.  General conventions for MTSN fields</span>

   <a href="#section-2.1.1">Section 2.1.1</a> (General conventions for DSN fields) of [<a href="#ref-RFC-DSN-STAT" title="&quot;An Extensible Message Format for Delivery Status Notifications&quot;">RFC-DSN-STAT</a>]
   is included herein by reference.  Notably, the definition of xtext is
   identical to that of that document.





<span class="grey">Allman                      Standards Track                     [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc3886">RFC 3886</a>                Message/Tracking-Status           September 2004</span>


<span class="h4"><a class="selflink" id="section-3.1.2" href="#section-3.1.2">3.1.2</a>.  *-type subfields</span>

   <a href="#section-2.1.2">Section 2.1.2</a> (*-type subfields) of [<a href="#ref-RFC-DSN-STAT" title="&quot;An Extensible Message Format for Delivery Status Notifications&quot;">RFC-DSN-STAT</a>] is included herein
   by reference.  Notably, the definitions of address-type, diagnostic-
   type, and MTA-name type are identical to that of <a href="/doc/html/rfc3464">RFC 3464</a>.

<span class="h3"><a class="selflink" id="section-3.2" href="#section-3.2">3.2</a>.  Per-Message MTSN Fields</span>

   Some fields of an MTSN apply to all of the addresses in a single
   envelope.  These fields may appear at most once in any MTSN.  These
   fields are used to correlate the MTSN with the original message
   transaction and to provide additional information which may be useful
   to gateways.

      per-message-fields =
                original-envelope-id-field CRLF
                reporting-mta-field CRLF
                arrival-date-field CRLF
                *( extension-field CRLF )

<span class="h4"><a class="selflink" id="section-3.2.1" href="#section-3.2.1">3.2.1</a>.  The Original-Envelope-Id field</span>

   The Original-Envelope-Id field is defined as in section 2.2.1 of
   [<a href="#ref-RFC-DSN-STAT" title="&quot;An Extensible Message Format for Delivery Status Notifications&quot;">RFC-DSN-STAT</a>].  This field is REQUIRED.

<span class="h4"><a class="selflink" id="section-3.2.2" href="#section-3.2.2">3.2.2</a>.  The Reporting-MTA field</span>

   The Reporting-MTA field is defined as in <a href="#section-2.2.2">section 2.2.2</a> of [RFC-DSN-
   STAT].  This field is REQUIRED.

<span class="h4"><a class="selflink" id="section-3.2.3" href="#section-3.2.3">3.2.3</a>.  The Arrival-Date field</span>

   The Arrival-Date field is defined as in <a href="#section-2.2.5">section 2.2.5</a> of [RFC-DSN-
   STAT].  This field is REQUIRED.

<span class="h3"><a class="selflink" id="section-3.3" href="#section-3.3">3.3</a>.  Per-Recipient MTSN fields</span>

   An MTSN contains information about attempts to deliver a message to
   one or more recipients.  The delivery information for any particular
   recipient is contained in a group of contiguous per-recipient fields.
   Each group of per-recipient fields is preceded by a blank line.










<span class="grey">Allman                      Standards Track                     [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc3886">RFC 3886</a>                Message/Tracking-Status           September 2004</span>


   The syntax for the group of per-recipient fields is as follows:

      per-recipient-fields =
                original-recipient-field CRLF
                final-recipient-field CRLF
                action-field CRLF
                status-field CRLF
                [ remote-mta-field CRLF ]
                [ last-attempt-date-field CRLF ]
                [ will-retry-until-field CRLF ]
                *( extension-field CRLF )

<span class="h4"><a class="selflink" id="section-3.3.1" href="#section-3.3.1">3.3.1</a>.  Original-Recipient field</span>

   The Original-Recipient field is defined as in <a href="#section-2.3.1">section 2.3.1</a> of [RFC-
   DSN-STAT].  This field is REQUIRED.

<span class="h4"><a class="selflink" id="section-3.3.2" href="#section-3.3.2">3.3.2</a>.  Final-Recipient field</span>

   The required Final-Recipient field is defined as in section 2.3.2 of
   [<a href="#ref-RFC-DSN-STAT" title="&quot;An Extensible Message Format for Delivery Status Notifications&quot;">RFC-DSN-STAT</a>].  This field is REQUIRED.

<span class="h4"><a class="selflink" id="section-3.3.3" href="#section-3.3.3">3.3.3</a>.  Action field</span>

   The required Action field indicates the action performed by the
   Reporting-MTA as a result of its attempt to deliver the message to
   this recipient address.  This field MUST be present for each
   recipient named in the MTSN.  The syntax is as defined in <a href="/doc/html/rfc3464">RFC 3464</a>.
   This field is REQUIRED.

   Valid actions are:

   failed       The message could not be delivered.  If DSNs have been
                enabled, a &quot;failed&quot; DSN should already have been
                returned.

   delayed      The message is currently waiting in the MTA queue for
                future delivery.  Essentially, this action means &quot;the
                message is located, and it is here.&quot;

   delivered    The message has been successfully delivered to the final
                recipient.  This includes &quot;delivery&quot; to a mailing list
                exploder.  It does not indicate that the message has
                been read.  No further information is available; in
                particular, the tracking agent SHOULD NOT attempt
                further &quot;downstream&quot; tracking requests.





<span class="grey">Allman                      Standards Track                     [Page 5]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-6" ></span>
<span class="grey"><a href="/doc/html/rfc3886">RFC 3886</a>                Message/Tracking-Status           September 2004</span>


   expanded     The message has been successfully delivered to the
                recipient address as specified by the sender, and
                forwarded by the Reporting-MTA beyond that destination
                to multiple additional recipient addresses.  However,
                these additional addresses are not trackable, and the
                tracking agent SHOULD NOT attempt further &quot;downstream&quot;
                tracking requests.

   relayed      The message has been delivered into an environment that
                does not support message tracking.  No further
                information is available; in particular, the tracking
                agent SHOULD NOT attempt further &quot;downstream&quot; tracking
                requests.

   transferred  The message has been transferred to another MTRK-
                compliant MTA.  The tracking agent SHOULD attempt
                further &quot;downstream&quot; tracking requests unless that
                information is already given in a chaining response.

   opaque       The message may or may not have been seen by this
                system.  No further information is available or
                forthcoming.

   There may be some confusion between when to use &quot;expanded&quot; versus
   &quot;delivered&quot;.  Whenever possible, &quot;expanded&quot; should be used when the
   MTA knows that the message will be sent to multiple addresses.
   However, in some cases the delivery occurs to a program which,
   unknown to the MTA, causes mailing list expansion; in the extreme
   case, the delivery may be to a real mailbox that has the side effect
   of list expansion.  If the MTA cannot ensure that this delivery will
   cause list expansion, it should set the action to &quot;delivered&quot;.

<span class="h4"><a class="selflink" id="section-3.3.4" href="#section-3.3.4">3.3.4</a>.  Status field</span>

   The Status field is defined as in <a href="/doc/html/rfc3464">RFC 3464</a>.  A new code is added to
   <a href="/doc/html/rfc3463">RFC 3463</a> [<a href="#ref-RFC-EMSSC" title="&quot;Enhanced Mail System Status Codes&quot;">RFC-EMSSC</a>], &quot;Enhanced Mail System Status Codes&quot;,

      X.1.9   Message relayed to non-compliant mailer&quot;

         The mailbox address specified was valid, but the message has
         been relayed to a system that does not speak this protocol; no
         further information can be provided.

   A 2.1.9 Status field MUST be used exclusively with a &quot;relayed&quot; Action
   field.  This field is REQUIRED.






<span class="grey">Allman                      Standards Track                     [Page 6]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-7" ></span>
<span class="grey"><a href="/doc/html/rfc3886">RFC 3886</a>                Message/Tracking-Status           September 2004</span>


<span class="h4"><a class="selflink" id="section-3.3.5" href="#section-3.3.5">3.3.5</a>.  Remote-MTA field</span>

   The Remote-MTA field is defined as in section Reference 2.3.5 of
   [<a href="#ref-RFC-DSN-STAT" title="&quot;An Extensible Message Format for Delivery Status Notifications&quot;">RFC-DSN-STAT</a>].  This field MUST NOT be included if no delivery
   attempts have been made or if the Action field has value &quot;opaque&quot;.
   If delivery to some agent other than an MTA (for example, a Local
   Delivery Agent) then this field MAY be included, giving the name of
   the host on which that agent was contacted.

<span class="h4"><a class="selflink" id="section-3.3.6" href="#section-3.3.6">3.3.6</a>.  Last-Attempt-Date field</span>

   The Last-Attempt-Date field is defined as in section Reference 2.3.7
   of [<a href="#ref-RFC-DSN-STAT" title="&quot;An Extensible Message Format for Delivery Status Notifications&quot;">RFC-DSN-STAT</a>].  This field is REQUIRED if any delivery attempt
   has been made and the Action field does not have value &quot;opaque&quot;, in
   which case it will specify when it last attempted to deliver this
   message to another MTA or other Delivery Agent.  This field MUST NOT
   be included if no delivery attempts have been made.

<span class="h4"><a class="selflink" id="section-3.3.7" href="#section-3.3.7">3.3.7</a>.  Will-Retry-Until field</span>

   The Will-Retry-Until field is defined as in section Reference 2.3.9
   of [<a href="#ref-RFC-DSN-STAT" title="&quot;An Extensible Message Format for Delivery Status Notifications&quot;">RFC-DSN-STAT</a>].  If the message is not in the local queue or the
   Action field has the value &quot;opaque&quot; the Will-Retry-Until field MUST
   NOT be included; otherwise, this field SHOULD be included.

<span class="h3"><a class="selflink" id="section-3.4" href="#section-3.4">3.4</a>.  Extension fields</span>

   Future extension fields may be defined as defined in section 2.4 of
   [<a href="#ref-RFC-DSN-STAT" title="&quot;An Extensible Message Format for Delivery Status Notifications&quot;">RFC-DSN-STAT</a>].

<span class="h3"><a class="selflink" id="section-3.5" href="#section-3.5">3.5</a>.  Interaction Between MTAs and LDAs</span>

   A message that has been delivered to a Local Delivery Agent (LDA)
   that understands message tracking (in particular, an LDA speaking
   LMTP [<a href="#ref-RFC-LMTP" title="&quot;Local Mail Transfer Protocol&quot;">RFC-LMTP</a>] that supports the MTRK extension) SHOULD pass the
   tracking request to the LDA.  In this case, the Action field for the
   MTA-&gt;LDA exchange will look the same as a transfer to a compliant
   MTA; that is, a &quot;transferred&quot; tracking status will be issued.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Security Considerations</span>

<span class="h3"><a class="selflink" id="section-4.1" href="#section-4.1">4.1</a>.  Forgery</span>

   Malicious servers may attempt to subvert message tracking and return
   false information.  This could result in misdirection or
   misinterpretation of results.





<span class="grey">Allman                      Standards Track                     [Page 7]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-8" ></span>
<span class="grey"><a href="/doc/html/rfc3886">RFC 3886</a>                Message/Tracking-Status           September 2004</span>


<span class="h3"><a class="selflink" id="section-4.2" href="#section-4.2">4.2</a>.  Confidentiality</span>

   Another dimension of security is confidentiality.  There may be cases
   in which a message recipient is autoforwarding messages but does not
   wish to divulge the address to which the messages are autoforwarded.
   The desire for such confidentiality will probably be heightened as
   &quot;wireless mailboxes&quot;, such as pagers, become more widely used as
   autoforward addresses.

   MTA authors are encouraged to provide a mechanism which enables the
   end user to preserve the confidentiality of a forwarding address.
   Depending on the degree of confidentiality required, and the nature
   of the environment to which a message were being forwarded, this
   might be accomplished by one or more of:

   (a)  respond with a &quot;relayed&quot; tracking status when a message is
        forwarded to a confidential forwarding address, and disabling
        further message tracking requests.

   (b)  declaring the message to be delivered, issuing a &quot;delivered&quot;
        tracking status, re-sending the message to the confidential
        forwarding address, and disabling further message tracking
        requests.

   The tracking algorithms MUST NOT allow tracking through list
   expansions.  When a message is delivered to a list, a tracking
   request MUST respond with an &quot;expanded&quot; tracking status and MUST NOT
   display the contents of the list.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  IANA Considerations</span>

   IANA has registered the SMTP extension defined in <a href="#section-3">section 3</a>.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  Acknowledgements</span>

   Several individuals have commented on and enhanced this document,
   including Tony Hansen, Philip Hazel, Alexey Melnikov, Lyndon
   Nerenberg, Chris Newman, Gregory Neil Shapiro, and Dan Wing.

<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>.  References</span>

<span class="h3"><a class="selflink" id="section-7.1" href="#section-7.1">7.1</a>.  Normative References</span>

   [<a id="ref-RFC-MTRK-MODEL">RFC-MTRK-MODEL</a>]     Hansen, T., &quot;Message Tracking Model and
                        Requirements&quot;, <a href="/doc/html/rfc3888">RFC 3888</a>, September 2004.






<span class="grey">Allman                      Standards Track                     [Page 8]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-9" ></span>
<span class="grey"><a href="/doc/html/rfc3886">RFC 3886</a>                Message/Tracking-Status           September 2004</span>


   [<a id="ref-RFC-MTRK-MTQP">RFC-MTRK-MTQP</a>]      Hansen, T., &quot;Message Tracking Query Protocol&quot;,
                        <a href="/doc/html/rfc3887">RFC 3887</a>, September 2004.

   [<a id="ref-RFC-MTRK-SMTPEXT">RFC-MTRK-SMTPEXT</a>]   Allman, E., &quot;SMTP Service Extension for Message
                        Tracking&quot;, <a href="/doc/html/rfc3885">RFC 3885</a>, September 2004.

   [<a id="ref-RFC-ABNF">RFC-ABNF</a>]           Crocker, D., Ed. and P. Overell, &quot;Augmented BNF
                        for Syntax Specifications: ABNF&quot;, <a href="/doc/html/rfc2234">RFC 2234</a>,
                        November 1997.

   [<a id="ref-RFC-EMSSC">RFC-EMSSC</a>]          Vaudreuil, G., &quot;Enhanced Mail System Status
                        Codes&quot;, <a href="/doc/html/rfc3463">RFC 3463</a>, January 2003.

   [<a id="ref-RFC-HOSTREQ">RFC-HOSTREQ</a>]        Braden, R., Ed., &quot;Requirements for Internet
                        Hosts -- Application and Support&quot;, STD 3, <a href="/doc/html/rfc1123">RFC</a>
                        <a href="/doc/html/rfc1123">1123</a>, October 1989.

   [<a id="ref-RFC-KEYWORDS">RFC-KEYWORDS</a>]       Bradner, S., &quot;Key words for use in RFCs to
                        Indicate Requirement Levels&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc2119">RFC 2119</a>,
                        March 1997.

   [<a id="ref-RFC-MIME">RFC-MIME</a>]           Freed, N. and N. Borenstein, &quot;Multipurpose
                        Internet Mail Extensions (MIME) Part One: Format
                        of Internet Message Bodies&quot;, <a href="/doc/html/rfc2045">RFC 2045</a>, November
                        1996.

   [<a id="ref-RFC-MSGFMT">RFC-MSGFMT</a>]         Resnick, P., Ed., &quot;Internet Message Format&quot;, <a href="/doc/html/rfc2822">RFC</a>
                        <a href="/doc/html/rfc2822">2822</a>, April 2001.

   [<a id="ref-RFC-RELATED">RFC-RELATED</a>]        Levinson, E., &quot;The MIME Multipart/Related
                        Content-type&quot;, <a href="/doc/html/rfc2387">RFC 2387</a>, August 1998.

<span class="h3"><a class="selflink" id="section-7.2" href="#section-7.2">7.2</a>.  Informational References</span>

   [<a id="ref-RFC-DSN-SMTP">RFC-DSN-SMTP</a>]       Moore, K., &quot;Simple Mail Transfer Protocol (SMTP)
                        Service Extension for Delivery Status
                        Notifications (DSNs)&quot;, <a href="/doc/html/rfc3461">RFC 3461</a>, January 2003.

   [<a id="ref-RFC-DSN-STAT">RFC-DSN-STAT</a>]       Moore, K. and G. Vaudreuil, &quot;An Extensible
                        Message Format for Delivery Status
                        Notifications&quot;, <a href="/doc/html/rfc3464">RFC 3464</a>, January 2003.

   [<a id="ref-RFC-ESMTP">RFC-ESMTP</a>]          Rose, M., Stefferud, E., Crocker, D., Klensin,
                        J., and N. Freed, &quot;SMTP Service Extensions&quot;, STD
                        10, <a href="/doc/html/rfc1869">RFC 1869</a>, November 1995.






<span class="grey">Allman                      Standards Track                     [Page 9]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-10" ></span>
<span class="grey"><a href="/doc/html/rfc3886">RFC 3886</a>                Message/Tracking-Status           September 2004</span>


   [<a id="ref-RFC-LMTP">RFC-LMTP</a>]           Myers, J., &quot;Local Mail Transfer Protocol&quot;, <a href="/doc/html/rfc2033">RFC</a>
                        <a href="/doc/html/rfc2033">2033</a>, October 1996.

   [<a id="ref-RFC-MDN">RFC-MDN</a>]            Hansen, T. and G. Vaudreuil, Eds., &quot;Message
                        Disposition Notifications&quot;, <a href="/doc/html/rfc3798">RFC 3798</a>, May 2004.

<span class="h2"><a class="selflink" id="section-8" href="#section-8">8</a>.  Author&#x27;s Address</span>

   Eric Allman
   Sendmail, Inc.
   6425 Christie Ave, 4th Floor
   Emeryville, CA  94608
   U.S.A.

   Phone: +1 510 594 5501
   Fax:   +1 510 594 5429
   EMail: eric@Sendmail.COM


































<span class="grey">Allman                      Standards Track                    [Page 10]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-11" ></span>
<span class="grey"><a href="/doc/html/rfc3886">RFC 3886</a>                Message/Tracking-Status           September 2004</span>


<span class="h2"><a class="selflink" id="section-9" href="#section-9">9</a>. Full Copyright Statement</span>

   Copyright (C) The Internet Society (2004).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="/doc/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   &quot;AS IS&quot; basis and THE CONTRIBUTOR, THE ORGANIZATION HE/S HE
   REPRESENTS OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE
   INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR
   IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the IETF&#x27;s procedures with respect to rights in IETF Documents can
   be found in <a href="/doc/html/bcp78">BCP 78</a> and <a href="/doc/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Allman                      Standards Track                    [Page 11]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

