<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc5859
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.33.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.33.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-raj-dhc-tftp-addr-option/">
  <meta name="description" content="TFTP Server Address Option for DHCPv4 (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.33.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.33.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgorange"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc5859.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc5859.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc5859.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc5859/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc5859/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/int/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-raj-dhc-tftp-addr-option@ietf.org?subject=draft-raj-dhc-tftp-addr-option" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-raj-dhc-tftp-addr-option-07.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-raj-dhc-tftp-addr-option-07.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-raj-dhc-tftp-addr-option-07.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-raj-dhc-tftp-addr-option-07">draft-raj-dhc-tftp-addr-option-07</a>                    Informational</pre>
      </div>
    

    <div class="draftcontent">
    <pre>Internet Engineering Task Force (IETF)                        R. Johnson
Request for Comments: 5859                           Cisco Systems, Inc.
Category: Informational                                        June 2010
ISSN: 2070-1721


                 <span class="h1">TFTP Server Address Option for DHCPv4</span>

Abstract

   This memo documents existing usage for the &quot;TFTP Server Address&quot;
   option.  The option number currently in use is 150.  This memo
   documents the current usage of the option in agreement with <a href="/doc/html/rfc3942">RFC 3942</a>,
   which declares that any pre-existing usages of option numbers in the
   range 128-223 should be documented, and the Dynamic Host
   Configuration working group will try to officially assign those
   numbers to those options.  The option is defined for DHCPv4 and works
   only with IPv4 addresses.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="/doc/html/rfc5741#section-2">Section&nbsp;2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc5859">http://www.rfc-editor.org/info/rfc5859</a>.

















<span class="grey">Johnson                       Informational                     [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc5859">RFC 5859</a>                   TFTP Server Address                 June 2010</span>


Copyright Notice

   Copyright (c) 2010 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="/doc/html/bcp78">BCP 78</a> and the IETF Trust&#x27;s Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-3">3</a>
   <a href="#section-2">2</a>.  Conventions . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-3">3</a>
   <a href="#section-3">3</a>.  TFTP Server Address Option Definition . . . . . . . . . . . . . <a href="#page-4">4</a>
   <a href="#section-4">4</a>.  Security Considerations . . . . . . . . . . . . . . . . . . . . <a href="#page-5">5</a>
   <a href="#section-5">5</a>.  IANA Considerations . . . . . . . . . . . . . . . . . . . . . . <a href="#page-5">5</a>
   <a href="#section-6">6</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-5">5</a>
     <a href="#section-6.1">6.1</a>.  Normative References  . . . . . . . . . . . . . . . . . . . <a href="#page-5">5</a>
     <a href="#section-6.2">6.2</a>.  Informative References  . . . . . . . . . . . . . . . . . . <a href="#page-6">6</a>














<span class="grey">Johnson                       Informational                     [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc5859">RFC 5859</a>                   TFTP Server Address                 June 2010</span>


<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Introduction</span>

   Voice over IP (VoIP) devices, such as IP phones, have a need to
   download their configuration from a configuration server on the
   network.  There are two commonly accepted methods to discover this
   server via DHCP; the &quot;sname&quot; field in the DHCP header [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>] and
   the &quot;TFTP Server Name&quot; option (66) [<a href="/doc/html/rfc2132" title="&quot;DHCP Options and BOOTP Vendor Extensions&quot;">RFC2132</a>].  Both of these sources
   of information, however, contain the TFTP server&#x27;s hostname.  That
   hostname must then be translated to an IP address.  The usual method
   to accomplish this would be DNS [<a href="/doc/html/rfc1034" title="&quot;Domain names - concepts and facilities&quot;">RFC1034</a>].  This means the firmware
   in a VoIP device (with possibly limited flash, memory, and/or
   processing resources) would need to implement the DNS protocol in
   order to perform this translation.  This would also introduce an
   additional unnecessary point of failure whereby the device is
   dependent on the DNS server infrastructure in order to boot up and
   communicate with its call agent.

   In order to eliminate DNS as a point of failure and to keep the
   firmware in such a VoIP device to a minimum, the &quot;VoIP Configuration
   Server Address&quot; option (150) was introduced.  This option allows the
   DHCP server to pass one or more IP addresses of the VoIP
   configuration server(s) instead of the hostname, thus making the
   information directly usable by the VoIP device.

   Other reasons for this option are (1) the &quot;siaddr&quot; field is not
   configurable on some DHCP servers; (2) the &quot;siaddr&quot; field only allows
   for one IPv4 address, and it is desirable to have the ability to
   configure multiple IP addresses for redundancy; (3) some DHCP servers
   have been found to fill in their own IPv4 address as siaddr; (4) some
   customers were already using the &quot;siaddr&quot; field for other purposes;
   and finally (5) the configuration server may use a protocol other
   than TFTP to serve configuration files, making the use of the &quot;TFTP
   Server Name&quot; option (66) inappropriate.

   In cases where other download server address information also appears
   in the response packet, such as &quot;sname&quot; and &quot;TFTP Server Name&quot;, it is
   left to the device to decide which piece of information to use.

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  Conventions</span>

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this
   document are to be interpreted as described in <a href="/doc/html/rfc2119">RFC 2119</a> [<a href="/doc/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>].








<span class="grey">Johnson                       Informational                     [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc5859">RFC 5859</a>                   TFTP Server Address                 June 2010</span>


<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  TFTP Server Address Option Definition</span>

   The TFTP Server Address option is a DHCP option [<a href="/doc/html/rfc2132" title="&quot;DHCP Options and BOOTP Vendor Extensions&quot;">RFC2132</a>].  The
   option contains one or more IPv4 addresses that the client MAY use.
   The current use of this option is for downloading configuration from
   a VoIP server via TFTP; however, the option may be used for purposes
   other than contacting a VoIP configuration server.

   The format of the option is:

              Code   Len   IPv4 Configuration Server Address(es)
             +-----+-----+-----+-----+-----+-----+
             | 150 |  n  |     IPv4 address      | ...
             +-----+-----+-----+-----+-----+-----+

                                 Figure 1

   The option minimum length (n) is 4.

   The &quot;Len&quot; field must specify a length that is an integral multiple of
   4 octets (4, 8, 12, etc.).  If an option is received where this is
   not the case, the option information MUST be ignored, but further
   option processing may continue.  Dividing this &quot;Len&quot; value by 4 will
   give the number of IPv4 VoIP configuration server addresses that are
   specified in the option.

   The option MUST NOT be specified by the DHCP client, as it is
   intended only to be returned from the DHCP server.  If the DHCP
   client wants to receive this information from the server, it needs to
   include the number 150 in the &quot;DHCP Parameter List&quot; option (55).

   Server addresses SHOULD be listed in order of preference, and the
   client SHOULD use the addresses sequentially but may be configured to
   use addresses randomly.  The client may use as many or as few of the
   addresses provided as it likes.  For example, if the client is only
   capable of accepting two configuration server addresses, it may
   ignore any other addresses provided after the second address.

   Each TFTP server address that is being used by the client should be
   tried a total of four times with a 4-second wait time before
   proceeding to the next address.

   When this option appears along with the TFTP Server Name option (66)
   [<a href="/doc/html/rfc2132" title="&quot;DHCP Options and BOOTP Vendor Extensions&quot;">RFC2132</a>], this option SHOULD have priority over option 66.

   There is currently no defined IPv6 DHCP equivalent for this option.





<span class="grey">Johnson                       Informational                     [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc5859">RFC 5859</a>                   TFTP Server Address                 June 2010</span>


<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Security Considerations</span>

   A rogue DHCP server could use this option in order to coerce a client
   into downloading configuration data from an alternate configuration
   server, and thus gain control of the device&#x27;s configuration.  This,
   however, is no more of a security threat than similar attacks using
   other DHCP options that specify server names or addresses, of which
   there are many.  If this is a concern, then DHCP authentication may
   be used, but even secure delivery of an address over DHCP does not
   protect the subsequent insecure download over TFTP.  TFTP itself
   provides no authentication or access control mechanisms, so even if
   DHCP messages were authenticated, downloading the configuration would
   still be insecure, unless some object-level security mechanisms were
   used.

   Where security concerns are an issue, it is suggested that
   configuration files should be signed by a trusted agent.
   Configuration files may also be encrypted based on a configuration
   parameter on the DHCP client device.  In other words, there are
   various methods to ensure the integrity of configuration data
   independent from ensuring the integrity of this DHCP option or even
   DHCP itself.  The full extent of such options is far too broad to be
   addressed in this document.

   Message authentication in DHCP for intradomain use where the out-of-
   band exchange of a shared secret is feasible is defined in [<a href="/doc/html/rfc3118" title="&quot;Authentication for DHCP Messages&quot;">RFC3118</a>].
   Potential exposures to attack are discussed in <a href="#section-7">Section 7</a> of the DHCP
   protocol specification [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>].

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  IANA Considerations</span>

   IANA has assigned DHCP option number 150, in accordance with
   [<a href="/doc/html/rfc3942" title="&quot;Reclassifying Dynamic Host Configuration Protocol version 4 (DHCPv4) Options&quot;">RFC3942</a>].

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  References</span>

<span class="h3"><a class="selflink" id="section-6.1" href="#section-6.1">6.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., &quot;Key words for use in RFCs to Indicate
              Requirement Levels&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc2119">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2131">RFC2131</a>]  Droms, R., &quot;Dynamic Host Configuration Protocol&quot;,
              <a href="/doc/html/rfc2131">RFC 2131</a>, March 1997.

   [<a id="ref-RFC2132">RFC2132</a>]  Alexander, S. and R. Droms, &quot;DHCP Options and BOOTP Vendor
              Extensions&quot;, <a href="/doc/html/rfc2132">RFC 2132</a>, March 1997.





<span class="grey">Johnson                       Informational                     [Page 5]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-6" ></span>
<span class="grey"><a href="/doc/html/rfc5859">RFC 5859</a>                   TFTP Server Address                 June 2010</span>


   [<a id="ref-RFC3942">RFC3942</a>]  Volz, B., &quot;Reclassifying Dynamic Host Configuration
              Protocol version 4 (DHCPv4) Options&quot;, <a href="/doc/html/rfc3942">RFC 3942</a>,
              November 2004.

<span class="h3"><a class="selflink" id="section-6.2" href="#section-6.2">6.2</a>.  Informative References</span>

   [<a id="ref-RFC1034">RFC1034</a>]  Mockapetris, P., &quot;Domain names - concepts and facilities&quot;,
              STD 13, <a href="/doc/html/rfc1034">RFC 1034</a>, November 1987.

   [<a id="ref-RFC3118">RFC3118</a>]  Droms, R. and W. Arbaugh, &quot;Authentication for DHCP
              Messages&quot;, <a href="/doc/html/rfc3118">RFC 3118</a>, June 2001.

Author&#x27;s Address

   Richard A. Johnson
   Cisco Systems, Inc.
   170 W. Tasman Dr.
   San Jose, CA  95134
   USA

   Phone: +1 408 526 4000
   EMail: raj@cisco.com





























Johnson                       Informational                     [Page 6]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

