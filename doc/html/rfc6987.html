<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc6987
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.34.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.34.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-ietf-ospf-rfc3137bis/">
  <meta name="description" content="OSPF Stub Router Advertisement (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.34.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.34.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgorange"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc6987.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc6987.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc6987.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc6987/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc6987/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/ospf/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-ietf-ospf-rfc3137bis@ietf.org?subject=draft-ietf-ospf-rfc3137bis" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-ietf-ospf-rfc3137bis-04.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-ietf-ospf-rfc3137bis-04.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-ietf-ospf-rfc3137bis-04.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-ietf-ospf-rfc3137bis-04">draft-ietf-ospf-rfc3137bis-04</a>                        Informational
Updated by: <a href="/doc/html/rfc8770">8770</a>                                                        </pre>
      </div>
    

    <div class="draftcontent">
    <pre>Internet Engineering Task Force (IETF)                         A. Retana
Request for Comments: 6987                                     L. Nguyen
Obsoletes: <a href="/doc/html/rfc3137">3137</a>                                      Cisco Systems, Inc.
Category: Informational                                         A. Zinin
ISSN: 2070-1721                                          Cinarra Systems
                                                                R. White

                                                            D. McPherson
                                                          Verisign, Inc.
                                                          September 2013


                     <span class="h1">OSPF Stub Router Advertisement</span>

Abstract

   This document describes a backward-compatible technique that may be
   used by OSPF (Open Shortest Path First) implementations to advertise
   a router&#x27;s unavailability to forward transit traffic or to lower the
   preference level for the paths through such a router.

   This document obsoletes <a href="/doc/html/rfc3137">RFC 3137</a>.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="/doc/html/rfc5741#section-2">Section&nbsp;2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6987">http://www.rfc-editor.org/info/rfc6987</a>.













<span class="grey">Retana, et al.                Informational                     [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc6987">RFC 6987</a>             OSPF Stub Router Advertisement       September 2013</span>


Copyright Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="/doc/html/bcp78">BCP 78</a> and the IETF Trust&#x27;s Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Solutions . . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-2.1">2.1</a>.  OSPFv3-Only Solution  . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
   <a href="#section-3">3</a>.  Maximum Link Metric . . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-4">4</a>.  Deployment Considerations . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-5">5</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-6">6</a>.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
   <a href="#section-7">7</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-7.1">7.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-7.2">7.2</a>.  Informative References  . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
   <a href="#appendix-A">Appendix A</a>.  Changes from <a href="/doc/html/rfc3137">RFC 3137</a>  . . . . . . . . . . . . . . .   <a href="#page-6">6</a>

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Introduction</span>

   In some situations, it may be advantageous to inform routers in a
   network not to use a specific router as a transit point but to still
   route to it.  Possible situations include the following:

   o  The router is in a critical condition (for example, has a very
      high CPU load or does not have enough memory to store all Link
      State Advertisements (LSAs) or build the routing table).

   o  Graceful introduction and removal of the router to/from the
      network.

   o  Other (administrative or traffic engineering) reasons.








<span class="grey">Retana, et al.                Informational                     [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc6987">RFC 6987</a>             OSPF Stub Router Advertisement       September 2013</span>


   Note that the solution introduced in this document does not remove
   the router from the topology view of the network (as could be done by
   just flushing that router&#x27;s router-LSA) but discourages other routers
   from using it for transit routing, while still routing packets to the
   router&#x27;s own IP addresses, i.e., the router is announced as a stub.

   It must be emphasized that the solution provides real benefits in
   networks designed with at least some level of redundancy, so that
   traffic can be routed around the stub router.  Otherwise, traffic
   destined for the networks and reachable through such a stub router
   may still be routed through it.

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  Solutions</span>

   The solution introduced in this document solves two challenges
   associated with the outlined problem.  In the description below,
   router X is the router announcing itself as a stub.  The challenges
   are

   1) Making other routers prefer routes around router X while
      performing the Dijkstra calculation.

   2) Allowing other routers to reach IP prefixes directly connected to
      router X.

   Note that it would be easy to address issue 1) alone by just flushing
   router X&#x27;s router-LSA from the domain.  However, it does not solve
   problem 2), since other routers will not be able to use links to
   router X in Dijkstra (no back link), and because router X will not
   have links to its neighbors.

   To address both problems, router X announces its router-LSA to the
   neighbors with the cost of all non-stub links (links of the types
   other than 3) being set to MaxLinkMetric (defined in <a href="#section-3">Section 3</a>).

   The solution above applies to both OSPFv2 [<a href="/doc/html/rfc2328" title="&quot;OSPF Version 2&quot;">RFC2328</a>] and OSPFv3
   [<a href="/doc/html/rfc5340" title="&quot;OSPF for IPv6&quot;">RFC5340</a>].

<span class="h3"><a class="selflink" id="section-2.1" href="#section-2.1">2.1</a>.  OSPFv3-Only Solution</span>

   OSPFv3 [<a href="/doc/html/rfc5340" title="&quot;OSPF for IPv6&quot;">RFC5340</a>] introduces additional options to provide similar
   control of the forwarding topology; the R-bit provides an indication
   of whether a router is active and should be used for transit traffic.

   It is left to network operators to decide which technique to use in
   their network.  See <a href="#section-4">Section 4</a> for more details.





<span class="grey">Retana, et al.                Informational                     [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc6987">RFC 6987</a>             OSPF Stub Router Advertisement       September 2013</span>


<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  Maximum Link Metric</span>

   <a href="#section-2">Section 2</a> refers to the cost of all non-stub links as MaxLinkMetric,
   which is a new fixed architectural value introduced in this document.

   MaxLinkMetric
      The metric value indicating that a router-LSA link (see <a href="#section-2">Section 2</a>)
      should not be used for transit traffic.  It is defined to be the
      16-bit binary value of all ones: 0xffff.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Deployment Considerations</span>

   When using MaxLinkMetric, some inconsistency may be seen if the
   network is constructed of routers that perform an intra-area Dijkstra
   calculation as specified in [<a href="/doc/html/rfc1247" title="&quot;OSPF Version 2&quot;">RFC1247</a>] (discarding link records in
   router-LSAs that have a MaxLinkMetric cost value) and routers that
   perform it as specified in [<a href="/doc/html/rfc1583" title="&quot;OSPF Version 2&quot;">RFC1583</a>] and higher (do not treat links
   with MaxLinkMetric cost as unreachable).  Note that this
   inconsistency will not lead to routing loops, because if there are
   some alternate paths in the network, both types of routers will agree
   on using them rather than the path through the stub router.  If the
   path through the stub router is the only one, the routers of the
   first type will not use the stub router for transit (which is the
   desired behavior), while the routers of the second type will still
   use this path.

   On the other hand, clearing the R-bit will consistently result in the
   router not being used for transit.

   The use of MaxLinkMetric or the R-bit in a network depends on the
   objectives of the operator.  One of the possible considerations for
   selecting one or the other is in the desired behavior if the path
   through the stub router is the only one available.  Using
   MaxLinkMetric allows for that path to be used while the R-bit
   doesn&#x27;t.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  Security Considerations</span>

   The technique described in this document does not introduce any new
   security issues into the OSPF protocol.











<span class="grey">Retana, et al.                Informational                     [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc6987">RFC 6987</a>             OSPF Stub Router Advertisement       September 2013</span>


<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  Acknowledgements</span>

   The authors of this document do not make any claims on the
   originality of the ideas described.  Among other people, we would
   like to acknowledge Henk Smit for being part of one of the initial
   discussions around this topic.

   We would like to thank Shishio Tsuchiya, Gunter Van de Velde,
   Tomohiro Yamagata, Faraz Shamim, and Acee Lindem who provided
   significant input for the latest draft version of this document.
   Dave Cridland and Tom Yu also provided valuable comments.

<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>.  References</span>

<span class="h3"><a class="selflink" id="section-7.1" href="#section-7.1">7.1</a>.  Normative References</span>

   [<a id="ref-RFC2328">RFC2328</a>]  Moy, J., &quot;OSPF Version 2&quot;, STD 54, <a href="/doc/html/rfc2328">RFC 2328</a>, April 1998.

   [<a id="ref-RFC5340">RFC5340</a>]  Coltun, R., Ferguson, D., Moy, J., and A. Lindem, &quot;OSPF
              for IPv6&quot;, <a href="/doc/html/rfc5340">RFC 5340</a>, July 2008.

<span class="h3"><a class="selflink" id="section-7.2" href="#section-7.2">7.2</a>.  Informative References</span>

   [<a id="ref-RFC1247">RFC1247</a>]  Moy, J., &quot;OSPF Version 2&quot;, <a href="/doc/html/rfc1247">RFC 1247</a>, July 1991.

   [<a id="ref-RFC1583">RFC1583</a>]  Moy, J., &quot;OSPF Version 2&quot;, <a href="/doc/html/rfc1583">RFC 1583</a>, March 1994.

   [<a id="ref-RFC3137">RFC3137</a>]  Retana, A., Nguyen, L., White, R., Zinin, A., and D.
              McPherson, &quot;OSPF Stub Router Advertisement&quot;, <a href="/doc/html/rfc3137">RFC 3137</a>,
              June 2001.





















<span class="grey">Retana, et al.                Informational                     [Page 5]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-6" ></span>
<span class="grey"><a href="/doc/html/rfc6987">RFC 6987</a>             OSPF Stub Router Advertisement       September 2013</span>


<span class="h2"><a class="selflink" id="appendix-A" href="#appendix-A">Appendix A</a>.  Changes from <a href="/doc/html/rfc3137">RFC 3137</a></span>

   This document obsoletes [<a href="/doc/html/rfc3137" title="&quot;OSPF Stub Router Advertisement&quot;">RFC3137</a>].

   In addition to editorial updates, this document defines a new
   architectural constant (MaxLinkMetric in <a href="#section-3">Section 3</a>) to eliminate any
   confusion about the interpretation of LSInfinity.  It also
   incorporates and explains the use of the R-bit [<a href="/doc/html/rfc5340" title="&quot;OSPF for IPv6&quot;">RFC5340</a>] as a
   solution to the problem addressed in the text.










































<span class="grey">Retana, et al.                Informational                     [Page 6]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-7" ></span>
<span class="grey"><a href="/doc/html/rfc6987">RFC 6987</a>             OSPF Stub Router Advertisement       September 2013</span>


Authors&#x27; Addresses

   Alvaro Retana
   Cisco Systems, Inc.
   7025 Kit Creek Rd.
   Research Triangle Park, NC  27709
   USA

   EMail: aretana@cisco.com


   Liem Nguyen
   Cisco Systems, Inc.
   3750 Cisco Way
   San Jose, CA  95134
   USA

   EMail: lhnguyen@cisco.com

   Alex Zinin
   Cinarra Systems
   Menlo Park, CA
   USA

   EMail: alex.zinin@gmail.com


   Russ White
   1500 N. Greenville Avenue
   Suite 1100
   Richardson, TX  75081
   USA

   EMail: Russ.White@vce.com


   Danny McPherson
   Verisign, Inc.
   12061 Bluemont Way
   Reston, VA  20190
   USA

   EMail: dmcpherson@verisign.com








Retana, et al.                Informational                     [Page 7]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

