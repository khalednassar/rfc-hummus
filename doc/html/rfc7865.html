<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc7865
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.33.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.33.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-ietf-siprec-metadata/">
  <meta name="description" content="Session Initiation Protocol (SIP) Recording Metadata (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.33.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.33.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgblue"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc7865.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc7865.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc7865.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc7865/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc7865/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/siprec/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-ietf-siprec-metadata@ietf.org?subject=draft-ietf-siprec-metadata" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-ietf-siprec-metadata-22.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-ietf-siprec-metadata-22.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-ietf-siprec-metadata-22.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-ietf-siprec-metadata-22">draft-ietf-siprec-metadata-22</a>                    Proposed Standard</pre>
      </div>
    

    <div class="draftcontent">
    <pre>Internet Engineering Task Force (IETF)                   R. Ravindranath
Request for Comments: 7865                                 Cisco Systems
Category: Standards Track                                   P. Ravindran
ISSN: 2070-1721                                           Nokia Networks
                                                              P. Kyzivat
                                                                  Huawei
                                                                May 2016


          <span class="h1">Session Initiation Protocol (SIP) Recording Metadata</span>

Abstract

   Session recording is a critical requirement in many communications
   environments, such as call centers and financial trading
   organizations.  In some of these environments, all calls must be
   recorded for regulatory, compliance, and consumer protection reasons.
   The recording of a session is typically performed by sending a copy
   of a media stream to a recording device.  This document describes the
   metadata model as viewed by the Session Recording Server (SRS) and
   the recording metadata format.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="/doc/html/rfc7841#section-2">Section&nbsp;2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7865">http://www.rfc-editor.org/info/rfc7865</a>.
















<span class="grey">Ravindranath, et al.         Standards Track                    [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


Copyright Notice

   Copyright (c) 2016 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="/doc/html/bcp78">BCP 78</a> and the IETF Trust&#x27;s Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Terminology .....................................................<a href="#page-3">3</a>
   <a href="#section-3">3</a>. Definitions .....................................................<a href="#page-4">4</a>
   <a href="#section-4">4</a>. Metadata Model ..................................................<a href="#page-5">5</a>
   <a href="#section-5">5</a>. Recording Metadata Format from SRC to SRS .......................<a href="#page-6">6</a>
      <a href="#section-5.1">5.1</a>. XML Data Format ............................................<a href="#page-7">7</a>
           <a href="#section-5.1.1">5.1.1</a>. Namespace ...........................................<a href="#page-7">7</a>
           <a href="#section-5.1.2">5.1.2</a>. &#x27;recording&#x27; Element .................................<a href="#page-7">7</a>
   <a href="#section-6">6</a>. Recording Metadata Classes ......................................<a href="#page-7">7</a>
      <a href="#section-6.1">6.1</a>. Recording Session ..........................................<a href="#page-8">8</a>
           <a href="#section-6.1.1">6.1.1</a>. Attributes ..........................................<a href="#page-8">8</a>
           <a href="#section-6.1.2">6.1.2</a>. Linkages ............................................<a href="#page-9">9</a>
      <a href="#section-6.2">6.2</a>. Communication Session Group ................................<a href="#page-9">9</a>
           <a href="#section-6.2.1">6.2.1</a>. Attributes .........................................<a href="#page-10">10</a>
           <a href="#section-6.2.2">6.2.2</a>. Linkages ...........................................<a href="#page-10">10</a>
      <a href="#section-6.3">6.3</a>. Communication Session .....................................<a href="#page-11">11</a>
           <a href="#section-6.3.1">6.3.1</a>. Attributes .........................................<a href="#page-11">11</a>
           <a href="#section-6.3.2">6.3.2</a>. Linkages ...........................................<a href="#page-12">12</a>
      <a href="#section-6.4">6.4</a>. CS-RS Association .........................................<a href="#page-13">13</a>
           <a href="#section-6.4.1">6.4.1</a>. Attributes .........................................<a href="#page-14">14</a>
           <a href="#section-6.4.2">6.4.2</a>. Linkages ...........................................<a href="#page-14">14</a>
      <a href="#section-6.5">6.5</a>. Participant ...............................................<a href="#page-14">14</a>
           <a href="#section-6.5.1">6.5.1</a>. Attributes .........................................<a href="#page-15">15</a>
           <a href="#section-6.5.2">6.5.2</a>. Linkages ...........................................<a href="#page-15">15</a>
      <a href="#section-6.6">6.6</a>. Participant-CS Association ................................<a href="#page-16">16</a>
           <a href="#section-6.6.1">6.6.1</a>. Attributes .........................................<a href="#page-17">17</a>
           <a href="#section-6.6.2">6.6.2</a>. Linkages ...........................................<a href="#page-17">17</a>
      <a href="#section-6.7">6.7</a>. Media Stream ..............................................<a href="#page-18">18</a>
           <a href="#section-6.7.1">6.7.1</a>. Attributes .........................................<a href="#page-18">18</a>
           <a href="#section-6.7.2">6.7.2</a>. Linkages ...........................................<a href="#page-19">19</a>




<span class="grey">Ravindranath, et al.         Standards Track                    [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


      <a href="#section-6.8">6.8</a>. Participant-Stream Association ............................<a href="#page-19">19</a>
           <a href="#section-6.8.1">6.8.1</a>. Attributes .........................................<a href="#page-20">20</a>
           <a href="#section-6.8.2">6.8.2</a>. Linkages ...........................................<a href="#page-20">20</a>
      <a href="#section-6.9">6.9</a>. Syntax of XML Elements for Date and Time ..................<a href="#page-21">21</a>
      <a href="#section-6.10">6.10</a>. Format of Unique ID ......................................<a href="#page-21">21</a>
      <a href="#section-6.11">6.11</a>. Metadata Version Indicator ...............................<a href="#page-21">21</a>
   <a href="#section-7">7</a>. Recording Metadata Snapshot Request Format .....................<a href="#page-22">22</a>
   <a href="#section-8">8</a>. SIP Recording Metadata Examples ................................<a href="#page-23">23</a>
      <a href="#section-8.1">8.1</a>. Complete SIP Recording Metadata Example ...................<a href="#page-23">23</a>
      <a href="#section-8.2">8.2</a>. Partial Update of Recording Metadata XML Body .............<a href="#page-25">25</a>
   <a href="#section-9">9</a>. XML Schema Definition for Recording Metadata ...................<a href="#page-26">26</a>
   <a href="#section-10">10</a>. Security Considerations .......................................<a href="#page-30">30</a>
   <a href="#section-11">11</a>. IANA Considerations ...........................................<a href="#page-31">31</a>
      <a href="#section-11.1">11.1</a>. SIP Recording Metadata Schema Registration ...............<a href="#page-31">31</a>
   <a href="#section-12">12</a>. References ....................................................<a href="#page-31">31</a>
      <a href="#section-12.1">12.1</a>. Normative References .....................................<a href="#page-31">31</a>
      <a href="#section-12.2">12.2</a>. Informative References ...................................<a href="#page-32">32</a>
   Acknowledgements ..................................................<a href="#page-34">34</a>
   Authors&#x27; Addresses ................................................<a href="#page-34">34</a>

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Introduction</span>

   Session recording is a critical requirement in many communications
   environments, such as call centers and financial trading
   organizations.  In some of these environments, all calls must be
   recorded for regulatory, compliance, and consumer protection reasons.
   The recording of a session is typically performed by sending a copy
   of a media stream to a recording device.  This document focuses on
   the recording metadata, which describes the Communication Session
   (CS).  The document describes a metadata model as viewed by the
   Session Recording Server (SRS) and the recording metadata format, the
   requirements for which are described in [<a href="/doc/html/rfc6341" title="&quot;Use Cases and Requirements for SIP-Based Media Recording (SIPREC)&quot;">RFC6341</a>] and the
   architecture for which is described in [<a href="/doc/html/rfc7245" title="&quot;An Architecture for Media Recording Using the Session Initiation Protocol&quot;">RFC7245</a>].

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  Terminology</span>

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this
   document are to be interpreted as described in [<a href="/doc/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>].  This
   document only uses these key words when referencing normative
   statements in existing RFCs.










<span class="grey">Ravindranath, et al.         Standards Track                    [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  Definitions</span>

   Metadata model:  A metadata model is an abstract representation of
      metadata using a Unified Modeling Language (UML) [<a href="#ref-UML" title="&quot;OMG Unified Modeling Language (UML)&quot;">UML</a>] class
      diagram.

   Metadata classes:  Each block in the model represents a class.  A
      class is a construct that is used as a blueprint to create
      instances (called &quot;objects&quot;) of itself.  The description of each
      class also has a representation of its attributes in a second
      compartment below the class name.

   Attributes:  Attributes represent the elements listed in each of the
      classes.  The attributes of a class are listed in the second
      compartment below the class name.  Each instance of a class
      conveys values for the attributes of that class.  These values get
      added to the recording&#x27;s metadata.

   Linkages:  Linkages represent the relationship between the classes in
      the model.  Each linkage represents a logical connection between
      classes (or objects) in class diagrams (or object diagrams).  The
      linkages used in the metadata model of this document are
      associations.

   This document also refers to the terminology defined in [<a href="/doc/html/rfc6341" title="&quot;Use Cases and Requirements for SIP-Based Media Recording (SIPREC)&quot;">RFC6341</a>].


























<span class="grey">Ravindranath, et al.         Standards Track                    [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Metadata Model</span>

   Metadata is the information that describes recorded media and the CS
   to which they relate.  The diagram below shows a model for metadata
   as viewed by an SRS.

             +-------------------------------+ 1..*
             |    Recording Session (RS)     |----+
             +-------------------------------+    |
                   | 1..*          | 1..*         |
                   |               |              |
                   |               | 0..*         |
                   |        +-----------------+   |
   +------------+  |        | Communication   |   |
   | CS-RS      |  |        | Session Group   |   |
   | Association|--+        |  (CS-Group)     |   |
   |            |  |        +-----------------+   |
   +------------+  |              | 0..1          |
                   |              |               |
                   | 0..*         | 1..*          |
   +-------------------------------+              |
   |   Communication Session (CS)  |              |
   |                               |              |
   +-------------------------------+              |
         | 1..*                   | 0..1          |
   +-----+                        |               |
   |     | 0..*                   | 0..*          | 0..*
   | +-------------+ receives +----------------+  |
   | | Participant |----------|  Media Stream  |--+
   | |             |0..*  0..*|                |
   | |             |          |                |
   | |             |          |                |
   | |             |  sends   |                |
   | |             |----------|                |
   | |             |1.*   0..*|                |
   | +-------------+          +----------------+
   |        |                        |
   |        |                        |
   |        +------------------------+------------+
   |                                              |
   |                                              |
   |           +------------------+    +----------------------+
   |           |Participant-CS    |    |  Participant-Stream  |
   +-----------|  Association     |    |    Association       |
               |                  |    |                      |
               +------------------+    +----------------------+





<span class="grey">Ravindranath, et al.         Standards Track                    [Page 5]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-6" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


   The metadata model is a class diagram in UML.  The model describes
   the structure of metadata in general by showing the classes, their
   attributes, and the relationships among the classes.  Each block in
   the model above represents a class.  The linkages between the classes
   represent the relationships, which can be associations or
   compositions.  The metadata is conveyed from the Session Recording
   Client (SRC) to the SRS.

   The model allows metadata describing CSs to be communicated to the
   SRS as a series of snapshots, each representing the state as seen by
   a single SRC at a particular instant in time.  Metadata changes from
   one snapshot to another reflect changes in what is being recorded.
   For example, if a participant joins a conference, then the SRC sends
   the SRS a snapshot of metadata having that participant information
   (with attributes like (Name, AoR) tuple and associate-time).  (Note:
   &quot;AoR&quot; means &quot;Address-of-Record&quot;.)

   Some of the metadata is not required to be conveyed explicitly from
   the SRC to the SRS, if it can be obtained contextually by the SRS
   (e.g., from SIP or Session Description Protocol (SDP) signaling).
   For example, the &#x27;label&#x27; attribute within the &#x27;stream&#x27; XML element
   references an SDP &quot;a=label&quot; attribute that identifies an m-line
   within the Recording Session (RS) SDP.  The SRS would learn the media
   properties from the media line.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  Recording Metadata Format from SRC to SRS</span>

   This section gives an overview of the recording metadata format.
   Some data from the metadata model is assumed to be made available to
   the SRS through SDP [<a href="/doc/html/rfc4566" title="&quot;SDP: Session Description Protocol&quot;">RFC4566</a>], and therefore this data is not
   represented in the XML document format specified in this document.
   SDP attributes describe different media formats like audio and video.
   The other metadata attributes, such as participant details, are
   represented in a new recording-specific XML document of type
   &#x27;application/rs-metadata+xml&#x27;.  The SDP &quot;label&quot; attribute [<a href="/doc/html/rfc4574" title="&quot;The Session Description Protocol (SDP) Label Attribute&quot;">RFC4574</a>]
   provides an identifier by which a metadata XML document can refer to
   a specific media description in the SDP sent from the SRC to the SRS.

   The XML document format can be used to represent either the complete
   metadata or a partial update to the metadata.  The latter includes
   only elements that have changed compared to the previously reported
   metadata.









<span class="grey">Ravindranath, et al.         Standards Track                    [Page 6]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-7" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h3"><a class="selflink" id="section-5.1" href="#section-5.1">5.1</a>.  XML Data Format</span>

   Every recording metadata XML document sent from the SRC to the SRS
   contains a &#x27;recording&#x27; element.  The &#x27;recording&#x27; element acts as a
   container for all other elements in this XML document.  A &#x27;recording&#x27;
   object is an XML document.  It has the XML declaration and contains
   an encoding declaration in the XML declaration, e.g.,
   &quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&quot;.  If the charset parameter
   of the MIME content type declaration is present and it is different
   from the encoding declaration, the charset parameter takes
   precedence.

   Every application conforming to this specification MUST accept the
   UTF-8 character encoding to ensure minimal interoperability.

   Syntax and semantic errors in an XML document should be reported to
   the originator, using application-specific mechanisms.

<span class="h4"><a class="selflink" id="section-5.1.1" href="#section-5.1.1">5.1.1</a>.  Namespace</span>

   With the following URN, this document defines a new namespace URI for
   elements defined herein:

   urn:ietf:params:xml:ns:recording:1

<span class="h4"><a class="selflink" id="section-5.1.2" href="#section-5.1.2">5.1.2</a>.  &#x27;recording&#x27; Element</span>

   The &#x27;recording&#x27; element MUST contain an xmlns namespace attribute
   with a value of urn:ietf:params:xml:ns:recording:1.  Exactly one
   &#x27;recording&#x27; element MUST be present in every recording metadata XML
   document.

   A &#x27;recording&#x27; element MAY contain a &#x27;dataMode&#x27; element indicating
   whether the XML document is a complete document or a partial update.
   If no &#x27;dataMode&#x27; element is present, then the default value is
   &quot;complete&quot;.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  Recording Metadata Classes</span>

   This section describes each class of the metadata model and the
   attributes of each class.  This section also describes how different
   classes are linked and the XML element for each of them.









<span class="grey">Ravindranath, et al.         Standards Track                    [Page 7]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-8" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h3"><a class="selflink" id="section-6.1" href="#section-6.1">6.1</a>.  Recording Session</span>

   +-------------------------------+
   | Recording Session (RS)        |
   +-------------------------------+
   |                               | 1..*     0..*
   |     start-time                |-------------- Media Stream
   |     end-time                  |
   |                               |
   |                               |
   +-------------------------------+
         | 1..*           | 1..*
         |                |
         | 0..*           | 0..*
    Communication    Communication
    Session (CS)     Session Group (CS-Group)

   Each instance of an RS class, namely the RS object, represents a SIP
   session created between an SRC and SRS for the purpose of recording
   a CS.

   The RS object is represented in the XML schema using the &#x27;recording&#x27;
   element, which in turn relies on the SIP/SDP session with which the
   XML document is associated to provide the attributes of the RS
   element.

<span class="h4"><a class="selflink" id="section-6.1.1" href="#section-6.1.1">6.1.1</a>.  Attributes</span>

   An RS class has the following attributes:

   o  start-time - Represents the start time of an RS object.

   o  end-time - Represents the end time of an RS object.

   &#x27;start-time&#x27; and &#x27;end-time&#x27; attribute values are derivable from the
   Date header (if present in the SIP message) in the RS.  In cases
   where the Date header is not present, &#x27;start-time&#x27; is derivable from
   the time at which the SRS receives the notification of the SIP
   message to set up the RS, and &#x27;end-time&#x27; is derivable from the time
   at which the SRS receives a disconnect on the RS SIP dialog.











<span class="grey">Ravindranath, et al.         Standards Track                    [Page 8]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-9" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h4"><a class="selflink" id="section-6.1.2" href="#section-6.1.2">6.1.2</a>.  Linkages</span>

   Each instance of an RS has:

   o  Zero or more instances of CS-Groups.

   o  Zero or more instances of CS objects.

   o  Zero or more instances of MediaStream objects.

   Zero instances of CSs and CS-Groups in a &#x27;recording&#x27; element are
   allowed to accommodate persistent recording scenarios.  A persistent
   RS is a SIP dialog that is set up between the SRC and the SRS, even
   before any CS is set up.  The metadata sent from the SRC to the SRS
   when the persistent RS SIP dialog is set up may not have any CS (and
   the related CS-Group) elements in the XML, as there may not be a
   session that is associated to the RS yet.  For example, a phone
   acting as an SRC can set up an RS with the SRS, possibly even before
   the phone is part of a CS.  Once the phone joins a CS, the same RS
   would be used to convey the CS metadata.

<span class="h3"><a class="selflink" id="section-6.2" href="#section-6.2">6.2</a>.  Communication Session Group</span>

    Recording Session (RS)
              | 1..*
              |
              | 0..*
   +-------------------------------+
   | Communication Session         |
   |   Group (CS-Group)            |
   +-------------------------------+
   |  group_id                     |
   |  associate-time               |
   |  disassociate-time            |
   |                               |
   +-------------------------------+
              | 0..1
              |
              | 1..*
    Communication Session (CS)

   One instance of a CS-Group class, namely the CS-Group object,
   provides association or grouping of all related CSs.  For example, in
   a contact center flow, a call can get transferred to multiple agents.
   Each of these can trigger the setup of a new CS.  In cases where the
   SRC knows the related CSs, it can group them using the CS-Group
   element.  The CS-Group object is represented in the XML schema using
   the &#x27;group&#x27; element.



<span class="grey">Ravindranath, et al.         Standards Track                    [Page 9]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-10" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h4"><a class="selflink" id="section-6.2.1" href="#section-6.2.1">6.2.1</a>.  Attributes</span>

   A CS-Group has the following attributes:

   o  group_id - This attribute groups different CSs that are related.
      The SRC (or the SRS) is responsible for ensuring the uniqueness of
      &#x27;group_id&#x27; in cases where multiple SRCs interact with the same
      SRS.  The mechanism by which the SRC groups the CS is outside the
      scope of this document.

   o  associate-time - This is the time when a grouping is formed.  The
      rules that determine how a grouping of different CS objects is
      done by the SRC are outside the scope of this document.

   o  disassociate-time - &#x27;disassociate-time&#x27; for the CS-Group is
      calculated by the SRC as the time when the grouping ends.

<span class="h4"><a class="selflink" id="section-6.2.2" href="#section-6.2.2">6.2.2</a>.  Linkages</span>

   The linkages between a CS-Group class and other classes are
   associations.  A CS-Group is associated with the RS and CS in the
   following manner:

   o  There are one or more RS objects per CS-Group.

   o  Each CS-Group object has to be associated with one or more RSs.
      Here, each RS can be set up by the potentially different SRCs.

   o  There are one or more CSs per CS-Group (for example, in cases
      where the call is transferred).  A CS cannot be associated with
      more than one CS-Group.




















<span class="grey">Ravindranath, et al.         Standards Track                   [Page 10]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-11" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h3"><a class="selflink" id="section-6.3" href="#section-6.3">6.3</a>.  Communication Session</span>

   Recording               Communication
   Session (RS)       Session Group (CS-Group)
      | 1..*                 | 0..1
      |                      |
      | 0..*                 | 1..*
   +-------------------------------+
   |   Communication Session (CS)  |
   +-------------------------------+
   |   session_id                  |
   |   sipSessionID                |
   |   reason                      |
   |   group-ref                   |
   |   start-time                  |
   |   stop-time                   |
   +-------------------------------+
      |                      |
      | 0..*                 | 0..1
      |                      |
      | 0..*                 | 0..*
   Participant              Media Stream

   A CS class and its object in the metadata model represent the CS and
   its properties as seen by the SRC.  The CS object is represented in
   the XML schema using the &#x27;session&#x27; element.

<span class="h4"><a class="selflink" id="section-6.3.1" href="#section-6.3.1">6.3.1</a>.  Attributes</span>

   A CS class has the following attributes:

   o  session_id - This attribute is used to uniquely identify an
      instance of a CS object, namely the &#x27;session&#x27; XML element within
      the metadata XML document.  &#x27;session_id&#x27; is generated using the
      rules mentioned in <a href="#section-6.10">Section 6.10</a>.

   o  reason - This represents the reason why a CS was terminated.  The
      value for this attribute is derived from the SIP Reason header
      [<a href="/doc/html/rfc3326" title="&quot;The Reason Header Field for the Session Initiation Protocol (SIP)&quot;">RFC3326</a>] of the CS.  There MAY be multiple instances of the
      &#x27;reason&#x27; XML element inside a &#x27;session&#x27; element.  The &#x27;reason&#x27; XML
      element has &#x27;protocol&#x27; as an attribute, which indicates the
      protocol from which the reason string is derived.  The default
      value for the &#x27;protocol&#x27; attribute is &quot;SIP&quot;.  The &#x27;reason&#x27; element
      can be derived from a SIP Reason header in the CS.







<span class="grey">Ravindranath, et al.         Standards Track                   [Page 11]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-12" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


   o  sipSessionID - This attribute carries a SIP Session-ID as defined
      in [<a href="#ref-SessionID">SessionID</a>].  Each CS object can have zero or more
      &#x27;sipSessionID&#x27; elements.  More than one &#x27;sipSessionID&#x27; attribute
      may be present in a CS.  For example, if three participants -- A,
      B, and C -- are in a conference that has a focus acting as an SRC,
      the metadata sent from the SRC to the SRS will likely have three
      &#x27;sipSessionID&#x27; elements that correspond to the SIP dialogs that
      the focus has with each of the three participants.

   o  group-ref - A &#x27;group-ref&#x27; attribute MAY be present to indicate the
      group (identified by &#x27;group_id&#x27;) to which the enclosing session
      belongs.

   o  start-time - This optional attribute represents the start time of
      the CS as seen by the SRC.

   o  stop-time - This optional attribute represents the stop time of
      the CS as seen by the SRC.

   This document does not specify attributes relating to what should
   happen to a recording of a CS after it has been delivered to the SRS
   (e.g., how long to retain the recording, what access controls to
   apply).  The SRS is assumed to behave in accordance with its local
   policy.  The ability of the SRC to influence this policy is outside
   the scope of this document.  However, if there are implementations
   where the SRC desires to specify its own policy preferences, this
   information could be sent as extension data attached to the CS.

<span class="h4"><a class="selflink" id="section-6.3.2" href="#section-6.3.2">6.3.2</a>.  Linkages</span>

   A CS is linked to the CS-Group, participant, MediaStream (MS), and
   RS classes by using the association relationship.  The association
   between the CS and the participant allows the following:

   o  A CS will have zero or more participants.

   o  A participant is associated with zero or more CSs.  This includes
      participants who are not directly part of any CS.  An example of
      such a case is participants in a pre-mixed media stream.  The SRC
      may have knowledge of such participants but not have any signaling
      relationship with them.  This might arise if one participant in a
      CS is a conference focus.  To summarize, even if the SRC does not
      have direct signaling relationships with all participants in a CS,
      it should nevertheless create a participant object for each
      participant that it knows about.






<span class="grey">Ravindranath, et al.         Standards Track                   [Page 12]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-13" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


   o  The model also allows participants in a CS that are not
      participants in the media.  An example is the identity of a Third
      Party Call Control (3pcc) that has initiated a CS to two or more
      participants in the CS.  Another example is the identity of a
      conference focus.  Of course, a focus is probably in the media,
      but since it may only be there as a mixer, it may not report
      itself as a participant in any of the media streams.

   The association between the CS and the media stream allows the
   following:

   o  A CS will have zero or more streams.

   o  A stream can be associated with at most one CS.  A stream in a
      persistent RS is not required to be associated with any CS before
      the CS is created, and hence the zero association is allowed.

   The association between the CS and the RS allows the following:

   o  Each instance of an RS has zero or more instances of CS objects.

   o  Each CS has to be associated with one or more RSs.  Each RS can be
      potentially set up by different SRCs.

<span class="h3"><a class="selflink" id="section-6.4" href="#section-6.4">6.4</a>.  CS-RS Association</span>

                        1..*             0..*
              Recording                       Communication
                Session ----------+---------- Session
                                  |
                                  |
                                  |
                      +-----------------------+
                      | CS-RS Association     |
                      |                       |
                      +-----------------------+
                      | associate-time        |
                      | disassociate-time     |
                      | session_id            |
                      +-----------------------+

   The CS-RS Association class describes the association of a CS to an
   RS for a period of time.  A single CS may be associated with
   different RSs (perhaps by different SRCs) and may be associated and
   dissociated several times.

   The CS-RS Association class is represented in XML using the
   &#x27;sessionrecordingassoc&#x27; XML element.



<span class="grey">Ravindranath, et al.         Standards Track                   [Page 13]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-14" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h4"><a class="selflink" id="section-6.4.1" href="#section-6.4.1">6.4.1</a>.  Attributes</span>

   The CS-RS Association class has the following attributes:

   o  associate-time - associate-time is calculated by the SRC as the
      time it sees a CS associated to an RS.

   o  disassociate-time - disassociate-time is calculated by the SRC as
      the time it sees a CS disassociate from an RS.

   o  session_id - Each instance of this class MUST have a &#x27;session_id&#x27;
      attribute that identifies the CS to which this association
      belongs.

<span class="h4"><a class="selflink" id="section-6.4.2" href="#section-6.4.2">6.4.2</a>.  Linkages</span>

   The CS-RS Association class is linked to the CS and RS classes.

<span class="h3"><a class="selflink" id="section-6.5" href="#section-6.5">6.5</a>.  Participant</span>

    Communication Session (CS)
              | 0..*
              |
              | 0..*
   +-------------------------------+
   |          Participant          |
   +-------------------------------+
   |  nameID                       |
   |  participant_id               |
   |                               |
   +-------------------------------+
           | 0..*       1..* |
   receives|                 |sends
           | 0..*       0..* |
              Media Stream

   A participant class and its objects have information about a device
   that is part of a CS and/or contributes/consumes media stream(s)
   belonging to a CS.

   The participant object is represented in the XML schema using the
   &#x27;participant&#x27; element.









<span class="grey">Ravindranath, et al.         Standards Track                   [Page 14]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-15" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h4"><a class="selflink" id="section-6.5.1" href="#section-6.5.1">6.5.1</a>.  Attributes</span>

   A participant class has two attributes:

   o  nameID - This attribute is a list of (Name, AoR) tuples.  An AoR
      (<a href="/doc/html/rfc3261#section-6">Section&nbsp;6 of [RFC3261]</a>) can be either a SIP/SIPS/tel URI (&quot;SIPS&quot;
      means &quot;SIP Secure&quot;; the tel URI is discussed in [<a href="/doc/html/rfc3966" title="&quot;The tel URI for Telephone Numbers&quot;">RFC3966</a>]), a
      Fully Qualified Domain Name (FQDN), or an IP address.  For
      example, the AoR may be drawn from the From header field or the
      P-Asserted-Identity header [<a href="/doc/html/rfc3325" title="&quot;Private Extensions to the Session Initiation Protocol (SIP) for Asserted Identity within Trusted Networks&quot;">RFC3325</a>] field.  The SRC&#x27;s local
      policy is used to decide where to draw the AoR from.  The Name
      parameter represents the participant name (SIP display name) or
      dialed number (when known).  Multiple tuples are allowed for cases
      where a participant has more than one AoR.  For example, a
      P-Asserted-Identity header can have both SIP and tel URIs.

   o  participant_id - This attribute is used to identify the
      &#x27;participant&#x27; XML element within the XML document.  It is
      generated using the rules mentioned in <a href="#section-6.10">Section 6.10</a>.  This
      attribute MUST be used for all references to a participant within
      a CS-Group, and MAY be used to reference the same participant more
      globally.

   This document does not specify other attributes relating to
   participants (e.g., participant role, participant type).  An SRC that
   has information regarding these attributes can provide this
   information as part of extension data to the &#x27;participant&#x27; XML
   element from the SRC to the SRS.

<span class="h4"><a class="selflink" id="section-6.5.2" href="#section-6.5.2">6.5.2</a>.  Linkages</span>

   The participant class is linked to the MS and CS classes by using an
   association relationship.  The association between the participant
   and the MS allows the following:

   o  A participant will receive zero or more media streams.

   o  A participant will send zero or more media streams.  (The same
      participant provides multiple streams, e.g., audio and video.)












<span class="grey">Ravindranath, et al.         Standards Track                   [Page 15]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-16" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


   o  A media stream will be received by zero or more participants.  It
      is possible, though perhaps unlikely, that a stream is generated
      but sent only to the SRC and SRS, not to any participant -- for
      example, in conferencing where all participants are on hold and
      the SRC is collocated with the focus.  Also, a media stream may be
      received by multiple participants (e.g., &quot;whisper&quot; calls, side
      conversations).

   o  A media stream will be sent by one or more participants (pre-mixed
      streams).

   An example of a case where a participant receives zero or more
   streams is where a supervisor may have a side conversation with an
   agent while the agent converses with a customer.

<span class="h3"><a class="selflink" id="section-6.6" href="#section-6.6">6.6</a>.  Participant-CS Association</span>

                         1..*             0..*
         Communication
               Session -----------+----------- Participant
                                  |
                                  |
                                  |
                    +---------------------------+
                    | Participant-CS Association|
                    |                           |
                    |                           |
                    +---------------------------+
                    | associate-time            |
                    | disassociate-time         |
                    | param                     |
                    | participant_id            |
                    | session_id                |
                    +---------------------------+

   The Participant-CS Association class describes the association of a
   participant to a CS for a period of time.  A participant may be
   associated to and dissociated from a CS several times (for example,
   connecting to a conference, then disconnecting, then connecting
   again).

   The Participant-CS Association object is represented in the XML
   schema using the &#x27;participantsessionassoc&#x27; element.








<span class="grey">Ravindranath, et al.         Standards Track                   [Page 16]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-17" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h4"><a class="selflink" id="section-6.6.1" href="#section-6.6.1">6.6.1</a>.  Attributes</span>

   The Participant-CS Association class has the following attributes:

   o  associate-time - associate-time is calculated by the SRC as the
      time it sees a participant associated to a CS.

   o  disassociate-time - disassociate-time is calculated by the SRC as
      the time it sees a participant disassociate from a CS.  It is
      possible that a given participant can have multiple associate
      times / disassociate times within a given communication session.

   o  param - The capabilities here are those that are indicated in the
      Contact header as defined in <a href="/doc/html/rfc3840#section-9">Section&nbsp;9 of [RFC3840]</a>.  For example,
      in a CS (which can be a conference), you can have participants who
      are playing the role of &quot;focus&quot;.  These participants do not
      contribute to media in the CS; however, they switch the media
      received from one participant to every other participant in the
      CS.  Indicating the capabilities of the participants (here,
      &quot;focus&quot;) would be useful for the recorder to learn about these
      kinds of participants.  The capabilities are represented using the
      &#x27;param&#x27; XML element in the metadata.  The &#x27;param&#x27; XML element
      encoding defined in [<a href="/doc/html/rfc4235" title="&quot;An INVITE-Initiated Dialog Event Package for the Session Initiation Protocol (SIP)&quot;">RFC4235</a>] is used to represent the capability
      attributes in metadata.  Each participant may have zero or more
      capabilities.  A participant may use different capabilities,
      depending on the role it plays at a particular instance -- for
      example, if a participant moves across different CSs (e.g., due to
      transfer) or is simultaneously present in different CSs with
      different roles.

   o  participant_id - This attribute identifies the participant to
      which this association belongs.

   o  session_id - This attribute identifies the session to which this
      association belongs.

<span class="h4"><a class="selflink" id="section-6.6.2" href="#section-6.6.2">6.6.2</a>.  Linkages</span>

   The Participant-CS Association class is linked to the participant and
   CS classes.











<span class="grey">Ravindranath, et al.         Standards Track                   [Page 17]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-18" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h3"><a class="selflink" id="section-6.7" href="#section-6.7">6.7</a>.  Media Stream</span>

                                      Participant
                                  | 0..*       1..* |
                          receives|                 |sends
                                  | 0..*       0..* |
                              +-------------------------+
                              |        Media Stream     |
                   0..1  0..* +-------------------------+
    Communication ------------|                         |
          Session             |  label                  |
                              |  content-type           |
                              |  stream_id              |
                              |  session_id             |
                              +-------------------------+
                                      0..* |
                                           |
                                           |
                                      1..* |
                                     Recording Session

   A MS class (and its objects) has the properties of media as seen by
   the SRC and sent to the SRS.  Different snapshots of MS objects may
   be sent whenever there is a change in media (e.g., a direction
   change, like pause/resume, codec change, and/or participant change).

   The MS object is represented in the XML schema using the &#x27;stream&#x27;
   element.

<span class="h4"><a class="selflink" id="section-6.7.1" href="#section-6.7.1">6.7.1</a>.  Attributes</span>

   A MS class has the following attributes:

   o  label - The &#x27;label&#x27; attribute within the &#x27;stream&#x27; XML element
      references an SDP &quot;a=label&quot; attribute that identifies an m-line
      within the RS SDP.  That m-line carries the media stream from the
      SRC to the SRS.

   o  content-type - The content of a MS element will be described in
      terms of the &quot;a=content&quot; attribute defined in <a href="/doc/html/rfc4796#section-5">Section&nbsp;5 of
      [RFC4796]</a>.  If the SRC wishes to convey the content-type to the
      SRS, it does so by including an &quot;a=content&quot; attribute with the
      m-line in the RS SDP.








<span class="grey">Ravindranath, et al.         Standards Track                   [Page 18]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-19" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


   o  stream_id - Each &#x27;stream&#x27; element has a unique &#x27;stream_id&#x27;
      attribute that helps to uniquely identify the stream.  This
      identifier is generated using the rules mentioned in <a href="#section-6.10">Section 6.10</a>.

   o  session_id - This attribute associates the stream with a specific
      &#x27;session&#x27; element.

   The metadata model can include media streams that are not being
   delivered to the SRS.  For example, an SRC offers audio and video
   towards an SRS that accepts only audio in response.  The metadata
   snapshots sent from the SRC to the SRS can continue to indicate the
   changes to the video stream as well.

<span class="h4"><a class="selflink" id="section-6.7.2" href="#section-6.7.2">6.7.2</a>.  Linkages</span>

   A MS class is linked to the participant and CS classes by using the
   association relationship.  Details regarding associations with the
   participant are described in <a href="#section-6.5">Section 6.5</a>.  Details regarding
   associations with the CS are mentioned in <a href="#section-6.3">Section 6.3</a>.

<span class="h3"><a class="selflink" id="section-6.8" href="#section-6.8">6.8</a>.  Participant-Stream Association</span>

   +-------------------------+
   | Participant-Stream      |
   | Association             |
   +-------------------------+   +-----------Participant
   | associate-time          |   |       0..* | 1..* |
   | disassociate-time       |---+    receives|      |sends
   | send                    |   |       0..* | 0..* |
   | recv                    |   |            |      |
   | participant_id          |   |            |      |
   +-------------------------+   |            |      |
                                 +-----------Media Stream

   A Participant-Stream Association class describes the association of a
   participant to a MS for a period of time, as a sender or as a
   receiver, or both.

   This class is represented in XML using the &#x27;participantstreamassoc&#x27;
   element.











<span class="grey">Ravindranath, et al.         Standards Track                   [Page 19]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-20" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h4"><a class="selflink" id="section-6.8.1" href="#section-6.8.1">6.8.1</a>.  Attributes</span>

   A Participant-Stream Association class has the following attributes:

   o  associate-time - This attribute indicates the time a participant
      started contributing to a MS.

   o  disassociate-time - This attribute indicates the time a
      participant stopped contributing to a MS.

   o  send - This attribute indicates whether a participant is
      contributing to a stream or not.  This attribute has a value that
      points to a stream represented by its unique_id.  The presence of
      this attribute indicates that a participant is contributing to a
      stream.  If a participant stops contributing to a stream due to
      changes in a CS, a snapshot MUST be sent from the SRC to the SRS
      with no &#x27;send&#x27; element for that stream.

   o  recv - This attribute indicates whether a participant is receiving
      a media stream or not.  This attribute has a value that points to
      a stream represented by its unique_id.  The presence of this
      attribute indicates that a participant is receiving a stream.  If
      the participant stops receiving a stream due to changes in a CS
      (like hold), a snapshot MUST be sent from the SRC to the SRS with
      no &#x27;recv&#x27; element for that stream.

   o  participant_id - This attribute points to the participant with
      which a &#x27;stream&#x27; element is associated.

   The &#x27;participantstreamassoc&#x27; XML element is used to represent a
   participant association with a stream.  The &#x27;send&#x27; and &#x27;recv&#x27; XML
   elements MUST be used to indicate whether a participant is
   contributing to a stream or receiving a stream.  There MAY be
   multiple instances of the &#x27;send&#x27; and &#x27;recv&#x27; XML elements inside a
   &#x27;participantstreamassoc&#x27; element.  If a metadata snapshot is sent
   with a &#x27;participantstreamassoc&#x27; element that does not have any &#x27;send&#x27;
   and &#x27;recv&#x27; elements, it means that the participant is neither
   contributing to any streams nor receiving any streams.

<span class="h4"><a class="selflink" id="section-6.8.2" href="#section-6.8.2">6.8.2</a>.  Linkages</span>

   The Participant-Stream Association class is linked to the participant
   and MS classes.








<span class="grey">Ravindranath, et al.         Standards Track                   [Page 20]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-21" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h3"><a class="selflink" id="section-6.9" href="#section-6.9">6.9</a>.  Syntax of XML Elements for Date and Time</span>

   The XML elements &#x27;associate-time&#x27;, &#x27;disassociate-time&#x27;, &#x27;start-time&#x27;,
   and &#x27;stop-time&#x27; contain strings representing the date and time.  The
   value of these elements MUST follow the Instant Messaging and
   Presence Protocol (IMPP) date-time format [<a href="/doc/html/rfc3339" title="&quot;Date and Time on the Internet: Timestamps&quot;">RFC3339</a>].  Timestamps that
   contain &quot;T&quot; or &quot;Z&quot; MUST use the capitalized forms.

   As a security measure, the &#x27;timestamp&#x27; element MUST be included in
   all tuples, unless the exact time of the status change cannot be
   determined.

<span class="h3"><a class="selflink" id="section-6.10" href="#section-6.10">6.10</a>.  Format of Unique ID</span>

   A unique_id is generated in two steps:

   o  The Universally Unique Identifier (UUID) is created using any of
      the procedures mentioned in Sections <a href="#section-4.3">4.3</a>, <a href="#section-4.4">4.4</a>, and <a href="#section-4.5">4.5</a> of
      [<a href="/doc/html/rfc4122" title="&quot;A Universally Unique IDentifier (UUID) URN Namespace&quot;">RFC4122</a>].  The algorithm MUST ensure that it does not use any
      potentially personally identifying information to generate the
      UUIDs.  If implementations are using a Name-Based UUID as defined
      in <a href="/doc/html/rfc4122#section-4.3">Section&nbsp;4.3 of [RFC4122]</a>, a namespace ID generated using the
      guidance in <a href="#section-4.2">Section 4.2</a> or 4.5 of [<a href="/doc/html/rfc4122" title="&quot;A Universally Unique IDentifier (UUID) URN Namespace&quot;">RFC4122</a>] might be a good
      choice.

   o  The UUID is encoded using base64 as defined in [<a href="/doc/html/rfc4648" title="&quot;The Base16, Base32, and Base64 Data Encodings&quot;">RFC4648</a>].

   The above-mentioned unique_id mechanism SHOULD be used for each
   metadata element.  Multiple SRCs can refer to the same element/UUID
   (how each SRC learns the UUID here is beyond the scope of this
   document).  If two SRCs use the same UUID, they MUST retain the
   UUID/element mapping.  If the SRS detects that a UUID is mapped to
   more than one element at any point in time, it MUST treat this as an
   error.  For example, the SRS may choose to reject or ignore the
   portions of metadata where it detects that the same UUID is mapped to
   an element that is different than the expected element (the SRS
   learns the mapped UUID when it sees an element for the first time in
   a metadata instance).

<span class="h3"><a class="selflink" id="section-6.11" href="#section-6.11">6.11</a>.  Metadata Version Indicator</span>

   The Metadata version is defined to help the SRC and SRS know the
   version of metadata XML schema used.  SRCs and SRSs that support this
   specification MUST use version 1 in the namespace
   (urn:ietf:params:xml:ns:recording:1) in all the XML documents.
   Implementations may not interoperate if the version implemented by
   the sender is not known by the receiver.  No negotiation of versions
   is provided.  The version number has no significance, although



<span class="grey">Ravindranath, et al.         Standards Track                   [Page 21]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-22" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


   documents that update or obsolete this document (possibly including
   drafts of such documents) should include a higher version number if
   the metadata XML schema changes.

<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>.  Recording Metadata Snapshot Request Format</span>

   The SRS can explicitly request a metadata snapshot from the SRC.  To
   request a metadata snapshot, the SRS MUST send a SIP request message
   with an XML document having the namespace
   urn:ietf:params:xml:ns:recording:1.  The XML document has the
   following elements:

   o  A &#x27;requestsnapshot&#x27; XML element MUST be present as the top-level
      element in the XML document.

   o  A &#x27;requestreason&#x27; XML element that indicates the reason (as a
      string) for requesting the snapshot MAY be present as a child XML
      element of &#x27;requestsnapshot&#x27;.

   The example below shows a metadata snapshot request from the SRS.

   &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
     &lt;requestsnapshot xmlns=&#x27;urn:ietf:params:xml:ns:recording:1&#x27;&gt;
     &lt;requestreason xml:lang=&quot;it&quot;&gt;SRS internal error&lt;/requestreason&gt;
   &lt;/requestsnapshot&gt;

             Example Metadata Snapshot Request from SRS to SRC
























<span class="grey">Ravindranath, et al.         Standards Track                   [Page 22]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-23" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h2"><a class="selflink" id="section-8" href="#section-8">8</a>.  SIP Recording Metadata Examples</span>

<span class="h3"><a class="selflink" id="section-8.1" href="#section-8.1">8.1</a>.  Complete SIP Recording Metadata Example</span>

   The following example provides all the tuples involved in the
   recording metadata XML body.

   &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
     &lt;recording xmlns=&#x27;urn:ietf:params:xml:ns:recording:1&#x27;&gt;
     &lt;datamode&gt;complete&lt;/datamode&gt;
     &lt;group group_id=&quot;7+OTCyoxTmqmqyA/1weDAg==&quot;&gt;
       &lt;associate-time&gt;2010-12-16T23:41:07Z&lt;/associate-time&gt;
       &lt;!-- Standardized extension --&gt;
       &lt;call-center xmlns=&#x27;urn:ietf:params:xml:ns:callcenter&#x27;&gt;
             &lt;supervisor&gt;sip:alice@atlanta.com&lt;/supervisor&gt;
       &lt;/call-center&gt;
       &lt;mydata xmlns=&#x27;http://example.com/my&#x27;&gt;
             &lt;structure&gt;FOO!&lt;/structure&gt;
             &lt;whatever&gt;bar&lt;/whatever&gt;
       &lt;/mydata&gt;
     &lt;/group&gt;
     &lt;session session_id=&quot;hVpd7YQgRW2nD22h7q60JQ==&quot;&gt;
           &lt;sipSessionID&gt;ab30317f1a784dc48ff824d0d3715d86;
           remote=47755a9de7794ba387653f2099600ef2&lt;/sipSessionID&gt;
           &lt;group-ref&gt;7+OTCyoxTmqmqyA/1weDAg==&lt;/group-ref&gt;
           &lt;!-- Standardized extension --&gt;
       &lt;mydata xmlns=&#x27;http://example.com/my&#x27;&gt;
             &lt;structure&gt;FOO!&lt;/structure&gt;
              &lt;whatever&gt;bar&lt;/whatever&gt;
           &lt;/mydata&gt;
     &lt;/session&gt;
     &lt;participant participant_id=&quot;srfBElmCRp2QB23b7Mpk0w==&quot;&gt;
           &lt;nameID aor=&quot;sip:bob@biloxi.com&quot;&gt;
              &lt;name xml:lang=&quot;it&quot;&gt;Bob&lt;/name&gt;
           &lt;/nameID&gt;
           &lt;!-- Standardized extension --&gt;
           &lt;mydata xmlns=&#x27;http://example.com/my&#x27;&gt;
                   &lt;structure&gt;FOO!&lt;/structure&gt;
                   &lt;whatever&gt;bar&lt;/whatever&gt;
           &lt;/mydata&gt;
     &lt;/participant&gt;










<span class="grey">Ravindranath, et al.         Standards Track                   [Page 23]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-24" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


     &lt;participant participant_id=&quot;zSfPoSvdSDCmU3A3TRDxAw==&quot;&gt;
           &lt;nameID aor=&quot;sip:Paul@biloxi.com&quot;&gt;
             &lt;name xml:lang=&quot;it&quot;&gt;Paul&lt;/name&gt;
           &lt;/nameID&gt;
           &lt;!-- Standardized extension --&gt;
           &lt;mydata xmlns=&#x27;http://example.com/my&#x27;&gt;
              &lt;structure&gt;FOO!&lt;/structure&gt;
              &lt;whatever&gt;bar&lt;/whatever&gt;
           &lt;/mydata&gt;
     &lt;/participant&gt;
     &lt;stream stream_id=&quot;UAAMm5GRQKSCMVvLyl4rFw==&quot;
             session_id=&quot;hVpd7YQgRW2nD22h7q60JQ==&quot;&gt;
           &lt;label&gt;96&lt;/label&gt;
     &lt;/stream&gt;
     &lt;stream stream_id=&quot;i1Pz3to5hGk8fuXl+PbwCw==&quot;
              session_id=&quot;hVpd7YQgRW2nD22h7q60JQ==&quot;&gt;
            &lt;label&gt;97&lt;/label&gt;
     &lt;/stream&gt;
     &lt;stream stream_id=&quot;8zc6e0lYTlWIINA6GR+3ag==&quot;
              session_id=&quot;hVpd7YQgRW2nD22h7q60JQ==&quot;&gt;
           &lt;label&gt;98&lt;/label&gt;
     &lt;/stream&gt;
     &lt;stream stream_id=&quot;EiXGlc+4TruqqoDaNE76ag==&quot;
              session_id=&quot;hVpd7YQgRW2nD22h7q60JQ==&quot;&gt;
           &lt;label&gt;99&lt;/label&gt;
     &lt;/stream&gt;
     &lt;sessionrecordingassoc session_id=&quot;hVpd7YQgRW2nD22h7q60JQ==&quot;&gt;
                   &lt;associate-time&gt;2010-12-16T23:41:07Z&lt;/associate-time&gt;
     &lt;/sessionrecordingassoc&gt;
     &lt;participantsessionassoc
          participant_id=&quot;srfBElmCRp2QB23b7Mpk0w==&quot;
          session_id=&quot;hVpd7YQgRW2nD22h7q60JQ==&quot;&gt;
           &lt;associate-time&gt;2010-12-16T23:41:07Z&lt;/associate-time&gt;
     &lt;/participantsessionassoc&gt;
     &lt;participantsessionassoc
          participant_id=&quot;zSfPoSvdSDCmU3A3TRDxAw==&quot;
          session_id=&quot;hVpd7YQgRW2nD22h7q60JQ==&quot;&gt;
              &lt;associate-time&gt;2010-12-16T23:41:07Z&lt;/associate-time&gt;
     &lt;/participantsessionassoc&gt;












<span class="grey">Ravindranath, et al.         Standards Track                   [Page 24]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-25" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


     &lt;participantstreamassoc
          participant_id=&quot;srfBElmCRp2QB23b7Mpk0w==&quot;&gt;
              &lt;send&gt;i1Pz3to5hGk8fuXl+PbwCw==&lt;/send&gt;
              &lt;send&gt;UAAMm5GRQKSCMVvLyl4rFw==&lt;/send&gt;
              &lt;recv&gt;8zc6e0lYTlWIINA6GR+3ag==&lt;/recv&gt;
              &lt;recv&gt;EiXGlc+4TruqqoDaNE76ag==&lt;/recv&gt;
     &lt;/participantstreamassoc&gt;
     &lt;participantstreamassoc
          participant_id=&quot;zSfPoSvdSDCmU3A3TRDxAw==&quot;&gt;
              &lt;send&gt;8zc6e0lYTlWIINA6GR+3ag==&lt;/send&gt;
              &lt;send&gt;EiXGlc+4TruqqoDaNE76ag==&lt;/send&gt;
              &lt;recv&gt;UAAMm5GRQKSCMVvLyl4rFw==&lt;/recv&gt;
              &lt;recv&gt;i1Pz3to5hGk8fuXl+PbwCw==&lt;/recv&gt;
     &lt;/participantstreamassoc&gt;
   &lt;/recording&gt;

                 Example Metadata Snapshot from SRC to SRS

<span class="h3"><a class="selflink" id="section-8.2" href="#section-8.2">8.2</a>.  Partial Update of Recording Metadata XML Body</span>

   The following example provides a partial update in the recording
   metadata XML body for the above example.  The example has a snapshot
   that carries the disassociate-time for a participant from a session.

   &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
     &lt;recording xmlns=&#x27;urn:ietf:params:xml:ns:recording:1&#x27;&gt;
       &lt;datamode&gt;partial&lt;/datamode&gt;
         &lt;participant
           participant_id=&quot;srfBElmCRp2QB23b7Mpk0w==&quot;&gt;
           &lt;nameID aor=&quot;sip:bob@biloxi.com&quot;&gt;
                     &lt;name xml:lang=&quot;it&quot;&gt;Bob&lt;/name&gt;
               &lt;/nameID&gt;
         &lt;/participant&gt;
         &lt;participantsessionassoc
            participant_id=&quot;srfBElmCRp2QB23b7Mpk0w==&quot;
            session_id=&quot;hVpd7YQgRW2nD22h7q60JQ==&quot;&gt;
           &lt;disassociate-time&gt;2010-12-16T23:41:07Z&lt;/disassociate-time&gt;
         &lt;/participantsessionassoc&gt;
     &lt;/recording&gt;

             Partial Update of SIP Recording Example XML Body










<span class="grey">Ravindranath, et al.         Standards Track                   [Page 25]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-26" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h2"><a class="selflink" id="section-9" href="#section-9">9</a>.  XML Schema Definition for Recording Metadata</span>

   This section defines the XML schema for the recording metadata
   document.

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
   &lt;xs:schema targetNamespace=&quot;urn:ietf:params:xml:ns:recording:1&quot;
      xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;
      xmlns:tns=&quot;urn:ietf:params:xml:ns:recording:1&quot;
      elementFormDefault=&quot;qualified&quot;
      attributeFormDefault=&quot;unqualified&quot;&gt;
    &lt;!-- This import brings in the XML language attribute xml:lang --&gt;
    &lt;xs:import namespace=&quot;http://www.w3.org/XML/1998/namespace&quot;
                 schemaLocation=&quot;https://www.w3.org/2001/xml.xsd&quot;/&gt;
    &lt;xs:element name=&quot;recording&quot; type=&quot;tns:recording&quot;/&gt;
    &lt;xs:complexType name=&quot;recording&quot;&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element name=&quot;datamode&quot; type=&quot;tns:dataMode&quot;
                  minOccurs=&quot;0&quot;/&gt;
            &lt;xs:element name=&quot;group&quot; type=&quot;tns:group&quot;
                  minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;xs:element name=&quot;session&quot; type=&quot;tns:session&quot;
                  minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;xs:element name=&quot;participant&quot; type=&quot;tns:participant&quot;
                  minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;xs:element name=&quot;stream&quot; type=&quot;tns:stream&quot;
                  minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;xs:element name=&quot;sessionrecordingassoc&quot;
                  type=&quot;tns:sessionrecordingassoc&quot;
                  minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;xs:element name=&quot;participantsessionassoc&quot;
                  type=&quot;tns:participantsessionassoc&quot;
                  minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;xs:element name=&quot;participantstreamassoc&quot;
                  type=&quot;tns:participantstreamassoc&quot;
                  minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;xs:any namespace=&#x27;##other&#x27;
                     minOccurs=&#x27;0&#x27;
                     maxOccurs=&#x27;unbounded&#x27;
                     processContents=&#x27;lax&#x27;/&gt;
         &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;









<span class="grey">Ravindranath, et al.         Standards Track                   [Page 26]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-27" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


    &lt;xs:complexType name=&quot;group&quot;&gt;
        &lt;xs:sequence&gt;
           &lt;xs:element name=&quot;associate-time&quot; type=&quot;xs:dateTime&quot;
              minOccurs=&quot;0&quot;/&gt;
           &lt;xs:element name=&quot;disassociate-time&quot; type=&quot;xs:dateTime&quot;
              minOccurs=&quot;0&quot;/&gt;
          &lt;xs:any namespace=&#x27;##other&#x27;
                     minOccurs=&#x27;0&#x27;
                     maxOccurs=&#x27;unbounded&#x27;
                     processContents=&#x27;lax&#x27;/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name=&quot;group_id&quot; type=&quot;xs:base64Binary&quot;
              use=&quot;required&quot;/&gt;
    &lt;/xs:complexType&gt;
    &lt;xs:complexType name=&quot;session&quot;&gt;
        &lt;xs:sequence&gt;
           &lt;xs:element name=&quot;sipSessionID&quot; type=&quot;xs:string&quot;
                  minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;
           &lt;xs:element name=&quot;reason&quot; type=&quot;tns:reason&quot;
                  minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;
           &lt;xs:element name=&quot;group-ref&quot; type=&quot;xs:base64Binary&quot;
                  minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
           &lt;xs:element name=&quot;start-time&quot; type=&quot;xs:dateTime&quot;
                  minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
           &lt;xs:element name=&quot;stop-time&quot; type=&quot;xs:dateTime&quot;
                  minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
              &lt;xs:any namespace=&#x27;##other&#x27;
                     minOccurs=&#x27;0&#x27;
                     maxOccurs=&#x27;unbounded&#x27;
                     processContents=&#x27;lax&#x27;/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name=&quot;session_id&quot; type=&quot;xs:base64Binary&quot;
              use=&quot;required&quot;/&gt;
    &lt;/xs:complexType&gt;
    &lt;xs:complexType name=&quot;sessionrecordingassoc&quot;&gt;
        &lt;xs:sequence&gt;
           &lt;xs:element name=&quot;associate-time&quot; type=&quot;xs:dateTime&quot;
                  minOccurs=&quot;0&quot;/&gt;
           &lt;xs:element name=&quot;disassociate-time&quot; type=&quot;xs:dateTime&quot;
                  minOccurs=&quot;0&quot;/&gt;
           &lt;xs:any namespace=&#x27;##other&#x27;
                     minOccurs=&#x27;0&#x27;
                     maxOccurs=&#x27;unbounded&#x27;
                     processContents=&#x27;lax&#x27;/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name=&quot;session_id&quot; type=&quot;xs:base64Binary&quot;
              use=&quot;required&quot;/&gt;
    &lt;/xs:complexType&gt;



<span class="grey">Ravindranath, et al.         Standards Track                   [Page 27]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-28" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


    &lt;xs:complexType name=&quot;participant&quot;&gt;
        &lt;xs:sequence&gt;
             &lt;xs:element name=&quot;nameID&quot; type=&quot;tns:nameID&quot;
                     maxOccurs=&#x27;unbounded&#x27;/&gt;
        &lt;xs:any namespace=&#x27;##other&#x27;
                     minOccurs=&#x27;0&#x27;
                     maxOccurs=&#x27;unbounded&#x27;
                     processContents=&#x27;lax&#x27;/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name=&quot;participant_id&quot; type=&quot;xs:base64Binary&quot;
              use=&quot;required&quot;/&gt;
    &lt;/xs:complexType&gt;
    &lt;xs:complexType name=&quot;participantsessionassoc&quot;&gt;
        &lt;xs:sequence&gt;
        &lt;xs:element name=&quot;associate-time&quot; type=&quot;xs:dateTime&quot;
                  minOccurs=&quot;0&quot;/&gt;
        &lt;xs:element name=&quot;disassociate-time&quot; type=&quot;xs:dateTime&quot;
                  minOccurs=&quot;0&quot;/&gt;
        &lt;xs:element name=&quot;param&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;&gt;
            &lt;xs:complexType&gt;
                &lt;xs:attribute name=&quot;pname&quot; type=&quot;xs:string&quot;
                  use=&quot;required&quot;/&gt;
                &lt;xs:attribute name=&quot;pval&quot; type=&quot;xs:string&quot;
                  use=&quot;required&quot;/&gt;
            &lt;/xs:complexType&gt;
        &lt;/xs:element&gt;
        &lt;xs:any namespace=&#x27;##other&#x27;
                minOccurs=&#x27;0&#x27;
                maxOccurs=&#x27;unbounded&#x27;
                processContents=&#x27;lax&#x27;/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name=&quot;participant_id&quot; type=&quot;xs:base64Binary&quot;
              use=&quot;required&quot;/&gt;
        &lt;xs:attribute name=&quot;session_id&quot; type=&quot;xs:base64Binary&quot;
              use=&quot;required&quot;/&gt;
    &lt;/xs:complexType&gt;















<span class="grey">Ravindranath, et al.         Standards Track                   [Page 28]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-29" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


    &lt;xs:complexType name=&quot;participantstreamassoc&quot;&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element name=&quot;send&quot; type=&quot;xs:base64Binary&quot;
               minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;xs:element name=&quot;recv&quot; type=&quot;xs:base64Binary&quot;
               minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;
               &lt;xs:element name=&quot;associate-time&quot; type=&quot;xs:dateTime&quot;
                  minOccurs=&quot;0&quot;/&gt;
            &lt;xs:element name=&quot;disassociate-time&quot; type=&quot;xs:dateTime&quot;
                  minOccurs=&quot;0&quot;/&gt;
               &lt;xs:any namespace=&#x27;##other&#x27;
                     minOccurs=&#x27;0&#x27;
                     maxOccurs=&#x27;unbounded&#x27;
                     processContents=&#x27;lax&#x27;/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name=&quot;participant_id&quot; type=&quot;xs:base64Binary&quot;
              use=&quot;required&quot;/&gt;
    &lt;/xs:complexType&gt;
    &lt;xs:complexType name=&quot;stream&quot;&gt;
        &lt;xs:sequence&gt;
           &lt;xs:element name=&quot;label&quot; type=&quot;xs:string&quot;
               minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
            &lt;xs:any namespace=&#x27;##other&#x27;
                     minOccurs=&#x27;0&#x27;
                     maxOccurs=&#x27;unbounded&#x27;
                     processContents=&#x27;lax&#x27;/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name=&quot;stream_id&quot; type=&quot;xs:base64Binary&quot;
              use=&quot;required&quot;/&gt;
        &lt;xs:attribute name=&quot;session_id&quot; type=&quot;xs:base64Binary&quot;/&gt;
    &lt;/xs:complexType&gt;
    &lt;xs:simpleType name=&quot;dataMode&quot;&gt;
        &lt;xs:restriction base=&quot;xs:string&quot;&gt;
            &lt;xs:enumeration value=&quot;complete&quot;/&gt;
                &lt;xs:enumeration value=&quot;partial&quot;/&gt;
        &lt;/xs:restriction&gt;
    &lt;/xs:simpleType&gt;
    &lt;xs:complexType name=&quot;nameID&quot;&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name=&quot;name&quot; type =&quot;tns:name&quot; minOccurs=&quot;0&quot;
                            maxOccurs=&quot;1&quot;/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:attribute name=&quot;aor&quot; type=&quot;xs:anyURI&quot; use=&quot;required&quot;/&gt;
    &lt;/xs:complexType&gt;







<span class="grey">Ravindranath, et al.         Standards Track                   [Page 29]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-30" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


   &lt;xs:complexType name=&quot;name&quot;&gt;
    &lt;xs:simpleContent&gt;
        &lt;xs:extension base=&quot;xs:string&quot;&gt;
           &lt;xs:attribute ref=&quot;xml:lang&quot; use=&quot;optional&quot;/&gt;
        &lt;/xs:extension&gt;
    &lt;/xs:simpleContent&gt;
   &lt;/xs:complexType&gt;
   &lt;xs:complexType name=&quot;reason&quot;&gt;
      &lt;xs:simpleContent&gt;
       &lt;xs:extension base=&quot;xs:string&quot;&gt;
          &lt;xs:attribute type=&quot;xs:short&quot; name=&quot;cause&quot; use=&quot;required&quot;/&gt;
          &lt;xs:attribute type=&quot;xs:string&quot; name=&quot;protocol&quot; default=&quot;SIP&quot;/&gt;
       &lt;/xs:extension&gt;
      &lt;/xs:simpleContent&gt;
   &lt;/xs:complexType&gt;
   &lt;xs:element name=&quot;requestsnapshot&quot; type=&quot;tns:requestsnapshot&quot;/&gt;
    &lt;xs:complexType name=&quot;requestsnapshot&quot;&gt;
       &lt;xs:sequence&gt;
          &lt;xs:element name=&quot;requestreason&quot; type=&quot;tns:name&quot;
            minOccurs=&quot;0&quot;/&gt;
          &lt;xs:any namespace=&#x27;##other&#x27;
            minOccurs=&#x27;0&#x27;
            maxOccurs=&#x27;unbounded&#x27;
            processContents=&#x27;lax&#x27;/&gt;
       &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
&lt;/xs:schema&gt;

<span class="h2"><a class="selflink" id="section-10" href="#section-10">10</a>.  Security Considerations</span>

   This document describes an extensive set of metadata that may be
   recorded by the SRS.  Most of the metadata could be considered
   private data.  The procedures mentioned in the Security
   Considerations section of [<a href="/doc/html/rfc7866" title="&quot;Session Recording Protocol&quot;">RFC7866</a>] MUST be followed by the SRC and
   the SRS for mutual authentication and to protect the content of the
   metadata in the RS.

   An SRC MAY, by policy, choose to limit the parts of the metadata sent
   to the SRS for recording.  Also, the policy of the SRS might not
   require recording all the metadata it receives.  For the sake of data
   minimization, the SRS MUST NOT record additional metadata that is not
   explicitly required by local policy.  Metadata in storage needs to be
   provided with a level of security that is comparable to that of the
   recording session.







<span class="grey">Ravindranath, et al.         Standards Track                   [Page 30]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-31" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


<span class="h2"><a class="selflink" id="section-11" href="#section-11">11</a>.  IANA Considerations</span>

   This specification registers a new XML namespace and a new XML
   schema.

<span class="h3"><a class="selflink" id="section-11.1" href="#section-11.1">11.1</a>.  SIP Recording Metadata Schema Registration</span>

   URI: urn:ietf:params:xml:ns:recording:1

   Registrant Contact:  IETF SIPREC working group, Ram Mohan R
      (rmohanr@cisco.com)

   XML: The registered XML schema is contained in <a href="#section-9">Section 9</a>.

   Its first line is &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;, and its
   last line is &lt;/xs:schema&gt;.

<span class="h2"><a class="selflink" id="section-12" href="#section-12">12</a>.  References</span>

<span class="h3"><a class="selflink" id="section-12.1" href="#section-12.1">12.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., &quot;Key words for use in RFCs to Indicate
              Requirement Levels&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc2119">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC3261">RFC3261</a>]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston,
              A., Peterson, J., Sparks, R., Handley, M., and E.
              Schooler, &quot;SIP: Session Initiation Protocol&quot;, <a href="/doc/html/rfc3261">RFC 3261</a>,
              DOI 10.17487/RFC3261, June 2002,
              &lt;<a href="http://www.rfc-editor.org/info/rfc3261">http://www.rfc-editor.org/info/rfc3261</a>&gt;.

   [<a id="ref-RFC3339">RFC3339</a>]  Klyne, G. and C. Newman, &quot;Date and Time on the Internet:
              Timestamps&quot;, <a href="/doc/html/rfc3339">RFC 3339</a>, DOI 10.17487/RFC3339, July 2002,
              &lt;<a href="http://www.rfc-editor.org/info/rfc3339">http://www.rfc-editor.org/info/rfc3339</a>&gt;.

   [<a id="ref-RFC3840">RFC3840</a>]  Rosenberg, J., Schulzrinne, H., and P. Kyzivat,
              &quot;Indicating User Agent Capabilities in the Session
              Initiation Protocol (SIP)&quot;, <a href="/doc/html/rfc3840">RFC 3840</a>,
              DOI 10.17487/RFC3840, August 2004,
              &lt;<a href="http://www.rfc-editor.org/info/rfc3840">http://www.rfc-editor.org/info/rfc3840</a>&gt;.

   [<a id="ref-RFC4122">RFC4122</a>]  Leach, P., Mealling, M., and R. Salz, &quot;A Universally
              Unique IDentifier (UUID) URN Namespace&quot;, <a href="/doc/html/rfc4122">RFC 4122</a>,
              DOI 10.17487/RFC4122, July 2005,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4122">http://www.rfc-editor.org/info/rfc4122</a>&gt;.





<span class="grey">Ravindranath, et al.         Standards Track                   [Page 31]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-32" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


   [<a id="ref-RFC4566">RFC4566</a>]  Handley, M., Jacobson, V., and C. Perkins, &quot;SDP: Session
              Description Protocol&quot;, <a href="/doc/html/rfc4566">RFC 4566</a>, DOI 10.17487/RFC4566,
              July 2006, &lt;<a href="http://www.rfc-editor.org/info/rfc4566">http://www.rfc-editor.org/info/rfc4566</a>&gt;.

   [<a id="ref-RFC4574">RFC4574</a>]  Levin, O. and G. Camarillo, &quot;The Session Description
              Protocol (SDP) Label Attribute&quot;, <a href="/doc/html/rfc4574">RFC 4574</a>,
              DOI 10.17487/RFC4574, August 2006,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4574">http://www.rfc-editor.org/info/rfc4574</a>&gt;.

   [<a id="ref-RFC4648">RFC4648</a>]  Josefsson, S., &quot;The Base16, Base32, and Base64 Data
              Encodings&quot;, <a href="/doc/html/rfc4648">RFC 4648</a>, DOI 10.17487/RFC4648, October 2006,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4648">http://www.rfc-editor.org/info/rfc4648</a>&gt;.

   [<a id="ref-RFC4796">RFC4796</a>]  Hautakorpi, J. and G. Camarillo, &quot;The Session Description
              Protocol (SDP) Content Attribute&quot;, <a href="/doc/html/rfc4796">RFC 4796</a>,
              DOI 10.17487/RFC4796, February 2007,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4796">http://www.rfc-editor.org/info/rfc4796</a>&gt;.

   [<a id="ref-RFC7866">RFC7866</a>]  Portman, L., Lum, H., Ed., Eckel, C., Johnston, A., and A.
              Hutton, &quot;Session Recording Protocol&quot;, <a href="/doc/html/rfc7866">RFC 7866</a>,
              DOI 10.17487/RFC7866, May 2016,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7866">http://www.rfc-editor.org/info/rfc7866</a>&gt;.

<span class="h3"><a class="selflink" id="section-12.2" href="#section-12.2">12.2</a>.  Informative References</span>

   [<a id="ref-RFC3325">RFC3325</a>]  Jennings, C., Peterson, J., and M. Watson, &quot;Private
              Extensions to the Session Initiation Protocol (SIP) for
              Asserted Identity within Trusted Networks&quot;, <a href="/doc/html/rfc3325">RFC 3325</a>,
              DOI 10.17487/RFC3325, November 2002,
              &lt;<a href="http://www.rfc-editor.org/info/rfc3325">http://www.rfc-editor.org/info/rfc3325</a>&gt;.

   [<a id="ref-RFC3326">RFC3326</a>]  Schulzrinne, H., Oran, D., and G. Camarillo, &quot;The Reason
              Header Field for the Session Initiation Protocol (SIP)&quot;,
              <a href="/doc/html/rfc3326">RFC 3326</a>, DOI 10.17487/RFC3326, December 2002,
              &lt;<a href="http://www.rfc-editor.org/info/rfc3326">http://www.rfc-editor.org/info/rfc3326</a>&gt;.

   [<a id="ref-RFC3966">RFC3966</a>]  Schulzrinne, H., &quot;The tel URI for Telephone Numbers&quot;,
              <a href="/doc/html/rfc3966">RFC 3966</a>, DOI 10.17487/RFC3966, December 2004,
              &lt;<a href="http://www.rfc-editor.org/info/rfc3966">http://www.rfc-editor.org/info/rfc3966</a>&gt;.

   [<a id="ref-RFC4235">RFC4235</a>]  Rosenberg, J., Schulzrinne, H., and R. Mahy, Ed., &quot;An
              INVITE-Initiated Dialog Event Package for the Session
              Initiation Protocol (SIP)&quot;, <a href="/doc/html/rfc4235">RFC 4235</a>,
              DOI 10.17487/RFC4235, November 2005,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4235">http://www.rfc-editor.org/info/rfc4235</a>&gt;.






<span class="grey">Ravindranath, et al.         Standards Track                   [Page 32]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-33" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


   [<a id="ref-RFC6341">RFC6341</a>]  Rehor, K., Ed., Portman, L., Ed., Hutton, A., and R. Jain,
              &quot;Use Cases and Requirements for SIP-Based Media Recording
              (SIPREC)&quot;, <a href="/doc/html/rfc6341">RFC 6341</a>, DOI 10.17487/RFC6341, August 2011,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6341">http://www.rfc-editor.org/info/rfc6341</a>&gt;.

   [<a id="ref-RFC7245">RFC7245</a>]  Hutton, A., Ed., Portman, L., Ed., Jain, R., and K. Rehor,
              &quot;An Architecture for Media Recording Using the Session
              Initiation Protocol&quot;, <a href="/doc/html/rfc7245">RFC 7245</a>, DOI 10.17487/RFC7245,
              May 2014, &lt;<a href="http://www.rfc-editor.org/info/rfc7245">http://www.rfc-editor.org/info/rfc7245</a>&gt;.

   [<a id="ref-SessionID">SessionID</a>]
              Jones, P., Salgueiro, G., Pearce, C., and P. Giralt,
              &quot;End-to-End Session Identification in IP-Based Multimedia
              Communication Networks&quot;, Work in Progress,
              <a href="/doc/html/draft-ietf-insipid-session-id-22">draft-ietf-insipid-session-id-22</a>, April 2016.

   [<a id="ref-UML">UML</a>]      Object Management Group, &quot;OMG Unified Modeling Language
              (UML)&quot;, 2011, &lt;<a href="http://www.omg.org/spec/UML/2.4/">http://www.omg.org/spec/UML/2.4/</a>&gt;.

































<span class="grey">Ravindranath, et al.         Standards Track                   [Page 33]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-34" ></span>
<span class="grey"><a href="/doc/html/rfc7865">RFC 7865</a>                 SIP Recording Metadata                 May 2016</span>


Acknowledgements

   Thanks to John Elwell, Henry Lum, Leon Portman, De Villiers de Wet,
   Andrew Hutton, Deepanshu Gautam, Charles Eckel, Muthu Arul Mozhi
   Perumal, Michael Benenson, Hadriel Kaplan, Brian Rosen, Scott Orton,
   Ofir Roth, Mary Barnes, Ken Rehor, Gonzalo Salgueiro, Yaron Pdut,
   Alissa Cooper, Stephen Farrell, and Ben Campbell for their valuable
   comments and inputs.

   Thanks to Joe Hildebrand, Peter Saint-Andre, and Matt Miller for
   helping in writing the XML schema, and to Martin Thomson for
   validating the XML schema and providing comments on the same.

Authors&#x27; Addresses

   Ram Mohan Ravindranath
   Cisco Systems
   Cessna Business Park
   Bangalore, Karnataka
   India

   Email: rmohanr@cisco.com


   Parthasarathi Ravindran
   Nokia Networks
   Bangalore, Karnataka
   India

   Email: partha@parthasarathi.co.in


   Paul Kyzivat
   Huawei
   Hudson, MA
   United States

   Email: pkyzivat@alum.mit.edu













Ravindranath, et al.         Standards Track                   [Page 34]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

