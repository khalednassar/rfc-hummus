<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc7094
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.34.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.34.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-iab-anycast-arch-implications/">
  <meta name="description" content="Architectural Considerations of IP Anycast (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.34.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.34.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgorange"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc7094.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc7094.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc7094.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc7094/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc7094/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/iab/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-iab-anycast-arch-implications@ietf.org?subject=draft-iab-anycast-arch-implications" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-iab-anycast-arch-implications-12.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-iab-anycast-arch-implications-12.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-iab-anycast-arch-implications-12.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-iab-anycast-arch-implications-12">draft-iab-anycast-arch-implications-12</a>               Informational</pre>
      </div>
    

    <div class="draftcontent">
    <pre>Internet Architecture Board (IAB)                           D. McPherson
Request for Comments: 7094                                Verisign, Inc.
Category: Informational                                          D. Oran
ISSN: 2070-1721                                            Cisco Systems
                                                               D. Thaler
                                                   Microsoft Corporation
                                                            E. Osterweil
                                                          Verisign, Inc.
                                                            January 2014


               <span class="h1">Architectural Considerations of IP Anycast</span>

Abstract

   This memo discusses architectural implications of IP anycast and
   provides some historical analysis of anycast use by various IETF
   protocols.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Architecture Board (IAB)
   and represents information that the IAB has deemed valuable to
   provide for permanent record.  It represents the consensus of the
   Internet Architecture Board (IAB).  Documents approved for
   publication by the IAB are not a candidate for any level of Internet
   Standard; see <a href="/doc/html/rfc5741#section-2">Section&nbsp;2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7094">http://www.rfc-editor.org/info/rfc7094</a>.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="/doc/html/bcp78">BCP 78</a> and the IETF Trust&#x27;s Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.





<span class="grey">McPherson, et al.             Informational                     [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


Table of Contents

   <a href="#section-1">1</a>. Overview ........................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. Background ......................................................<a href="#page-3">3</a>
      <a href="#section-2.1">2.1</a>. Anycast History ............................................<a href="#page-3">3</a>
      <a href="#section-2.2">2.2</a>. Anycast in IPv6 ............................................<a href="#page-6">6</a>
      <a href="#section-2.3">2.3</a>. DNS Anycast ................................................<a href="#page-6">6</a>
      <a href="#section-2.4">2.4</a>. <a href="/doc/html/bcp126">BCP 126</a> on Operation of Anycast Services ...................<a href="#page-8">8</a>
   <a href="#section-3">3</a>. Principles ......................................................<a href="#page-8">8</a>
      <a href="#section-3.1">3.1</a>. Layering and Resiliency ....................................<a href="#page-8">8</a>
      <a href="#section-3.2">3.2</a>. Anycast Addresses as Destinations ..........................<a href="#page-9">9</a>
      <a href="#section-3.3">3.3</a>. Anycast Addresses as Sources ..............................<a href="#page-10">10</a>
      <a href="#section-3.4">3.4</a>. Service Discovery .........................................<a href="#page-10">10</a>
   <a href="#section-4">4</a>. Analysis .......................................................<a href="#page-11">11</a>
      <a href="#section-4.1">4.1</a>. Regarding Widespread Anycast Use ..........................<a href="#page-11">11</a>
      <a href="#section-4.2">4.2</a>. Transport Implications ....................................<a href="#page-11">11</a>
      <a href="#section-4.3">4.3</a>. Stateful Firewalls, Middleboxes, and Anycast ..............<a href="#page-12">12</a>
      <a href="#section-4.4">4.4</a>. Security Considerations ...................................<a href="#page-12">12</a>
      <a href="#section-4.5">4.5</a>. Deployment Considerations .................................<a href="#page-15">15</a>
   <a href="#section-5">5</a>. Conclusions ....................................................<a href="#page-16">16</a>
   <a href="#section-6">6</a>. Acknowledgements ...............................................<a href="#page-16">16</a>
   <a href="#section-7">7</a>. Informative References .........................................<a href="#page-16">16</a>
   <a href="#appendix-A">Appendix A</a>. IAB Members at the Time of Approval ...................<a href="#page-21">21</a>

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Overview</span>

   IP anycast is a technique with a long legacy and interesting
   engineering challenges.  However, at its core, it is a relatively
   simple concept.  As described in <a href="/doc/html/bcp126">BCP 126</a> [<a href="/doc/html/rfc4786" title="&quot;Operation of Anycast Services&quot;">RFC4786</a>], the general form
   of IP anycast is the practice of making a particular Service Address
   available in multiple, discrete, autonomous locations, such that
   datagrams sent are routed to one of several available locations.

   IP anycast is used for at least one critical Internet service: that
   of the Domain Name System [<a href="/doc/html/rfc1035" title="&quot;Domain names - implementation and specification&quot;">RFC1035</a>] root servers.  By late 2007, at
   least 10 of the 13 root name servers were already using IP anycast
   [<a href="#ref-RSSAC29" title="&quot;RSSAC 29 Meeting Minutes&quot;">RSSAC29</a>].  Use of IP anycast is growing for other applications as
   well.  It has been deployed for over a decade for DNS resolution
   services and is currently used by several DNS Top Level Domain (TLD)
   operators.  IP anycast is also used for other services in operational
   environments, including Network Time Protocol (NTP) [<a href="/doc/html/rfc5905" title="&quot;Network Time Protocol Version 4: Protocol and Algorithms Specification&quot;">RFC5905</a>]
   services.

   Anycast addresses are syntactically indistinguishable from unicast
   addresses.  Anycast addressing is equivalent to that of unicast in
   multiple locations.  Destination-based routing does best-effort
   delivery of a packet to one interface among the set of interfaces
   asserting reachability for the address.  The expectation of delivery



<span class="grey">McPherson, et al.             Informational                     [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


   is to the &quot;closest&quot; instance as determined by unicast routing
   topology metric(s), and there is also a possibility that various
   load-balancing techniques (e.g., per-packet, per-microflow) may be
   used among multiple equal-cost routes to distribute load for an
   anycasted prefix.

   Unlike IP unicast, it is not considered an error to assert the same
   anycast address on multiple interfaces within the same or multiple
   systems.

   When IP anycast is employed, many pitfalls and subtleties exist with
   applications and transports as well as for routing configuration and
   operation.  In this document, we aim to capture many of the
   architectural implications of IP anycast.

   <a href="/doc/html/bcp126">BCP 126</a> [<a href="/doc/html/rfc4786" title="&quot;Operation of Anycast Services&quot;">RFC4786</a>] discusses several different deployment models with
   IP anycast.  Two additional distinctions beyond that document involve
   &quot;off-link anycast&quot; and &quot;on-link anycast&quot;.  &quot;Off-link anycast&quot; takes
   advantage of routing protocol preferences and the IP hop-by-hop
   destination-based forwarding paradigm in order to direct packets to
   the &quot;closest&quot; destination.  This is the traditional method of anycast
   largely considered in <a href="/doc/html/bcp126">BCP 126</a> [<a href="/doc/html/rfc4786" title="&quot;Operation of Anycast Services&quot;">RFC4786</a>] and can be used for IPv4 and
   IPv6.  &quot;On-link anycast&quot; is the formal support of anycast in the
   address resolution (duplicate address detection) protocol and is only
   standardized for IPv6, with the introduction of designated anycast
   addresses on the anycasted hosts, and the Override flag in Neighbor
   Discovery (ND) Neighbor Advertisements (NAs) [<a href="/doc/html/rfc4861" title="&quot;Neighbor Discovery for IP version 6 (IPv6)&quot;">RFC4861</a>].  There is no
   standardized mechanism for this in IPv4.

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  Background</span>

   As of this writing, the term &quot;anycast&quot; appears in 176 RFCs and 144
   active Internet-Drafts.  The following sections capture some of the
   key appearances and discussion of anycasting within the IETF over the
   years.

<span class="h3"><a class="selflink" id="section-2.1" href="#section-2.1">2.1</a>.  Anycast History</span>

   The first formal specification of anycast was provided in &quot;Host
   Anycasting Service&quot; [<a href="/doc/html/rfc1546" title="&quot;Host Anycasting Service&quot;">RFC1546</a>].  The authors of this document did a
   good job of capturing most of the issues that exist with IP anycast
   today.

   One of the first documented uses of anycast was in 1994 for a &quot;Video
   Registry&quot; experiment [<a href="#ref-IMR9401" title="&quot;INTERNET MONTHLY REPORT&quot;">IMR9401</a>].  In the experiment, a UDP query was
   transmitted to an anycasted address to locate the topologically
   closest &quot;supposedly equivalent network resource&quot;:




<span class="grey">McPherson, et al.             Informational                     [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


      A video resource (for example, a catalog server that lists
      available video clips) sends an anycast UDP datagram to locate the
      nearest video registry.  At most one registry responds with a
      unicast UDP datagram containing the registry&#x27;s IP address.  Said
      resource then opens a TCP connection to that [the received
      registry address] address and sends a request to register itself.
      Every 5 minutes or so, each registry multicasts to all other
      registries all of the resources it knows from local registration
      requests.  It also immediately announces newly registered
      resources.  Remotely registered resources not heard about for 20
      minutes are dropped.

   There is also discussion that ISPs began using anycast for DNS
   resolution services around the same time, although no public
   references to support this are available.

   In 1997, the IAB clarified that IPv4 anycast addresses were pure
   &quot;locators&quot; and could never serve as &quot;identifiers&quot; of hosts or
   interfaces [<a href="/doc/html/rfc2101" title="&quot;IPv4 Address Behaviour Today&quot;">RFC2101</a>].

   In 1998, the IAB conducted a routing workshop [<a href="/doc/html/rfc2902" title="&quot;Overview of the 1998 IAB Routing Workshop&quot;">RFC2902</a>].  Of the
   conclusions and output action items from the report, an Anycast
   section is contained in <a href="#section-2.10.3">Section 2.10.3</a>.  Specifically called out is
   the need to describe the advantages and disadvantages of anycast and
   the belief that local-scoped well-known anycast addresses will be
   useful to some applications.  In the subsequent section, an action
   item was outlined that suggested a BOF should be held to plan work on
   anycast, and if a working group forms, a paper on the advantages and
   the disadvantages of anycast should be included as part of the
   charter.

   As a result of the recommendation in [<a href="/doc/html/rfc2902" title="&quot;Overview of the 1998 IAB Routing Workshop&quot;">RFC2902</a>], an Anycast BOF
   [<a href="#ref-ANYCASTBOF">ANYCASTBOF</a>] was held at IETF 46 in November of 1999.  A number of
   uses for anycast were discussed.  No firm conclusion was reached
   regarding use of TCP with anycasted services.  However, it was
   observed that anycasting was useful for DNS, although it did
   introduce some new complexities.  The use of global anycast was not
   expected to scale (see <a href="#section-4.1">Section 4.1</a> below for more discussion) and,
   hence, was expected to be limited to a small number of key uses.

   In 2001, the Multicast and Anycast Group Membership [<a href="#ref-MAGMA" title="&quot;Multicast and Anycast Group Membership (MAGMA)&quot;">MAGMA</a>] WG was
   chartered to address host-to-router signaling, including initial
   authentication and access control issues for multicast and anycast
   group membership, but other aspects of anycast, including
   architecture and routing, were outside the group&#x27;s scope.






<span class="grey">McPherson, et al.             Informational                     [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


   Simple Network Time Protocol (SNTP) Version 4 [<a href="/doc/html/rfc2030" title="&quot;Simple Network Time Protocol (SNTP) Version 4 for IPv4, IPv6 and OSI&quot;">RFC2030</a>] defined how
   to use SNTP anycast for server discovery.  This was extended in
   [<a href="/doc/html/rfc4330" title="&quot;Simple Network Time Protocol (SNTP) Version 4 for IPv4, IPv6 and OSI&quot;">RFC4330</a>] as an NTP-specific &quot;manycast&quot; service, in which anycast was
   used for the discovery part.

   IPv6 defined some reserved subnet anycast addresses [<a href="/doc/html/rfc2526" title="&quot;Reserved IPv6 Subnet Anycast Addresses&quot;">RFC2526</a>] and
   assigned one to &quot;Mobile IPv6 Home-Agents&quot; [<a href="/doc/html/rfc3775" title="&quot;Mobility Support in IPv6&quot;">RFC3775</a>] (obsoleted by
   [<a href="/doc/html/rfc6275" title="&quot;Mobility Support in IPv6&quot;">RFC6275</a>]).

   The original IPv6 transition mechanism [<a href="/doc/html/rfc2893" title="&quot;Transition Mechanisms for IPv6 Hosts and Routers&quot;">RFC2893</a>] made use of IPv4
   anycast addresses as tunnel endpoints for IPv6 encapsulated in IPv4,
   but this was later removed [<a href="/doc/html/rfc4213" title="&quot;Basic Transition Mechanisms for IPv6 Hosts and Routers&quot;">RFC4213</a>].  The 6to4 tunneling protocol
   [<a href="/doc/html/rfc3056" title="&quot;Connection of IPv6 Domains via IPv4 Clouds&quot;">RFC3056</a>] was augmented by a 6to4 relay anycast prefix [<a href="/doc/html/rfc3068" title="&quot;An Anycast Prefix for 6to4 Relay Routers&quot;">RFC3068</a>] in a
   move aimed at simplifying the configuration of 6to4 routers.
   Incidentally, 6to4 deployment has shown a fair number of operational
   and security issues [<a href="/doc/html/rfc3964" title="&quot;Security Considerations for 6to4&quot;">RFC3964</a>] that result from using anycast as a
   discovery mechanism.  Specifically, one inference is that operational
   consideration is needed to ensure that anycast addresses get
   advertised and/or filtered in a way that produces the intended scope
   (e.g., only advertise a route for your 6to4 relay to Autonomous
   Systems (ASes) that conform to your own acceptable usage policy), an
   attribute that can easily become quite operationally expensive.

   In 2002, DNS&#x27; use of anycast was first specified in &quot;Distributing
   Authoritative Name Servers via Shared Unicast Addresses&quot; [<a href="/doc/html/rfc3258" title="&quot;Distributing Authoritative Name Servers via Shared Unicast Addresses&quot;">RFC3258</a>].
   It is notable that it used the term &quot;shared unicast address&quot; rather
   than &quot;anycast address&quot; for the service.  This distinction was made
   due to the IPv6 differentiation in the on-link model.  &quot;Shared
   unicast&quot; addresses are unicast (not multicast) in the IPv6 model and,
   therefore, support the off-link anycast model (described earlier) but
   not the on-link anycast model.  At the same time, site-local-scoped
   well-known addresses began being used for recursive resolvers
   [<a href="#ref-DNS-DISC" title="&quot;Well known site local unicast addresses for DNS resolver&quot;">DNS-DISC</a>], but this use was never standardized (see below in
   <a href="#section-3.4">Section 3.4</a> for more discussion).

   Anycast was used for routing to rendezvous points (RPs) for PIM
   [<a href="/doc/html/rfc4610" title="&quot;Anycast-RP Using Protocol Independent Multicast (PIM)&quot;">RFC4610</a>].

   &quot;Operation of Anycast Services&quot; <a href="/doc/html/bcp126">BCP 126</a> [<a href="/doc/html/rfc4786" title="&quot;Operation of Anycast Services&quot;">RFC4786</a>] deals with how the
   routing system interacts with anycast services and the operation of
   anycast services.

   &quot;Requirements for a Mechanism Identifying a Name Server Instance&quot;
   [<a href="/doc/html/rfc4892" title="&quot;Requirements for a Mechanism Identifying a Name Server Instance&quot;">RFC4892</a>] cites the use of anycast with DNS as a motivation to
   identify individual name server instances, and the Name Server ID
   (NSID) option was defined for this purpose [<a href="/doc/html/rfc5001" title="&quot;DNS Name Server Identifier (NSID) Option&quot;">RFC5001</a>].  One could view





<span class="grey">McPherson, et al.             Informational                     [Page 5]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-6" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


   the addition of NSID as an incarnation of locator and identifier
   separation (where the anycast address is a locator and the NSID is an
   identifier).

   The IAB&#x27;s &quot;Reflections on Internet Transparency&quot; [<a href="/doc/html/rfc4924" title="&quot;Reflections on Internet Transparency&quot;">RFC4924</a>] briefly
   mentions how violating transparency can also damage global services
   that use anycast.

<span class="h3"><a class="selflink" id="section-2.2" href="#section-2.2">2.2</a>.  Anycast in IPv6</span>

   Originally, the IPv6 addressing architecture [<a href="/doc/html/rfc1884" title="&quot;IP Version 6 Addressing Architecture&quot;">RFC1884</a>] [<a href="/doc/html/rfc2373" title="&quot;IP Version 6 Addressing Architecture&quot;">RFC2373</a>]
   [<a href="/doc/html/rfc3513" title="&quot;Internet Protocol Version 6 (IPv6) Addressing Architecture&quot;">RFC3513</a>] severely restricted the use of anycast addresses.  In
   particular, the architecture provided that anycast addresses must not
   be used as source addresses and must not be assigned to IPv6 hosts
   (i.e., only routers).  These restrictions were later lifted in 2006
   [<a href="/doc/html/rfc4291" title="&quot;IP Version 6 Addressing Architecture&quot;">RFC4291</a>].

   In fact, the more recent &quot;IPv6 Transition/Co-existence Security
   Considerations&quot; [<a href="/doc/html/rfc4942" title="&quot;IPv6 Transition/ Co-existence Security Considerations&quot;">RFC4942</a>] overview now recommends:

      To avoid exposing knowledge about the internal structure of the
      network, it is recommended that anycast servers now take advantage
      of the ability to return responses with the anycast address as the
      source address if possible.

   As discussed in the Overview, &quot;on-link anycast&quot; is employed expressly
   in IPv6 via ND NAs; see <a href="/doc/html/rfc4861#section-7.2.7">Section&nbsp;7.2.7 of [RFC4861]</a> for additional
   information.

<span class="h3"><a class="selflink" id="section-2.3" href="#section-2.3">2.3</a>.  DNS Anycast</span>

   &quot;Distributed Authoritative Name Servers via Shared Unicast Addresses&quot;
   [<a href="/doc/html/rfc3258" title="&quot;Distributing Authoritative Name Servers via Shared Unicast Addresses&quot;">RFC3258</a>] described how to reach authoritative name servers using
   multiple unicast addresses, each one configured on a different set of
   servers.  It stated in <a href="#section-2.3">Section 2.3</a>:

      This document presumes that the usual DNS failover methods are the
      only ones used to ensure reachability of the data for clients.  It
      does not advise that the routes be withdrawn in the case of
      failure; it advises instead that the DNS process shutdown so that
      servers on other addresses are queried.  This recommendation
      reflects a choice between performance and operational complexity.
      While it would be possible to have some process withdraw the route
      for a specific server instance when it is not available, there is
      considerable operational complexity involved in ensuring that this
      occurs reliably.  Given the existing DNS failover methods, the
      marginal improvement in performance will not be sufficient to
      justify the additional complexity for most uses.



<span class="grey">McPherson, et al.             Informational                     [Page 6]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-7" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


   In anycast more generally, most anycast benefits cannot be realized
   without route withdrawals, since traffic will continue to be directed
   to the link with the failed server.  When multiple unicast addresses
   are used with different sets of servers, a client can still fail over
   to using a different server address and, hence, a different set of
   servers.  There can still be reliability problems, however, when each
   set contains a failed server.  If all servers in the same set are on
   the same subnet, such problems could be minimized where address
   resolution within the subnet will cause traffic to go to an available
   server.

   Other assertions included:

   o  It asserted (as an advantage) that no routing changes were needed.

   o  It recommended stopping DNS processes rather than withdrawing
      routes to deal with failures, data synchronization issues, and
      failover, as provided in the quoted text above.  The spirit of
      this advice was that DNS resolvers may (indeed) reach out and
      query unavailable DNS name servers, but as their queries time out,
      they will elect to pin themselves to other server addresses and,
      hence, different servers.

   o  It argued that failure modes involving state were not serious,
      because:

      *  the vast majority of DNS queries are UDP

      *  large routing metric disparity among authoritative server
         instances would localize queries to a single instance for most
         clients

      *  when the resolver tries TCP and it breaks, the resolver will
         try to move to a different server address.  In order to ensure
         that this is possible, it is important that the DNS zone be
         configured with multiple server addresses for different sets of
         name servers.  The advice given in Section 3.3 of [<a href="#ref-DNS-DISC" title="&quot;Well known site local unicast addresses for DNS resolver&quot;">DNS-DISC</a>]
         describes, in more detail, why using multiple addresses is
         important.

   &quot;Unique Per-Node Origin ASNs for Globally Anycasted Services&quot;
   [<a href="/doc/html/rfc6382" title="&quot;Unique Origin Autonomous System Numbers (ASNs) per Node for Globally Anycasted Services&quot;">RFC6382</a>] makes recommendations regarding the use of per-node unique
   origin Autonomous System Numbers (ASNs) for globally anycasted
   critical infrastructure services in order to provide routing system
   discriminators for a given anycasted prefix.  The object was to allow
   network management and monitoring techniques, or other operational





<span class="grey">McPherson, et al.             Informational                     [Page 7]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-8" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


   mechanisms to employ this new origin AS as a discriminator in
   whatever manner fits their operating environment, either for
   detection or policy associated with a given anycasted node.

<span class="h3"><a class="selflink" id="section-2.4" href="#section-2.4">2.4</a>.  <a href="/doc/html/bcp126">BCP 126</a> on Operation of Anycast Services</span>

   &quot;Operation of Anycast Services&quot; <a href="/doc/html/bcp126">BCP 126</a> [<a href="/doc/html/rfc4786" title="&quot;Operation of Anycast Services&quot;">RFC4786</a>] was a product of
   the IETF&#x27;s GROW working group.  The primary design constraint
   considered was that routing &quot;be stable&quot; for significantly longer than
   a &quot;transaction time&quot;, where &quot;transaction time&quot; is loosely defined as
   &quot;a single interaction between a single client and a single server&quot;.
   It takes no position on what applications are suitable candidates for
   anycast usage.

   Furthermore, it views anycast service disruptions as an operational
   problem: &quot;Operators should be aware that, especially for long running
   flows, there are potential failure modes using anycast that are more
   complex than a simple &#x27;destination unreachable&#x27; failure using
   unicast&quot;.

   The document primarily deals with global Internet-wide services
   provided by anycast.  Where internal topology issues are discussed,
   they&#x27;re mostly regarding routing implications rather than application
   design implications.  <a href="/doc/html/bcp126">BCP 126</a> also views networks employing
   per-packet load balancing on equal cost paths as &quot;pathological&quot;.
   This was also discussed in [<a href="/doc/html/rfc2991" title="&quot;Multipath Issues in Unicast and Multicast Next-Hop Selection&quot;">RFC2991</a>].

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  Principles</span>

<span class="h3"><a class="selflink" id="section-3.1" href="#section-3.1">3.1</a>.  Layering and Resiliency</span>

   Preserving the integrity of a modular layered design for IP protocols
   on the Internet is critical to its continued success and flexibility.
   One such consideration is that of whether an application should have
   to adapt to changes in the routing system.

   Applications should make minimal assumptions about routing stability,
   just as they should make minimal assumptions about congestion and
   packet loss.  When designing applications, it would perhaps be safe
   to assume that the routing system may deliver each anycast packet to
   a different service instance, in any pattern, with temporal
   reordering being a not-so-rare phenomenon.

   Most stateful transport protocols (e.g., TCP), without modification,
   do not understand the properties of anycast; hence, they will fail
   probabilistically, but possibly catastrophically, when using anycast
   addresses in the presence of &quot;normal&quot; routing dynamics.
   Specifically, if datagrams associated with a given active transaction



<span class="grey">McPherson, et al.             Informational                     [Page 8]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-9" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


   are routed to a new anycasted end system and that end system lacks
   state data associated with the active transaction, the session will
   be reset; hence, it will need to be reinitiated.  As another example,
   different networks have different routing properties and therefore
   will experience problems under different conditions.  This can lead
   to a protocol working fine in, say, a test lab but not in the global
   Internet.

<span class="h3"><a class="selflink" id="section-3.2" href="#section-3.2">3.2</a>.  Anycast Addresses as Destinations</span>

   When an anycast address is used as a destination address, different
   packets with the same destination IP address may reach different
   destination hosts, even if the packets are generated by the same
   source host.  Anycast addresses are thus &quot;safe&quot; to use as destination
   addresses for an application if the following design points are all
   met:

   o  A request message or &quot;one shot&quot; message is self-contained in a
      single transport packet.

   o  A stateless transport (e.g., UDP) is used for the above.

   o  Replies are always sent to a unicast address; these can be
      multipacket since the unicast destination is presumed to be
      associated with a single &quot;stable&quot; end system and not an anycasted
      source address.  Note that this constrains the use of anycast as
      source addresses in request messages, since reply messages sent
      back to that address may reach a device that was not the source
      that initially triggered it.

   o  The server side of the application keeps no hard state across
      requests.

   o  Retries are idempotent; in addition to not assuming server state,
      they do not encode any assumptions about loss of requests versus
      loss of replies.

   It is noteworthy, though, that even under the above circumstances
   ICMP messages against packets with anycast source addresses may be
   routed to servers other than those expected.  In addition, Path
   Maximum Transmission Unit Discovery (PMTUD) can encounter
   complications when employed against anycast addresses, since
   iterations in the PMTU discovery process may have packets routed to
   different anycast service instances.







<span class="grey">McPherson, et al.             Informational                     [Page 9]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-10" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


<span class="h3"><a class="selflink" id="section-3.3" href="#section-3.3">3.3</a>.  Anycast Addresses as Sources</span>

   When an anycast address is used as a source address, the source
   address does not uniquely identify the source host; hence, replies
   might be sent to a different host.  As noted earlier, this concept is
   sometimes referred to (e.g., in [<a href="/doc/html/rfc3258" title="&quot;Distributing Authoritative Name Servers via Shared Unicast Addresses&quot;">RFC3258</a>]) as a &quot;shared unicast
   address&quot;.  Anycast addresses are &quot;safe&quot; to use as source addresses
   for an application if all of the following design points are met:

   o  No response message is generated by the receiver with the anycast
      source used as a destination unless the application has some
      private state synchronization that allows for the response message
      arriving at a different instance.

   o  The source anycast address is reachable via the interface address
      if unicast reverse path forwarding (RPF) [<a href="/doc/html/rfc4778" title="&quot;Operational Security Current Practices in Internet Service Provider Environments&quot;">RFC4778</a>] checking is on,
      or the service address is explicitly provisioned to bypass RPF
      checks.  In addition to the application defined in <a href="/doc/html/rfc4778#section-4.4.5">[RFC4778],
      Section&nbsp;4.4.5</a> of <a href="/doc/html/bcp126">BCP 126</a> [<a href="/doc/html/rfc4786" title="&quot;Operation of Anycast Services&quot;">RFC4786</a>] gives explicit consideration to
      RPF checks in anycasting operations.

<span class="h3"><a class="selflink" id="section-3.4" href="#section-3.4">3.4</a>.  Service Discovery</span>

   Applications able to tolerate an extra round-trip time (RTT) to learn
   a unicast destination address for multipacket exchanges might safely
   use anycast destination addresses for service instance discovery.
   For example, &quot;instance discovery&quot; messages are sent to an anycast
   destination address, and a reply is subsequently sent from the unique
   unicast source address of the interface that received the discovery
   message, or a reply is sent from the anycast source address of the
   interface that received the message, containing the unicast address
   to be used to invoke the service.  Only the latter of these will
   avoid potential NAT binding and stateful firewall issues.

   [<a id="ref-DNS-DISC">DNS-DISC</a>] discussed several options to address the need to configure
   DNS servers, including the use of a &quot;Well-known Anycast Address&quot; for
   recursive DNS service configuration in clients to ease configuration
   and allow those systems to ship with these well-known addresses
   configured &quot;from the beginning, as, say, factory default&quot;.  The
   proposal was later dropped, but the analysis was used in publishing
   [<a href="/doc/html/rfc4339" title="&quot;IPv6 Host Configuration of DNS Server Information Approaches&quot;">RFC4339</a>].

   After the final round of revisions to [<a href="#ref-DNS-DISC" title="&quot;Well known site local unicast addresses for DNS resolver&quot;">DNS-DISC</a>] was made, [<a href="/doc/html/rfc4339" title="&quot;IPv6 Host Configuration of DNS Server Information Approaches&quot;">RFC4339</a>]
   was published with a very similar focus and overlapping content.  The
   difference was that the writing in [<a href="/doc/html/rfc4339" title="&quot;IPv6 Host Configuration of DNS Server Information Approaches&quot;">RFC4339</a>] focused on analysis,
   while [<a href="#ref-DNS-DISC" title="&quot;Well known site local unicast addresses for DNS resolver&quot;">DNS-DISC</a>] covered both the analysis and a specific proposal.
   The proposal details were removed in what became [<a href="/doc/html/rfc4339" title="&quot;IPv6 Host Configuration of DNS Server Information Approaches&quot;">RFC4339</a>] although
   <a href="#section-3.3">Section 3.3</a> of that RFC still discusses the approach of using a



<span class="grey">McPherson, et al.             Informational                    [Page 10]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-11" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


   well-known anycast address in this scenario.  During publication, the
   IESG requested that the following &quot;IESG Note&quot; be contained in the
   document:

      This document describes three different approaches for the
      configuration of DNS name resolution server information in IPv6
      hosts.

      There is not an IETF consensus on which approach is preferred.
      The analysis in this document was developed by the proponents for
      each approach and does not represent an IETF consensus.

      The &#x27;RA option&#x27; and &#x27;Well-known anycast&#x27; approaches described in
      this document are not standardized.  Consequently the analysis for
      these approaches might not be completely applicable to any
      specific proposal that might be proposed in the future.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Analysis</span>

<span class="h3"><a class="selflink" id="section-4.1" href="#section-4.1">4.1</a>.  Regarding Widespread Anycast Use</span>

   Widespread use of anycast for global Internet-wide services or
   inter-domain services has some scaling challenges.  Similar in ways
   to multicast, each service generates at least one unique route in the
   global BGP routing system.  As a result, additional anycast instances
   result in additional paths for a given prefix, which scales
   super-linearly as a function of denseness of inter-domain
   interconnection within the routing system (i.e., more paths result in
   more resources, more network interconnections result in more paths).

   This is why the Anycast BOF concluded that &quot;the use of global anycast
   addresses was not expected to scale and hence was expected to be
   limited to a small number of key uses&quot;.

   However, one interesting note is that multiple anycast services can
   share a route if they are all located in a single announced prefix
   and if all the servers of all the services are always collocated.  If
   the announced prefix is aggregated differently in different locations
   though, longest-match routing might result in some anycast locations
   being unreachable.  Hence, extra precaution must be taken when
   aggregating prefixes used by anycast services.

<span class="h3"><a class="selflink" id="section-4.2" href="#section-4.2">4.2</a>.  Transport Implications</span>

   UDP is the &quot;lingua franca&quot; for anycast today.  Stateful transports
   could be enhanced to be more anycast friendly.  This was anticipated
   in Host Anycasting Services [<a href="/doc/html/rfc1546" title="&quot;Host Anycasting Service&quot;">RFC1546</a>], specifically:




<span class="grey">McPherson, et al.             Informational                    [Page 11]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-12" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


      The solution to this problem is to only permit anycast addresses
      as the remote address of a TCP SYN segment (without the ACK bit
      set).  A TCP can then initiate a connection to an anycast address.
      When the SYN-ACK is sent back by the host that received the
      anycast segment, the initiating TCP should replace the anycast
      address of its peer, with the address of the host returning the
      SYN-ACK.  (The initiating TCP can recognize the connection for
      which the SYN-ACK is destined by treating the anycast address as a
      wildcard address, which matches any incoming SYN-ACK segment with
      the correct destination port and address and source port, provided
      the SYN-ACK&#x27;s full address, including source address, does not
      match another connection and the sequence numbers in the SYN-ACK
      are correct.)  This approach ensures that a TCP, after receiving
      the SYN-ACK is always communicating with only one host.

   The reason for such considerations can be illustrated through an
   example: one operationally observed shortcoming of using the
   Transmission Control Protocol (TCP) [<a href="/doc/html/rfc0793" title="&quot;Transmission Control Protocol&quot;">RFC0793</a>] and anycast nodes in
   DNS is that even during the TCP connection establishment, IP control
   packets from a DNS client may initially be routed to one anycast
   instance, but subsequent IP packets may be delivered to a different
   anycast instance if (for example) a route has changed.  In such a
   case, the TCP connection will likely elicit a connection reset but
   will certainly result in the disruption of the connection.

   Multi-address transports (e.g., SCTP) might be more amenable to such
   extensions than TCP.

   The features needed for address discovery when doing multihoming in
   the transport layer are similar to those needed to support anycast.

<span class="h3"><a class="selflink" id="section-4.3" href="#section-4.3">4.3</a>.  Stateful Firewalls, Middleboxes, and Anycast</span>

   Middleboxes (e.g., NATs) and stateful firewalls cause problems when
   used in conjunction with some ways to use anycast.  In particular, a
   server-side transition from an anycast source IP address to a unique
   unicast address may require new or additional session state, and this
   may not exist in the middlebox, as discussed previously in
   <a href="#section-3.4">Section 3.4</a>.

<span class="h3"><a class="selflink" id="section-4.4" href="#section-4.4">4.4</a>.  Security Considerations</span>

   Anycast is often deployed to mitigate or at least localize the
   effects of distributed denial-of-service (DDoS) attacks.  For
   example, with the Netgear NTP fiasco [<a href="/doc/html/rfc4085" title="&quot;Embedding Globally-Routable Internet Addresses Considered Harmful&quot;">RFC4085</a>] anycast was used in a
   distributed sinkhole model [<a href="/doc/html/rfc3882" title="&quot;Configuring BGP to Block Denial-of-Service Attacks&quot;">RFC3882</a>] to mitigate the effects of
   embedded globally routed Internet addresses in network elements.




<span class="grey">McPherson, et al.             Informational                    [Page 12]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-13" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


   &quot;Internet Denial-of-Service Considerations&quot; [<a href="/doc/html/rfc4732" title="&quot;Internet Denial-of- Service Considerations&quot;">RFC4732</a>] notes that: &quot;A
   number of the root nameservers have since been replicated using
   anycast to further improve their resistance to DoS&quot;.

   &quot;Operation of Anycast Services&quot; <a href="/doc/html/bcp126">BCP 126</a> [<a href="/doc/html/rfc4786" title="&quot;Operation of Anycast Services&quot;">RFC4786</a>] cites DoS
   mitigation, constraining DoS to localized regions, and identifying
   attack sources using spoofed addresses as some motivations to deploy
   services using anycast.  Multiple anycast service instances such as
   those used by the root name servers also add resiliency when network
   partitioning occurs (e.g., as the result of transoceanic fiber cuts
   or natural disasters).

   When using anycast, care must be taken not to simply withdraw an
   anycast route in the presence of a sustained DoS attack, since the
   result would simply move the attack to another service instance,
   potentially causing a cascaded failure.  Anycast adds resiliency when
   such an attack is instead constrained to a single service instance.

   It should be noted that there is a significant man-in-the-middle
   (MITM) exposure in either variant of anycast discovery (see
   <a href="#section-3.4">Section 3.4</a>) that, in many applications, may necessitate the need for
   end-to-end security models (e.g., using IPsec [<a href="/doc/html/rfc6071" title="&quot;IP Security (IPsec) and Internet Key Exchange (IKE) Document Roadmap&quot;">RFC6071</a>] or even
   DNSSEC [<a href="/doc/html/rfc4033" title="&quot;DNS Security Introduction and Requirements&quot;">RFC4033</a>]) that enable end systems to authenticate one
   another, or the data itself.

   However, when considering the above suggestion of enabling end
   systems to authenticate each other, a potential complication can
   arise.  If the service nodes of an anycast deployment are
   administered by separate authorities, any server-side authentication
   credentials that are used must (necessarily) be shared across the
   administrative boundaries in the anycast deployment.  This would
   likely also be the case with Secure Neighbor Discovery, described in
   [<a href="/doc/html/rfc5909" title="&quot;Securing Neighbor Discovery Proxy: Problem Statement&quot;">RFC5909</a>].

   Furthermore, as discussed earlier in this document, operational
   consideration needs to be given to ensure that anycast addresses get
   advertised and/or filtered in a way that produces intended scope (for
   example, only advertise a route to your 6to4 relay to ASes that
   conform to your own Acceptable Use Policy (AUP)).  This seems to be
   operationally expensive, and is often vulnerable to errors outside of
   the local routing domain, in particular when anycasted services are
   deployed with the intent to scope associated announcements within
   some local or regional boundary.

   As previously discussed, [<a href="/doc/html/rfc6382" title="&quot;Unique Origin Autonomous System Numbers (ASNs) per Node for Globally Anycasted Services&quot;">RFC6382</a>] makes recommendations regarding
   the use of per-node unique origin ASNs for globally anycasted
   critical infrastructure services in order to provide routing system
   discriminators for a given anycasted prefix.  Network management and



<span class="grey">McPherson, et al.             Informational                    [Page 13]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-14" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


   monitoring techniques, or other operational mechanisms, may then
   employ this new discriminator in whatever manner fits their operating
   environment, for either detection or policy associated with a given
   anycasted node.

   Moreover, the use of per-node unique origin ASNs has the additional
   benefit of overcoming complications that might arise with the
   potential deployment of the Resource Public Key Infrastructure (RPKI)
   [<a href="/doc/html/rfc6480" title="&quot;An Infrastructure to Support Secure Internet Routing&quot;">RFC6480</a>].  Without per-node unique origin ASNs, the cryptographic
   certificates needed to attest to the Route Origin Authorizations
   (ROAs) of a multi-administrative deployment of anycast would need to
   be shared.  However, if each service instance has a separate ASN,
   then those ASNs can be managed separately in the RPKI.

   Unlike multicast (but like unicast), anycast allows traffic stealing.
   That is, with multicast, joining a multicast group doesn&#x27;t prevent
   anyone else who was receiving the traffic from continuing to receive
   the traffic.  With anycast, adding an anycasted node to the routing
   system can prevent a previous recipient from continuing to receive
   traffic because it may now be delivered to the new node instead.  As
   such, if an unauthorized anycast node can inject a route into the
   network, or be resolved using ARP/Neighbor Discovery on a link with
   an authorized anycast node, traffic can be diverted thereby
   triggering DoS or other attacks.  <a href="/doc/html/bcp126#section-6.3">Section&nbsp;6.3 of BCP 126</a> [<a href="/doc/html/rfc4786" title="&quot;Operation of Anycast Services&quot;">RFC4786</a>]
   provides expanded discussion on &quot;Service Hijacking&quot; and &quot;traffic
   stealing&quot;, and [<a href="#ref-FanInfocom13">FanInfocom13</a>] discusses measured instances of anycast
   nodes and &quot;benign masquerading or hostile hijacking of anycast
   services&quot;, by unauthorized nodes.

   Unlike unicast (but like multicast), the desire is to allow
   applications to cause route injection.  In multicast, one often
   allows arbitrary applications on hosts to join multicast groups,
   resulting in multicast routing state.  Trying to apply that same
   model to anycast would present new security concerns, which is why
   [<a href="#ref-MAGMA" title="&quot;Multicast and Anycast Group Membership (MAGMA)&quot;">MAGMA</a>] only got so far.  The security concerns include:

   1.  Allowing route injection can cause DOS to a legitimate address
       owner.

   2.  Allowing route injection consumes routing resources and can hence
       cause DOS to the routing system and impact legitimate
       communications as a result.

   These are two of the core issues that were part of the discussion
   during [<a href="/doc/html/rfc1884" title="&quot;IP Version 6 Addressing Architecture&quot;">RFC1884</a>], the [<a href="#ref-ANYCASTBOF">ANYCASTBOF</a>], and the MAGMA [<a href="#ref-MAGMA" title="&quot;Multicast and Anycast Group Membership (MAGMA)&quot;">MAGMA</a>] chartering.

   Additional security considerations are scattered throughout the list
   of references provided herein.



<span class="grey">McPherson, et al.             Informational                    [Page 14]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-15" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


<span class="h3"><a class="selflink" id="section-4.5" href="#section-4.5">4.5</a>.  Deployment Considerations</span>

   <a href="/doc/html/bcp126">BCP 126</a> [<a href="/doc/html/rfc4786" title="&quot;Operation of Anycast Services&quot;">RFC4786</a>] provides some very solid guidance related to
   operations of anycasted services and, in particular, the operations
   of DNS.

   This document covers issues associated with the architectural
   implications of anycast.  This document does not address, in any
   depth, the fact that there are deployed services with TCP transport
   using anycast today.  Evidence exists to suggest that such practice
   is not &quot;safe&quot; in the traditional and architectural sense (as
   described in <a href="#section-4.2">Section 4.2</a>).  These sorts of issues are indeed
   relative, and we recognize sometimes unpredictability in the routing
   system beyond the local administrative domain can be manageable.
   That is, despite the inherent architectural problems in the use of
   anycast with stateful transport and connection-oriented protocols,
   there is expanding deployment (e.g., for content distribution
   networks) and situations exist where it may make sense (e.g., such as
   with service discovery, short-lived transactions, or in cases where
   dynamically directing traffic to topologically optimal service
   instances is required).  In general, operators should consider the
   content and references provided herein and evaluate the benefits and
   implications of anycast in their specific environments and
   applications.

   In addition, (as noted in <a href="#section-2.3">Section 2.3</a>) the issue of whether to
   withdraw anycast routes when there is a service failure is only
   briefly broached in [<a href="/doc/html/rfc3258" title="&quot;Distributing Authoritative Name Servers via Shared Unicast Addresses&quot;">RFC3258</a>].  The advice given is that routes
   should not be withdrawn, in order to reduce operational complexity.
   However, the issue of route advertisements and service outages
   deserves greater attention.

   There is an inherent trade-off that exists between the operational
   complexity of matching service outages with anycast route
   withdrawals, and allowing anycast routes to persist for services that
   are no longer available.  [<a href="/doc/html/rfc3258" title="&quot;Distributing Authoritative Name Servers via Shared Unicast Addresses&quot;">RFC3258</a>] maintains that DNS&#x27; inherent
   failure recovery mechanism is sufficient to overcome failed nodes,
   but even this advice enshrines the notion that these decisions are
   both application-specific and subject to the operational needs of
   each deployment.  For example, the routing system plays a larger role
   in DNS when services are anycast.  Therefore, operational
   consideration must be given to the fact that relying on anycast for
   DNS deployment optimizations means that there are operational trade-
   offs related to keeping route advertisements (and withdrawals)
   symmetric with service availability.  For example, in order to ensure
   that the DNS resolvers in a failed anycast instance&#x27;s catchment
   [<a href="/doc/html/rfc4786" title="&quot;Operation of Anycast Services&quot;">RFC4786</a>] are able to fail over and reach a non-failed catchment, a
   route withdrawal is almost certainly required.  On the other hand,



<span class="grey">McPherson, et al.             Informational                    [Page 15]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-16" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


   instability of a DNS process that triggers frequent route
   advertisement and withdrawal might result in suppression of
   legitimate paths to available nodes, e.g., as a result of route flap
   damping [<a href="/doc/html/rfc2439" title="&quot;BGP Route Flap Damping&quot;">RFC2439</a>].

   Rather than prescribing advice that attempts to befit all situations,
   it should simply be recognized that when using anycast with network
   services that provide redundancy or resilience capabilities at other
   layers of the protocol stack, operators should carefully consider the
   optimal layer(s) at which to provide said functions.

   As noted in <a href="#section-2.3">Section 2.3</a>, use of anycast within a subnet does not
   necessarily suffer from the potential issues with route withdrawals.
   As such, use of anycast to reach servers that reside in the same
   subnet can be made more reliable than use of anycast to reach
   topologically disparate server instances.  Within a subnet, however,
   care must be taken as stated in <a href="/doc/html/rfc4862#section-5.4">Section&nbsp;5.4 of [RFC4862]</a>, &quot;Duplicate
   Address Detection MUST NOT be performed on anycast addresses&quot;; hence,
   the servers must be configured appropriately.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  Conclusions</span>

   In summary, operators and application vendors alike should consider
   the benefits and implications of anycast in their specific
   environments and applications and also give forward consideration to
   how new network protocols and application functions may take
   advantage of anycast or how they may be negatively impacted if
   anycasting is employed.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  Acknowledgements</span>

   Many thanks to Kurtis Lindqvist for his early review and feedback on
   this document.  Thanks to Brian Carpenter, Alfred Hoenes, and Joe
   Abley for their usual careful review and feedback, as well as Mark
   Smith, Lixia Zhang, Stephane Bortzmeyer, Masataka Ohta, and S.
   Moonesamy for their detailed reviews.  Helpful feedback was also
   received from others including Edward Lewis, Jean-Michel Combes,
   Wolfgang Nagele, Mark Townsley, and Abdussalam Baryun.

<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>.  Informative References</span>

   [<a id="ref-ANYCASTBOF">ANYCASTBOF</a>]
              Deering, S., &quot;IAB Anycast BOF Announcement&quot;, October 1999,
              &lt;<a href="http://www.ietf.org/mail-archive/web/ietf/current/msg11182.html">http://www.ietf.org/mail-archive/web/ietf/current/</a>
              <a href="http://www.ietf.org/mail-archive/web/ietf/current/msg11182.html">msg11182.html</a>&gt;.






<span class="grey">McPherson, et al.             Informational                    [Page 16]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-17" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


   [<a id="ref-DNS-DISC">DNS-DISC</a>] Durand, A., Hagino, J., and D. Thaler, &quot;Well known site
              local unicast addresses for DNS resolver&quot;, Work in
              Progress, September 2002.

   [<a id="ref-FanInfocom13">FanInfocom13</a>]
              Fan, X., Heidemann, J., and R. Govindan, &quot;Evaluating
              Anycast in the Domain Name System&quot;, Proceedings of the
              IEEE Infocom 2013, April 2013.

   [<a id="ref-IMR9401">IMR9401</a>]  RFC Editor, &quot;INTERNET MONTHLY REPORT&quot;, January 1994,
              &lt;<a href="ftp://ftp.rfc-editor.org/in-notes/museum/imr/imr9401.txt">ftp://ftp.rfc-editor.org/in-notes/museum/imr/</a>
              <a href="ftp://ftp.rfc-editor.org/in-notes/museum/imr/imr9401.txt">imr9401.txt</a>&gt;.

   [<a id="ref-MAGMA">MAGMA</a>]    MAGMA (concluded), &quot;Multicast and Anycast Group Membership
              (MAGMA)&quot;, April 2006,
              &lt;<a href="http://www.ietf.org/wg/concluded/magma">http://www.ietf.org/wg/concluded/magma</a>&gt;.

   [<a id="ref-RFC0793">RFC0793</a>]  Postel, J., &quot;Transmission Control Protocol&quot;, STD 7, <a href="/doc/html/rfc793">RFC</a>
              <a href="/doc/html/rfc793">793</a>, September 1981.

   [<a id="ref-RFC1035">RFC1035</a>]  Mockapetris, P., &quot;Domain names - implementation and
              specification&quot;, STD 13, <a href="/doc/html/rfc1035">RFC 1035</a>, November 1987.

   [<a id="ref-RFC1546">RFC1546</a>]  Partridge, C., Mendez, T., and W. Milliken, &quot;Host
              Anycasting Service&quot;, <a href="/doc/html/rfc1546">RFC 1546</a>, November 1993.

   [<a id="ref-RFC1884">RFC1884</a>]  Hinden, R. and S. Deering, &quot;IP Version 6 Addressing
              Architecture&quot;, <a href="/doc/html/rfc1884">RFC 1884</a>, December 1995.

   [<a id="ref-RFC2030">RFC2030</a>]  Mills, D., &quot;Simple Network Time Protocol (SNTP) Version 4
              for IPv4, IPv6 and OSI&quot;, <a href="/doc/html/rfc2030">RFC 2030</a>, October 1996.

   [<a id="ref-RFC2101">RFC2101</a>]  Carpenter, B., Crowcroft, J., and Y. Rekhter, &quot;IPv4
              Address Behaviour Today&quot;, <a href="/doc/html/rfc2101">RFC 2101</a>, February 1997.

   [<a id="ref-RFC2373">RFC2373</a>]  Hinden, R. and S. Deering, &quot;IP Version 6 Addressing
              Architecture&quot;, <a href="/doc/html/rfc2373">RFC 2373</a>, July 1998.

   [<a id="ref-RFC2439">RFC2439</a>]  Villamizar, C., Chandra, R., and R. Govindan, &quot;BGP Route
              Flap Damping&quot;, <a href="/doc/html/rfc2439">RFC 2439</a>, November 1998.

   [<a id="ref-RFC2526">RFC2526</a>]  Johnson, D. and S. Deering, &quot;Reserved IPv6 Subnet Anycast
              Addresses&quot;, <a href="/doc/html/rfc2526">RFC 2526</a>, March 1999.

   [<a id="ref-RFC2893">RFC2893</a>]  Gilligan, R. and E. Nordmark, &quot;Transition Mechanisms for
              IPv6 Hosts and Routers&quot;, <a href="/doc/html/rfc2893">RFC 2893</a>, August 2000.





<span class="grey">McPherson, et al.             Informational                    [Page 17]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-18" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


   [<a id="ref-RFC2902">RFC2902</a>]  Deering, S., Hares, S., Perkins, C., and R. Perlman,
              &quot;Overview of the 1998 IAB Routing Workshop&quot;, <a href="/doc/html/rfc2902">RFC 2902</a>,
              August 2000.

   [<a id="ref-RFC2991">RFC2991</a>]  Thaler, D. and C. Hopps, &quot;Multipath Issues in Unicast and
              Multicast Next-Hop Selection&quot;, <a href="/doc/html/rfc2991">RFC 2991</a>, November 2000.

   [<a id="ref-RFC3056">RFC3056</a>]  Carpenter, B. and K. Moore, &quot;Connection of IPv6 Domains
              via IPv4 Clouds&quot;, <a href="/doc/html/rfc3056">RFC 3056</a>, February 2001.

   [<a id="ref-RFC3068">RFC3068</a>]  Huitema, C., &quot;An Anycast Prefix for 6to4 Relay Routers&quot;,
              <a href="/doc/html/rfc3068">RFC 3068</a>, June 2001.

   [<a id="ref-RFC3258">RFC3258</a>]  Hardie, T., &quot;Distributing Authoritative Name Servers via
              Shared Unicast Addresses&quot;, <a href="/doc/html/rfc3258">RFC 3258</a>, April 2002.

   [<a id="ref-RFC3513">RFC3513</a>]  Hinden, R. and S. Deering, &quot;Internet Protocol Version 6
              (IPv6) Addressing Architecture&quot;, <a href="/doc/html/rfc3513">RFC 3513</a>, April 2003.

   [<a id="ref-RFC3775">RFC3775</a>]  Johnson, D., Perkins, C., and J. Arkko, &quot;Mobility Support
              in IPv6&quot;, <a href="/doc/html/rfc3775">RFC 3775</a>, June 2004.

   [<a id="ref-RFC3882">RFC3882</a>]  Turk, D., &quot;Configuring BGP to Block Denial-of-Service
              Attacks&quot;, <a href="/doc/html/rfc3882">RFC 3882</a>, September 2004.

   [<a id="ref-RFC3964">RFC3964</a>]  Savola, P. and C. Patel, &quot;Security Considerations for
              6to4&quot;, <a href="/doc/html/rfc3964">RFC 3964</a>, December 2004.

   [<a id="ref-RFC4033">RFC4033</a>]  Arends, R., Austein, R., Larson, M., Massey, D., and S.
              Rose, &quot;DNS Security Introduction and Requirements&quot;, <a href="/doc/html/rfc4033">RFC</a>
              <a href="/doc/html/rfc4033">4033</a>, March 2005.

   [<a id="ref-RFC4085">RFC4085</a>]  Plonka, D., &quot;Embedding Globally-Routable Internet
              Addresses Considered Harmful&quot;, <a href="/doc/html/bcp105">BCP 105</a>, <a href="/doc/html/rfc4085">RFC 4085</a>, June
              2005.

   [<a id="ref-RFC4213">RFC4213</a>]  Nordmark, E. and R. Gilligan, &quot;Basic Transition Mechanisms
              for IPv6 Hosts and Routers&quot;, <a href="/doc/html/rfc4213">RFC 4213</a>, October 2005.

   [<a id="ref-RFC4291">RFC4291</a>]  Hinden, R. and S. Deering, &quot;IP Version 6 Addressing
              Architecture&quot;, <a href="/doc/html/rfc4291">RFC 4291</a>, February 2006.

   [<a id="ref-RFC4330">RFC4330</a>]  Mills, D., &quot;Simple Network Time Protocol (SNTP) Version 4
              for IPv4, IPv6 and OSI&quot;, <a href="/doc/html/rfc4330">RFC 4330</a>, January 2006.

   [<a id="ref-RFC4339">RFC4339</a>]  Jeong, J., &quot;IPv6 Host Configuration of DNS Server
              Information Approaches&quot;, <a href="/doc/html/rfc4339">RFC 4339</a>, February 2006.




<span class="grey">McPherson, et al.             Informational                    [Page 18]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-19" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


   [<a id="ref-RFC4610">RFC4610</a>]  Farinacci, D. and Y. Cai, &quot;Anycast-RP Using Protocol
              Independent Multicast (PIM)&quot;, <a href="/doc/html/rfc4610">RFC 4610</a>, August 2006.

   [<a id="ref-RFC4732">RFC4732</a>]  Handley, M., Rescorla, E., and IAB, &quot;Internet Denial-of-
              Service Considerations&quot;, <a href="/doc/html/rfc4732">RFC 4732</a>, December 2006.

   [<a id="ref-RFC4778">RFC4778</a>]  Kaeo, M., &quot;Operational Security Current Practices in
              Internet Service Provider Environments&quot;, <a href="/doc/html/rfc4778">RFC 4778</a>, January
              2007.

   [<a id="ref-RFC4786">RFC4786</a>]  Abley, J. and K. Lindqvist, &quot;Operation of Anycast
              Services&quot;, <a href="/doc/html/bcp126">BCP 126</a>, <a href="/doc/html/rfc4786">RFC 4786</a>, December 2006.

   [<a id="ref-RFC4861">RFC4861</a>]  Narten, T., Nordmark, E., Simpson, W., and H. Soliman,
              &quot;Neighbor Discovery for IP version 6 (IPv6)&quot;, <a href="/doc/html/rfc4861">RFC 4861</a>,
              September 2007.

   [<a id="ref-RFC4862">RFC4862</a>]  Thomson, S., Narten, T., and T. Jinmei, &quot;IPv6 Stateless
              Address Autoconfiguration&quot;, <a href="/doc/html/rfc4862">RFC 4862</a>, September 2007.

   [<a id="ref-RFC4892">RFC4892</a>]  Woolf, S. and D. Conrad, &quot;Requirements for a Mechanism
              Identifying a Name Server Instance&quot;, <a href="/doc/html/rfc4892">RFC 4892</a>, June 2007.

   [<a id="ref-RFC4924">RFC4924</a>]  Aboba, B. and E. Davies, &quot;Reflections on Internet
              Transparency&quot;, <a href="/doc/html/rfc4924">RFC 4924</a>, July 2007.

   [<a id="ref-RFC4942">RFC4942</a>]  Davies, E., Krishnan, S., and P. Savola, &quot;IPv6 Transition/
              Co-existence Security Considerations&quot;, <a href="/doc/html/rfc4942">RFC 4942</a>, September
              2007.

   [<a id="ref-RFC5001">RFC5001</a>]  Austein, R., &quot;DNS Name Server Identifier (NSID) Option&quot;,
              <a href="/doc/html/rfc5001">RFC 5001</a>, August 2007.

   [<a id="ref-RFC5905">RFC5905</a>]  Mills, D., Martin, J., Burbank, J., and W. Kasch, &quot;Network
              Time Protocol Version 4: Protocol and Algorithms
              Specification&quot;, <a href="/doc/html/rfc5905">RFC 5905</a>, June 2010.

   [<a id="ref-RFC5909">RFC5909</a>]  Combes, J-M., Krishnan, S., and G. Daley, &quot;Securing
              Neighbor Discovery Proxy: Problem Statement&quot;, <a href="/doc/html/rfc5909">RFC 5909</a>,
              July 2010.

   [<a id="ref-RFC6071">RFC6071</a>]  Frankel, S. and S. Krishnan, &quot;IP Security (IPsec) and
              Internet Key Exchange (IKE) Document Roadmap&quot;, <a href="/doc/html/rfc6071">RFC 6071</a>,
              February 2011.

   [<a id="ref-RFC6275">RFC6275</a>]  Perkins, C., Johnson, D., and J. Arkko, &quot;Mobility Support
              in IPv6&quot;, <a href="/doc/html/rfc6275">RFC 6275</a>, July 2011.




<span class="grey">McPherson, et al.             Informational                    [Page 19]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-20" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


   [<a id="ref-RFC6382">RFC6382</a>]  McPherson, D., Donnelly, R., and F. Scalzo, &quot;Unique Origin
              Autonomous System Numbers (ASNs) per Node for Globally
              Anycasted Services&quot;, <a href="/doc/html/bcp169">BCP 169</a>, <a href="/doc/html/rfc6382">RFC 6382</a>, October 2011.

   [<a id="ref-RFC6480">RFC6480</a>]  Lepinski, M. and S. Kent, &quot;An Infrastructure to Support
              Secure Internet Routing&quot;, <a href="/doc/html/rfc6480">RFC 6480</a>, February 2012.

   [<a id="ref-RSSAC29">RSSAC29</a>]  &quot;RSSAC 29 Meeting Minutes&quot;, December 2007,
              &lt;<a href="http://www.icann.org/en/groups/rssac/meetings/rssac-29-en.pdf">http://www.icann.org/en/groups/rssac/meetings/</a>
              <a href="http://www.icann.org/en/groups/rssac/meetings/rssac-29-en.pdf">rssac-29-en.pdf</a>&gt;.









































<span class="grey">McPherson, et al.             Informational                    [Page 20]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-21" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


<span class="h2"><a class="selflink" id="appendix-A" href="#appendix-A">Appendix A</a>.  IAB Members at the Time of Approval</span>

   Bernard Aboba
   Jari Arkko
   Marc Blanchet
   Ross Callon
   Alissa Cooper
   Joel Halpern
   Russ Housley
   Eliot Lear
   Xing Li
   Erik Nordmark
   Andrew Sullivan
   Dave Thaler
   Hannes Tschofenig




































<span class="grey">McPherson, et al.             Informational                    [Page 21]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-22" ></span>
<span class="grey"><a href="/doc/html/rfc7094">RFC 7094</a>            Arch Considerations of IP Anycast       January 2014</span>


Authors&#x27; Addresses

   Danny McPherson
   Verisign, Inc.
   12061 Bluemont Way
   Reston, VA
   USA

   EMail: dmcpherson@verisign.com


   Dave Oran
   Cisco Systems
   USA

   EMail: oran@cisco.com


   Dave Thaler
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA
   USA

   EMail: dthaler@microsoft.com


   Eric Osterweil
   Verisign, Inc.
   12061 Bluemont Way
   Reston, VA
   USA

   EMail: eosterweil@verisign.com

















McPherson, et al.             Informational                    [Page 22]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

