<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc2469
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.34.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.34.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-narten-canonical-ordering/">
  <meta name="description" content="A Caution On The Canonical Ordering Of Link-Layer Addresses (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.34.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.34.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgorange"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc2469.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc2469.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc2469.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc2469/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc2469/" title="Datatracker information for this document">Tracker</a>] [<a href="mailto:draft-narten-canonical-ordering@ietf.org?subject=draft-narten-canonical-ordering" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-narten-canonical-ordering-00.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-narten-canonical-ordering-00">draft-narten-canonical-ordering-00</a>                   Informational</pre>
      </div>
    

    <div class="draftcontent">
    <pre>Network Working Group                                          T. Narten
Request for Comments: 2469                                     C. Burton
Category: Informational                                              IBM
                                                           December 1998


      <span class="h1">A Caution On The Canonical Ordering Of Link-Layer Addresses</span>

Status of this Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (1998).  All Rights Reserved.

Abstract

   Protocols such as ARP and Neighbor Discovery have data fields that
   contain link-layer addresses. In order to interoperate properly, a
   sender setting such a field must insure that the receiver extracts
   those bits and interprets them correctly.  In most cases, such fields
   must be in &quot;canonical form&quot;.  Unfortunately, not all LAN adaptors are
   consistent in their use of canonical form, and implementations may
   need to explicitly bit swap individual bytes in order to obtain the
   correct format.  This document provides information to implementors
   to help them avoid the pitfall of using non-canonical forms when
   canonical forms are required.

Table of Contents

   <a href="#section-1">1</a>.  Introduction.............................................    <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Canonical Form...........................................    <a href="#page-2">2</a>
   <a href="#section-3">3</a>.  Implementors Beware: Potential Trouble Spots.............    <a href="#page-3">3</a>
      <a href="#section-3.1">3.1</a>.  Neighbor Discovery in IPv6..........................    <a href="#page-3">3</a>
      <a href="#section-3.2">3.2</a>.  IPv4 and ARP........................................    <a href="#page-3">3</a>
   <a href="#section-4">4</a>.  Security Considerations..................................    <a href="#page-3">3</a>
   <a href="#section-5">5</a>.  References...............................................    <a href="#page-4">4</a>
   <a href="#section-6">6</a>.  Authors&#x27; Addresses.......................................    <a href="#page-4">4</a>
   <a href="#section-7">7</a>.  Full Copyright Statement.................................    <a href="#page-5">5</a>









<span class="grey">Narten &amp; Burton              Informational                      [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc2469">RFC 2469</a>       Canonical Ordering Of Link-Layer Addresses  December 1998</span>


<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Introduction</span>

   Protocols such as ARP [<a href="#ref-ARP" title="&quot;An Ethernet Address Resolution Protocol&quot;">ARP</a>] and ND [<a href="#ref-DISCOVERY" title="&quot;Neighbor Discovery for IP Version 6 (IPv6)&quot;">DISCOVERY</a>] have data fields that
   contain link-layer addresses.  In order to interoperate properly, a
   sender setting such a field must insure that the receiver extracts
   those bits and interprets them correctly.  In most cases, such fields
   must be in &quot;canonical form&quot;.  Unfortunately, not all LAN adaptors are
   consistent in their use of canonical form, and implementations may
   need to explicitly bit swap individual bytes in order to obtain the
   correct format.

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  Canonical Form</span>

   Canonical form (also known as &quot;LSB format&quot; and &quot;Ethernet format&quot;) is
   the name given to the format of a LAN adapter address as it should be
   presented to the user according to the 802 LAN standard.  It is best
   defined as how the bit order of an adapter address on the LAN media
   maps to the bit order of an adapter address in memory: The first bit
   of each byte that appears on the LAN maps to the least significant
   (i.e., right-most) bit of each byte in memory (the figure below
   illustrates this).  This puts the group address indicator (i.e., the
   bit that defines whether an address is unicast or multicast) in the
   least significant bit of the first byte.  Ethernet and 802.3 hardware
   behave consistently with this definition.

   Unfortunately, Token Ring (and some FDDI) hardware does not behave
   consistently with this definition; it maps the first bit of each byte
   of the adapter address to the most significant (i.e., left-most) bit
   of each byte in memory, which puts the group address indicator in the
   most significant bit of the first byte.  This mapping is variously
   called &quot;MSB format&quot;, &quot;IBM format&quot;, &quot;Token-Ring format&quot;, and &quot;non-
   canonical form&quot;.  The figure below illustrates the difference between
   canonical and non-canonical form using the canonical form address
   12-34-56-78-9A-BC as an example:

   In memory,      12       34       56       78       9A       BC
   canonical:   00010010 00110100 01010110 01111000 10011010 10111100

                1st bit appearing on LAN (group address indicator)
                |
   On LAN:      01001000 00101100 01101010 00011110 01011001 00111101

   In memory,
   MSB format:  01001000 00101100 01101010 00011110 01011001 00111101
                   48       2C       6A       1E       59       3D






<span class="grey">Narten &amp; Burton              Informational                      [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc2469">RFC 2469</a>       Canonical Ordering Of Link-Layer Addresses  December 1998</span>


   The implication of this inconsistency is that addresses extracted
   from adaptors, assigned to adaptors, or extracted from link-layer
   packet headers obtained from adaptors may need to be bit-swapped to
   put them into canonical form. Likewise, addresses in canonical form
   that are handed to adaptors (e.g., to set an address, to specify a
   destination address in a link-layer header, etc.) may need to be
   bit-swapped in order for the adaptor to process the request as
   expected.

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  Implementors Beware: Potential Trouble Spots</span>

<span class="h3"><a class="selflink" id="section-3.1" href="#section-3.1">3.1</a>.  Neighbor Discovery in IPv6</span>

   All of the IPv6 over specific link layers documents specify that
   link-layer addresses must be transmitted in canonical order [IPv6-
   ETHER, IPv6-FDDI, IPv6-TOKEN].  As far as the authors can tell, all
   Ethernet LAN adaptors use canonical order and no special processing
   by implementations is needed. In contrast, some FDDI and all Token
   Ring adaptors appear to use non-canonical format.  Implementors must
   insure that any addresses that appear in link-layer address options
   of Neighbor Discovery [<a href="#ref-DISCOVERY" title="&quot;Neighbor Discovery for IP Version 6 (IPv6)&quot;">DISCOVERY</a>] messages are sent in canonical
   order and that any link-layer addresses extracted from ND packets are
   interpreted correctly on the local machine and its adaptors.

<span class="h3"><a class="selflink" id="section-3.2" href="#section-3.2">3.2</a>.  IPv4 and ARP</span>

   Ethernet addresses that appear in ARP packets are in canonical order.
   In contrast, when running ARP over Token Ring, the de facto practice
   is to transmit addresses in non-canonical order. Because all Token
   Ring adaptors assume non-canonical ordering, no interoperability
   problems result between communicating nodes attached to the same
   Token Ring.

   In some environments, however, Token Rings and Ethernets are
   connected via a bridge. When a node on the Token Ring attempts to
   communicate with a node on the Ethernet, communication would normally
   fail, since the Ethernet will misinterpret the Token Ring address
   (and vice versa). To get around this problem, bridges that forward
   packets between dissimilar network types perform bit swaps of the
   addresses in the address fields of ARP packets that are forwarded
   from a network of one type to one of the other.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Security Considerations</span>

   There are no known security issues raised by this document.






<span class="grey">Narten &amp; Burton              Informational                      [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc2469">RFC 2469</a>       Canonical Ordering Of Link-Layer Addresses  December 1998</span>


<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  References</span>

   [<a id="ref-ARP">ARP</a>]        Plummer, D., &quot;An Ethernet Address Resolution Protocol&quot;,
                STD 37, <a href="/doc/html/rfc826">RFC 826</a>, November 1982.

   [<a id="ref-DISCOVERY">DISCOVERY</a>]  Narten, T., Nordmark, E., and W. Simpson, &quot;Neighbor
                Discovery for IP Version 6 (IPv6)&quot;, <a href="/doc/html/rfc2461">RFC 2461</a>, December
                1998.

   [<a id="ref-IPv6-ETHER">IPv6-ETHER</a>] Crawford, M., &quot;Transmission of IPv6 Packets over
                Ethernet Networks&quot;, <a href="/doc/html/rfc2464">RFC 2464</a>, December 1998.

   [<a id="ref-IPv6-FDDI">IPv6-FDDI</a>]  Crawford, M., &quot;Transmission of IPv6 Packets over FDDI
                Networks&quot;, <a href="/doc/html/rfc2467">RFC 2467</a>, December 1998.

   [<a id="ref-IPv6-TOKEN">IPv6-TOKEN</a>] Crawford, M., Narten, T. and S. Thomas, &quot;Transmission of
                IPv6 Packets over Token Ring Networks&quot;, <a href="/doc/html/rfc2470">RFC 2470</a>,
                December 1998.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  Authors&#x27; Addresses</span>

   Thomas Narten
   IBM Corporation
   3039 Cornwallis Ave.
   PO Box 12195
   Research Triangle Park, NC 27709-2195

   Phone: 919-254-7798
   EMail: narten@raleigh.ibm.com

   Charles F. Burton, III
   IBM Corporation
   3039 Cornwallis Ave.
   PO Box 12195
   Research Triangle Park, NC 27709-2195

   Phone: 919-254-4355
   EMail: burton@rtp.vnet.ibm.com













<span class="grey">Narten &amp; Burton              Informational                      [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc2469">RFC 2469</a>       Canonical Ordering Of Link-Layer Addresses  December 1998</span>


<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>.  Full Copyright Statement</span>

   Copyright (C) The Internet Society (1998).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   &quot;AS IS&quot; basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
























Narten &amp; Burton              Informational                      [Page 5]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

