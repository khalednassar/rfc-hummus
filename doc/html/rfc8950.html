<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc8950
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.34.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.34.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-ietf-bess-rfc5549revision/">
  <meta name="description" content="Advertising IPv4 Network Layer Reachability Information (NLRI) with an IPv6 Next Hop (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.34.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.34.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgblue"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc8950.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc8950.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/rfc8950.xml" title="XML source for this document">xml</a>|<a href="https://www.rfc-editor.org/rfc/rfc8950.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc8950/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc8950/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/bess/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-ietf-bess-rfc5549revision@ietf.org?subject=draft-ietf-bess-rfc5549revision" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-ietf-bess-rfc5549revision-06.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-ietf-bess-rfc5549revision-06.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-ietf-bess-rfc5549revision-06.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-ietf-bess-rfc5549revision-06">draft-ietf-bess-rfc5549revision-06</a>               Proposed Standard</pre>
      </div>
    

    <div class="draftcontent">
    <pre>Internet Engineering Task Force (IETF)                      S. Litkowski
Request for Comments: 8950                                    S. Agrawal
Obsoletes: <a href="/doc/html/rfc5549">5549</a>                                         K. Ananthamurthy
Category: Standards Track                                          Cisco
ISSN: 2070-1721                                                 K. Patel
                                                                  Arrcus
                                                           November 2020


 <span class="h1">Advertising IPv4 Network Layer Reachability Information (NLRI) with an</span>
                             <span class="h1">IPv6 Next Hop</span>

Abstract

   Multiprotocol BGP (MP-BGP) specifies that the set of usable next-hop
   address families is determined by the Address Family Identifier (AFI)
   and the Subsequent Address Family Identifier (SAFI).  The AFI/SAFI
   definitions for the IPv4 address family only have provisions for
   advertising a next-hop address that belongs to the IPv4 protocol when
   advertising IPv4 Network Layer Reachability Information (NLRI) or
   VPN-IPv4 NLRI.

   This document specifies the extensions necessary to allow the
   advertising of IPv4 NLRI or VPN-IPv4 NLRI with a next-hop address
   that belongs to the IPv6 protocol.  This comprises an extension of
   the AFI/SAFI definitions to allow the address of the next hop for
   IPv4 NLRI or VPN-IPv4 NLRI to also belong to the IPv6 protocol, the
   encoding of the next hop to determine which of the protocols the
   address actually belongs to, and a BGP Capability allowing MP-BGP
   peers to dynamically discover whether they can exchange IPv4 NLRI and
   VPN-IPv4 NLRI with an IPv6 next hop.  This document obsoletes <a href="/doc/html/rfc5549">RFC</a>
   <a href="/doc/html/rfc5549">5549</a>.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="/doc/html/rfc7841#section-2">Section&nbsp;2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8950">https://www.rfc-editor.org/info/rfc8950</a>.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="/doc/html/bcp78">BCP 78</a> and the IETF Trust&#x27;s Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction
     1.1.  Requirements Language
   2.  Changes Compared to <a href="/doc/html/rfc5549">RFC 5549</a>
   3.  Extension of AFI/SAFI Definitions for the IPv4 Address Family
   4.  Use of BGP Capability Advertisement
   5.  Operations
   6.  Usage Examples
     6.1.  IPv4 over IPv6 Core
     6.2.  IPv4 VPN Unicast over IPv6 Core
     6.3.  IPv4 VPN Multicast over IPv6 Core
   7.  IANA Considerations
   8.  Security Considerations
   9.  References
     9.1.  Normative References
     9.2.  Informative References
   Acknowledgments
   Authors&#x27; Addresses

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Introduction</span>

   Multiprotocol BGP (MP-BGP) [<a href="/doc/html/rfc4760" title="&quot;Multiprotocol Extensions for BGP-4&quot;">RFC4760</a>] specifies that the set of
   network-layer protocols to which the address carried in the Next Hop
   Address field may belong is determined by the Address Family
   Identifier (AFI) and the Subsequent Address Family Identifier (SAFI).
   A number of existing AFIs/SAFIs allow the next-hop address to belong
   to a different address family than the Network Layer Reachability
   Information (NLRI).  For example, the AFI/SAFI &lt;25/65&gt; used (as per
   [<a href="/doc/html/rfc6074" title="&quot;Provisioning, Auto-Discovery, and Signaling in Layer 2 Virtual Private Networks (L2VPNs)&quot;">RFC6074</a>]) to perform Layer 2 Virtual Private Network (L2VPN) auto-
   discovery allows advertising NLRI that contains the identifier of a
   Virtual Private LAN Service (VPLS) instance or that identifies a
   particular pool of attachment circuits at a given Provider Edge (PE),
   while the Next Hop Address field contains the loopback address of a
   PE.  Similarly, the AFI/SAFI &lt;1/132&gt; (defined in [<a href="/doc/html/rfc4684" title="&quot;Constrained Route Distribution for Border Gateway Protocol/MultiProtocol Label Switching (BGP/MPLS) Internet Protocol (IP) Virtual Private Networks (VPNs)&quot;">RFC4684</a>]) to
   advertise Route Target (RT) membership information allows advertising
   NLRI that contains such RT membership information, while the Next Hop
   Address field contains the address of the advertising router.

   Furthermore, a number of these existing AFIs/SAFIs allow the next hop
   to belong to either the IPv4 protocol or the IPv6 protocol and
   specify the encoding of the next-hop information to determine which
   of the protocols the address actually belongs to.  For example,
   [<a href="/doc/html/rfc4684" title="&quot;Constrained Route Distribution for Border Gateway Protocol/MultiProtocol Label Switching (BGP/MPLS) Internet Protocol (IP) Virtual Private Networks (VPNs)&quot;">RFC4684</a>] allows the next-hop address to be either an IPv4 or IPv6
   address and states that the Next Hop Address field shall be
   interpreted as an IPv4 address whenever the length of the next-hop
   address is 4 octets and as an IPv6 address whenever the length of the
   next-hop address is 16 octets.

   There are situations such as those described in [<a href="/doc/html/rfc4925" title="&quot;Softwire Problem Statement&quot;">RFC4925</a>] and
   [<a href="/doc/html/rfc5565" title="&quot;Softwire Mesh Framework&quot;">RFC5565</a>] where carriers (or large enterprise networks acting as a
   carrier for their internal resources) may be required to establish
   connectivity between &#x27;islands&#x27; of networks of one address family type
   across a transit core of a differing address family type.  This
   includes both the case of IPv6 islands across an IPv4 core and the
   case of IPv4 islands across an IPv6 core.  Where Multiprotocol BGP
   (MP-BGP) is used to advertise the corresponding reachability
   information, this translates into the requirement for a BGP speaker
   to advertise the NLRI of a given address family via a next hop of a
   different address family (i.e., IPv6 NLRI with an IPv4 next hop and
   IPv4 NLRI with an IPv6 next hop).

   The AFI/SAFI definitions for the IPv6 address family assume that the
   next-hop address belongs to the IPv6 address family type.
   Specifically, as per [<a href="/doc/html/rfc2545" title="&quot;Use of BGP-4 Multiprotocol Extensions for IPv6 Inter-Domain Routing&quot;">RFC2545</a>] and [<a href="/doc/html/rfc8277" title="&quot;Using BGP to Bind MPLS Labels to Address Prefixes&quot;">RFC8277</a>], when the &lt;AFI/SAFI&gt; is
   &lt;2/1&gt;, &lt;2/2&gt;, or &lt;2/4&gt;, the next-hop address is assumed to be of an
   IPv6 type.  As per [<a href="/doc/html/rfc4659" title="&quot;BGP-MPLS IP Virtual Private Network (VPN) Extension for IPv6 VPN&quot;">RFC4659</a>], when the &lt;AFI/SAFI&gt; is &lt;2/128&gt;, the
   next-hop address is assumed to be of a VPN-IPv6 type.

   However, [<a href="/doc/html/rfc4798" title="&quot;Connecting IPv6 Islands over IPv4 MPLS Using IPv6 Provider Edge Routers (6PE)&quot;">RFC4798</a>] and [<a href="/doc/html/rfc4659" title="&quot;BGP-MPLS IP Virtual Private Network (VPN) Extension for IPv6 VPN&quot;">RFC4659</a>] specify how an IPv4 address can be
   encoded inside the next-hop IPv6 address field when IPv6 NLRI needs
   to be advertised with an IPv4 next hop.  [<a href="/doc/html/rfc4798" title="&quot;Connecting IPv6 Islands over IPv4 MPLS Using IPv6 Provider Edge Routers (6PE)&quot;">RFC4798</a>] defines how the
   IPv4-mapped IPv6 address format specified in the IPv6 addressing
   architecture ([<a href="/doc/html/rfc4291" title="&quot;IP Version 6 Addressing Architecture&quot;">RFC4291</a>]) can be used for that purpose when the &lt;AFI/
   SAFI&gt; is &lt;2/1&gt;, &lt;2/2&gt;, or &lt;2/4&gt;.  [<a href="/doc/html/rfc4659" title="&quot;BGP-MPLS IP Virtual Private Network (VPN) Extension for IPv6 VPN&quot;">RFC4659</a>] defines how the
   IPv4-mapped IPv6 address format as well as a null Route Distinguisher
   (RD) can be used for that purpose when the &lt;AFI/SAFI&gt; is &lt;2/128&gt;.
   Thus, there are existing solutions for the advertisement of IPv6 NLRI
   with an IPv4 next hop.

   Similarly, the AFI/SAFI definitions for the advertisement of IPv4
   NLRI or VPN-IPv4 NLRI assume that the next-hop address belongs to the
   IPv4 address family type.  Specifically, as per [<a href="/doc/html/rfc4760" title="&quot;Multiprotocol Extensions for BGP-4&quot;">RFC4760</a>] and
   [<a href="/doc/html/rfc8277" title="&quot;Using BGP to Bind MPLS Labels to Address Prefixes&quot;">RFC8277</a>], when the &lt;AFI/SAFI&gt; is &lt;1/1&gt;, &lt;1/2&gt;, or &lt;1/4&gt;, the next-
   hop address is assumed to be of an IPv4 type.  As per [<a href="/doc/html/rfc4364" title="&quot;BGP/MPLS IP Virtual Private Networks (VPNs)&quot;">RFC4364</a>], when
   the &lt;AFI/SAFI&gt; is &lt;1/128&gt;, the next-hop address is assumed to be of a
   VPN-IPv4 type.  As per [<a href="/doc/html/rfc6513" title="&quot;Multicast in MPLS/ BGP IP VPNs&quot;">RFC6513</a>] and [<a href="/doc/html/rfc6514" title="&quot;BGP Encodings and Procedures for Multicast in MPLS/BGP IP VPNs&quot;">RFC6514</a>], when the &lt;AFI/SAFI&gt;
   is &lt;1/129&gt;, the next-hop address is assumed to be of a VPN-IPv4 type.
   There is clearly no generally applicable method for encoding an IPv6
   address inside the IPv4 address field of the next hop.  Hence, there
   is currently no specified solution for advertising IPv4 or VPN-IPv4
   NLRI with an IPv6 next hop.

   This document specifies the extensions necessary to allow
   advertisement of IPv4 NLRI or VPN-IPv4 NLRI with a next-hop address
   that belongs to the IPv6 protocol.  This comprises an extension of
   the AFI/SAFI definitions to allow the address of the next hop for
   IPv4 NLRI or VPN-IPv4 NLRI to belong to either the IPv4 or the IPv6
   protocol, the encoding of the next-hop information to determine which
   of the protocols the address actually belongs to, and a BGP
   Capability allowing MP-BGP peers to dynamically discover whether they
   can exchange IPv4 NLRI and VPN-IPv4 NLRI with an IPv6 next hop.  The
   BGP Capability allows gradual deployment of the functionality of
   advertising IPv4 reachability via an IPv6 next hop without any flag
   day nor any risk of traffic black-holing.

   This document obsoletes [<a href="/doc/html/rfc5549" title="&quot;Advertising IPv4 Network Layer Reachability Information with an IPv6 Next Hop&quot;">RFC5549</a>].

<span class="h3"><a class="selflink" id="section-1.1" href="#section-1.1">1.1</a>.  Requirements Language</span>

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;NOT RECOMMENDED&quot;, &quot;MAY&quot;, and
   &quot;OPTIONAL&quot; in this document are to be interpreted as described in
   <a href="/doc/html/bcp14">BCP 14</a> [<a href="/doc/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>] [<a href="/doc/html/rfc8174" title="&quot;Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words&quot;">RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  Changes Compared to <a href="/doc/html/rfc5549">RFC 5549</a></span>

   This document introduces two significant changes compared to
   [<a href="/doc/html/rfc5549" title="&quot;Advertising IPv4 Network Layer Reachability Information with an IPv6 Next Hop&quot;">RFC5549</a>]:

   *  In [<a href="/doc/html/rfc5549" title="&quot;Advertising IPv4 Network Layer Reachability Information with an IPv6 Next Hop&quot;">RFC5549</a>], when AFI/SAFI &lt;1/128&gt; is used, the next-hop address
      is encoded as an IPv6 address with a length of 16 or 32 bytes.  To
      accommodate all existing implementations and bring consistency
      with VPNv4oIPv4 and VPNv6oIPv6, this document modifies how the
      next-hop address is encoded.  The next-hop address is now encoded
      as a VPN-IPv6 address with a length of 24 or 48 bytes (see
      Sections <a href="#section-3">3</a> and <a href="#section-6.2">6.2</a>).  This change addresses Erratum ID 5253
      ([<a href="#ref-Err5253" title="RFC 5549">Err5253</a>]).  As all known and deployed implementations are
      interoperable today and use the new proposed encoding, the change
      does not break existing interoperability.

   *  This document allows AFI/SAFI &lt;1/129&gt; (IPv4 multicast) to use an
      IPv6 underlay using similar encoding and procedures to AFI/SAFI
      &lt;1/128&gt; (see Sections <a href="#section-3">3</a> and <a href="#section-6.3">6.3</a>).

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  Extension of AFI/SAFI Definitions for the IPv4 Address Family</span>

   As mentioned earlier, MP-BGP specifies that the set of usable next-
   hop address families is determined by the AFI and the SAFI.  The
   following AFI/SAFI definitions for the IPv4 NLRI or VPN-IPv4 NLRI
   (&lt;1/1&gt;, &lt;1/2&gt;, &lt;1/4&gt;, &lt;1/128&gt;, and &lt;1/129&gt;) only have provisions for
   advertising a next-hop address that belongs to the IPv4 protocol.
   This document extends the set of usable next-hop address families to
   include IPv6 in addition to IPv4 when advertising an IPv4 or VPN-IPv4
   NLRI.

   Specifically, this document allows advertising the MP_REACH_NLRI
   attribute [<a href="/doc/html/rfc4760" title="&quot;Multiprotocol Extensions for BGP-4&quot;">RFC4760</a>] with this content:

   *  AFI = 1

   *  SAFI = 1, 2, or 4

   *  Length of Next Hop Address = 16 or 32

   *  Next Hop Address = IPv6 address of a next hop (potentially
      followed by the link-local IPv6 address of the next hop).  This
      field is to be constructed as per <a href="/doc/html/rfc2545#section-3">Section&nbsp;3 of [RFC2545]</a>.

   *  NLRI = NLRI as per the AFI/SAFI definition

   It also allows advertising the MP_REACH_NLRI attribute [<a href="/doc/html/rfc4760" title="&quot;Multiprotocol Extensions for BGP-4&quot;">RFC4760</a>] with
   this content:

   *  AFI = 1

   *  SAFI = 128 or 129

   *  Length of Next Hop Address = 24 or 48

   *  Next Hop Address = VPN-IPv6 address of a next hop with an 8-octet
      RD set to zero (potentially followed by the link-local VPN-IPv6
      address of the next hop with an 8-octet RD set to zero).

   *  NLRI = NLRI as per the AFI/SAFI definition

   This is in addition to the existing mode of operation allowing
   advertisement of NLRI for &lt;AFI/SAFI&gt; of &lt;1/1&gt;, &lt;1/2&gt;, and &lt;1/4&gt; with
   a next-hop address of an IPv4 type and advertisement of NLRI for an
   &lt;AFI/SAFI&gt; of &lt;1/128&gt; and &lt;1/129&gt; with a next-hop address of a VPN-
   IPv4 type.

   The BGP speaker receiving the advertisement MUST use the Length of
   Next Hop Address field to determine which network-layer protocol the
   next-hop address belongs to.

   *  When the AFI/SAFI is &lt;1/1&gt;, &lt;1/2&gt;, or &lt;1/4&gt; and when the Length of
      Next Hop Address field is equal to 16 or 32, the next-hop address
      is of type IPv6.

   *  When the AFI/SAFI is &lt;1/128&gt; or &lt;1/129&gt; and when the Length of
      Next Hop Address field is equal to 24 or 48, the next-hop address
      is of type VPN-IPv6.

   Note that this method of using the Length of Next Hop Address field
   to determine which network-layer protocol the next-hop address
   belongs to (out of the set of protocols allowed by the AFI/SAFI
   definition) is the same as that used in [<a href="/doc/html/rfc4684" title="&quot;Constrained Route Distribution for Border Gateway Protocol/MultiProtocol Label Switching (BGP/MPLS) Internet Protocol (IP) Virtual Private Networks (VPNs)&quot;">RFC4684</a>] and [<a href="/doc/html/rfc6074" title="&quot;Provisioning, Auto-Discovery, and Signaling in Layer 2 Virtual Private Networks (L2VPNs)&quot;">RFC6074</a>].

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Use of BGP Capability Advertisement</span>

   [<a id="ref-RFC5492">RFC5492</a>] defines a mechanism to allow two BGP speakers to discover
   if a particular capability is supported by their BGP peer and, thus,
   whether it can be used with that peer.  This document defines a
   capability that can be advertised using [<a href="/doc/html/rfc5492" title="&quot;Capabilities Advertisement with BGP-4&quot;">RFC5492</a>], referred to as the
   &quot;Extended Next Hop Encoding capability&quot;.  This capability allows BGP
   speakers to discover whether, for a given NLRI &lt;AFI/SAFI&gt;, a peer
   supports advertisement with a next hop whose network protocol is
   determined by the value of the Length of Next Hop Address field, as
   specified in <a href="#section-3">Section 3</a>.

   A BGP speaker that wishes to advertise an IPv6 next hop for IPv4 NLRI
   or for VPN-IPv4 NLRI to a BGP peer as per this specification MUST use
   the Capability Advertisement procedures defined in [<a href="/doc/html/rfc5492" title="&quot;Capabilities Advertisement with BGP-4&quot;">RFC5492</a>] with the
   Extended Next Hop Encoding capability to determine whether its peer
   supports this for the NLRI AFI/SAFI pair(s) of interest.  The fields
   in the Capabilities Optional Parameter MUST be set as follows:

   *  The Capability Code field MUST be set to 5 (which indicates the
      Extended Next Hop Encoding capability).

   *  The Capability Length field is set to a variable value that is the
      length of the Capability Value field (which follows).

   *  The Capability Value field has the following format:


               +-----------------------------------------------------+
               | NLRI AFI - 1 (2 octets)                             |
               +-----------------------------------------------------+
               | NLRI SAFI - 1 (2 octets)                            |
               +-----------------------------------------------------+
               | Nexthop AFI - 1 (2 octets)                          |
               +-----------------------------------------------------+
               | .....                                               |
               +-----------------------------------------------------+
               | NLRI AFI - N (2 octets)                             |
               +-----------------------------------------------------+
               | NLRI SAFI - N (2 octets)                            |
               +-----------------------------------------------------+
               | Nexthop AFI - N (2 octets)                          |
               +-----------------------------------------------------+

      where:

      -  each triple &lt;NLRI AFI, NLRI SAFI, Nexthop AFI&gt; indicates that
         the NLRI of &lt;NLRI AFI / NLRI SAFI&gt; may be advertised with a
         next-hop address belonging to the network-layer protocol of
         Nexthop AFI.

      -  the AFI and SAFI values are defined in the &quot;Address Family
         Numbers&quot; and &quot;Subsequent Address Family Identifier (SAFI)
         Parameters&quot; registries (see [<a href="#ref-IANA-AFI" title="&quot;Address Family Numbers&quot;">IANA-AFI</a>] and [<a href="#ref-IANA-SAFI">IANA-SAFI</a>],
         respectively).

   Since this document only concerns itself with the advertisement of
   IPv4 NLRI and VPN-IPv4 NLRI with an IPv6 next hop, this specification
   only allows the following values in the Capability Value field of the
   Extended Next Hop Encoding capability:

   *  NLRI AFI = 1 (IPv4)

   *  NLRI SAFI = 1, 2, 4, 128, or 129

   *  Nexthop AFI = 2 (IPv6)

   This document does not specify the use of the Extended Next Hop
   Encoding capability with any other combinations of &lt;NLRI AFI, NLRI
   SAFI, Nexthop AFI&gt;.  For example, the Next Hop Encoding capability
   specified in this document is not intended to be used for NLRI AFIs/
   SAFIs whose definition already allows use of both IPv4 and IPv6 next
   hops (e.g., AFI/SAFI = &lt;1/132&gt; as defined in [<a href="/doc/html/rfc4684" title="&quot;Constrained Route Distribution for Border Gateway Protocol/MultiProtocol Label Switching (BGP/MPLS) Internet Protocol (IP) Virtual Private Networks (VPNs)&quot;">RFC4684</a>]).  Similarly,
   it is not intended that the Extended Next Hop Encoding capability be
   used for NLRI AFIs/SAFIs for which there is already a solution for
   advertising a next hop of a different address family (e.g., AFI/SAFI
   = &lt;2/1&gt;, &lt;2/2&gt;, or &lt;2/4&gt; with an IPv4 next hop as per [<a href="/doc/html/rfc4798" title="&quot;Connecting IPv6 Islands over IPv4 MPLS Using IPv6 Provider Edge Routers (6PE)&quot;">RFC4798</a>] and
   AFI/SAFI = &lt;2/128&gt; with an IPv4 next hop as per [<a href="/doc/html/rfc4659" title="&quot;BGP-MPLS IP Virtual Private Network (VPN) Extension for IPv6 VPN&quot;">RFC4659</a>]).

   It is expected that if new AFIs/SAFIs are defined in the future,
   their definitions will have provisions (where appropriate) for both
   IPv4 and IPv6 next hops from the beginning, with the determination
   based on the Length of Next Hop Address field.  Thus, new AFIs/SAFIs
   are not expected to make use of the Extended Next Hop Encoding
   capability.

   A BGP speaker MUST only advertise the IPv4 or VPN-IPv4 NLRI with an
   IPv6 next hop to a BGP peer if the BGP speaker has first ascertained
   via the BGP Capability Advertisement that the BGP peer supports the
   Extended Next Hop Encoding capability for the relevant AFI/SAFI pair.

   The Extended Next Hop Encoding capability provides information about
   next-hop encoding for a given AFI/SAFI, assuming that AFI/SAFI is
   allowed.  It does not influence whether that AFI/SAFI is indeed
   allowed.  Whether an AFI/SAFI can be used between the BGP peers is
   purely determined through the Multiprotocol Extensions capability
   defined in [<a href="/doc/html/rfc4760" title="&quot;Multiprotocol Extensions for BGP-4&quot;">RFC4760</a>].

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  Operations</span>

   By default, if a particular BGP session is running over IPvx (where
   IPvx is IPv4 or IPv6) and if the BGP speaker sending an update is
   putting its own address in as the next hop, then the next-hop address
   SHOULD be specified as an IPvx address, using the encoding rules
   specified in the AFI/SAFI definition of the NLRI being updated.  This
   default behavior may be overridden by policy.

   When a next-hop address needs to be passed along unchanged (e.g., as
   a Route Reflector (RR) would do), its encoding MUST NOT be changed.
   If a particular RR client cannot handle that encoding (as determined
   by the BGP Capability Advertisement), then the NLRI in question
   cannot be distributed to that client.  For sound routing in certain
   scenarios, this will require that all the RR clients be able to
   handle whatever encodings any of them may generate.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  Usage Examples</span>

<span class="h3"><a class="selflink" id="section-6.1" href="#section-6.1">6.1</a>.  IPv4 over IPv6 Core</span>

   The extensions defined in this document may be used as discussed in
   [<a href="/doc/html/rfc5565" title="&quot;Softwire Mesh Framework&quot;">RFC5565</a>] for the interconnection of IPv4 islands over an IPv6
   backbone.  In this application, Address Family Border Routers (AFBRs;
   as defined in [<a href="/doc/html/rfc4925" title="&quot;Softwire Problem Statement&quot;">RFC4925</a>]) advertise IPv4 NLRI in the MP_REACH_NLRI
   along with an IPv6 next hop.

   The MP_REACH_NLRI is encoded with:

   *  AFI = 1

   *  SAFI = 1

   *  Length of Next Hop Address field = 16 (or 32)

   *  Next Hop Address = IPv6 address of the next hop

   *  NLRI = IPv4 routes

   During BGP Capability Advertisement, the PE routers would include the
   following fields in the Capabilities Optional Parameter:

   *  Capability Code set to &quot;Extended Next Hop Encoding&quot;

   *  Capability Value containing &lt;NLRI AFI=1, NLRI SAFI=1, Nexthop
      AFI=2&gt;

<span class="h3"><a class="selflink" id="section-6.2" href="#section-6.2">6.2</a>.  IPv4 VPN Unicast over IPv6 Core</span>

   The extensions defined in this document may be used for support of
   IPv4 VPNs over an IPv6 backbone.  In this application, PE routers
   would advertise VPN-IPv4 NLRI in the MP_REACH_NLRI along with an IPv6
   next hop.

   The MP_REACH_NLRI is encoded with:

   *  AFI = 1

   *  SAFI = 128

   *  Length of Next Hop Address field = 24 (or 48)

   *  Next Hop Address = VPN-IPv6 address of a next hop whose RD is set
      to zero

   *  NLRI = IPv4-VPN routes

   During BGP Capability Advertisement, the PE routers would include the
   following fields in the Capabilities Optional Parameter:

   *  Capability Code set to &quot;Extended Next Hop Encoding&quot;

   *  Capability Value containing &lt;NLRI AFI=1, NLRI SAFI=128, Nexthop
      AFI=2&gt;

<span class="h3"><a class="selflink" id="section-6.3" href="#section-6.3">6.3</a>.  IPv4 VPN Multicast over IPv6 Core</span>

   The extensions defined in this document may be used for support of
   IPv4 multicast VPNs over an IPv6 backbone.  In this application, PE
   routers would advertise VPN-IPv4 NLRI in the MP_REACH_NLRI along with
   an IPv6 next hop.

   The MP_REACH_NLRI is encoded with:

   *  AFI = 1

   *  SAFI = 129

   *  Length of Next Hop Address field = 24 (or 48)

   *  Next Hop Address = VPN-IPv6 address of a next hop whose RD is set
      to zero

   *  NLRI = IPv4-VPN routes

   During BGP Capability Advertisement, the PE routers would include the
   following fields in the Capabilities Optional Parameter:

   *  Capability Code set to &quot;Extended Next Hop Encoding&quot;

   *  Capability Value containing &lt;NLRI AFI=1, NLRI SAFI=129, Nexthop
      AFI=2&gt;

<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>.  IANA Considerations</span>

   This document does not define any new code points from those included
   in [<a href="/doc/html/rfc5549" title="&quot;Advertising IPv4 Network Layer Reachability Information with an IPv6 Next Hop&quot;">RFC5549</a>].

   [<a id="ref-RFC5549">RFC5549</a>] added &quot;Extended Next Hop Encoding&quot; to the &quot;Capability
   Codes&quot; registry ([<a href="#ref-IANA-CAP-CODE">IANA-CAP-CODE</a>]), which was created by [<a href="/doc/html/rfc5492" title="&quot;Capabilities Advertisement with BGP-4&quot;">RFC5492</a>].
   IANA has updated the registration of that entry to refer to this
   document.  The value allocated for this Capability Code is 5.

<span class="h2"><a class="selflink" id="section-8" href="#section-8">8</a>.  Security Considerations</span>

   This document does not raise any additional security issues beyond
   those of BGP-4 and the Multiprotocol Extensions for BGP-4.  The same
   security mechanisms are applicable.

   However, as [<a href="/doc/html/rfc4272" title="&quot;BGP Security Vulnerabilities Analysis&quot;">RFC4272</a>] discusses, BGP is vulnerable to traffic
   diversion attacks.  The ability to advertise an IPv6 next hop adds a
   new means by which an attacker could cause traffic to be diverted
   from its normal path.  Such an attack differs from preexisting
   vulnerabilities in that traffic could be forwarded to a distant
   target across an intervening network infrastructure (e.g., an IPv6
   core), allowing an attack to potentially succeed more easily since
   less infrastructure would have to be subverted.  Potential
   consequences include &quot;hijacking&quot; of traffic or denial of service.

   Although not expected to be the typical case, the IPv6 address used
   as the BGP next-hop address could be an IPv4-mapped IPv6 address (as
   defined in [<a href="/doc/html/rfc4291" title="&quot;IP Version 6 Addressing Architecture&quot;">RFC4291</a>]).  Configuration of the security mechanisms
   potentially deployed by the network operator (such as security checks
   on a next-hop address) also need to keep this case in mind.

<span class="h2"><a class="selflink" id="section-9" href="#section-9">9</a>.  References</span>

<span class="h3"><a class="selflink" id="section-9.1" href="#section-9.1">9.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., &quot;Key words for use in RFCs to Indicate
              Requirement Levels&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc2119">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC2545">RFC2545</a>]  Marques, P. and F. Dupont, &quot;Use of BGP-4 Multiprotocol
              Extensions for IPv6 Inter-Domain Routing&quot;, <a href="/doc/html/rfc2545">RFC 2545</a>,
              DOI 10.17487/RFC2545, March 1999,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2545">https://www.rfc-editor.org/info/rfc2545</a>&gt;.

   [<a id="ref-RFC4291">RFC4291</a>]  Hinden, R. and S. Deering, &quot;IP Version 6 Addressing
              Architecture&quot;, <a href="/doc/html/rfc4291">RFC 4291</a>, DOI 10.17487/RFC4291, February
              2006, &lt;<a href="https://www.rfc-editor.org/info/rfc4291">https://www.rfc-editor.org/info/rfc4291</a>&gt;.

   [<a id="ref-RFC4364">RFC4364</a>]  Rosen, E. and Y. Rekhter, &quot;BGP/MPLS IP Virtual Private
              Networks (VPNs)&quot;, <a href="/doc/html/rfc4364">RFC 4364</a>, DOI 10.17487/RFC4364, February
              2006, &lt;<a href="https://www.rfc-editor.org/info/rfc4364">https://www.rfc-editor.org/info/rfc4364</a>&gt;.

   [<a id="ref-RFC4760">RFC4760</a>]  Bates, T., Chandra, R., Katz, D., and Y. Rekhter,
              &quot;Multiprotocol Extensions for BGP-4&quot;, <a href="/doc/html/rfc4760">RFC 4760</a>,
              DOI 10.17487/RFC4760, January 2007,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4760">https://www.rfc-editor.org/info/rfc4760</a>&gt;.

   [<a id="ref-RFC5492">RFC5492</a>]  Scudder, J. and R. Chandra, &quot;Capabilities Advertisement
              with BGP-4&quot;, <a href="/doc/html/rfc5492">RFC 5492</a>, DOI 10.17487/RFC5492, February
              2009, &lt;<a href="https://www.rfc-editor.org/info/rfc5492">https://www.rfc-editor.org/info/rfc5492</a>&gt;.

   [<a id="ref-RFC8174">RFC8174</a>]  Leiba, B., &quot;Ambiguity of Uppercase vs Lowercase in <a href="/doc/html/rfc2119">RFC</a>
              <a href="/doc/html/rfc2119">2119</a> Key Words&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc8174">RFC 8174</a>, DOI 10.17487/RFC8174,
              May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.

   [<a id="ref-RFC8277">RFC8277</a>]  Rosen, E., &quot;Using BGP to Bind MPLS Labels to Address
              Prefixes&quot;, <a href="/doc/html/rfc8277">RFC 8277</a>, DOI 10.17487/RFC8277, October 2017,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8277">https://www.rfc-editor.org/info/rfc8277</a>&gt;.

<span class="h3"><a class="selflink" id="section-9.2" href="#section-9.2">9.2</a>.  Informative References</span>

   [<a id="ref-Err5253">Err5253</a>]  RFC Errata, Erratum ID 5253, <a href="/doc/html/rfc5549">RFC 5549</a>,
              &lt;<a href="https://www.rfc-editor.org/errata/eid5253">https://www.rfc-editor.org/errata/eid5253</a>&gt;.

   [<a id="ref-IANA-AFI">IANA-AFI</a>] IANA, &quot;Address Family Numbers&quot;,
              &lt;<a href="https://www.iana.org/assignments/address-family-numbers/">https://www.iana.org/assignments/address-family-</a>
              <a href="https://www.iana.org/assignments/address-family-numbers/">numbers/</a>&gt;.

   [<a id="ref-IANA-CAP-CODE">IANA-CAP-CODE</a>]
              IANA, &quot;Capability Codes&quot;,
              &lt;<a href="https://www.iana.org/assignments/capability-codes/">https://www.iana.org/assignments/capability-codes/</a>&gt;.

   [<a id="ref-IANA-SAFI">IANA-SAFI</a>]
              IANA, &quot;Subsequent Address Family Identifiers (SAFI)
              Parameters&quot;,
              &lt;<a href="https://www.iana.org/assignments/safi-namespace/">https://www.iana.org/assignments/safi-namespace/</a>&gt;.

   [<a id="ref-RFC4272">RFC4272</a>]  Murphy, S., &quot;BGP Security Vulnerabilities Analysis&quot;,
              <a href="/doc/html/rfc4272">RFC 4272</a>, DOI 10.17487/RFC4272, January 2006,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4272">https://www.rfc-editor.org/info/rfc4272</a>&gt;.

   [<a id="ref-RFC4659">RFC4659</a>]  De Clercq, J., Ooms, D., Carugi, M., and F. Le Faucheur,
              &quot;BGP-MPLS IP Virtual Private Network (VPN) Extension for
              IPv6 VPN&quot;, <a href="/doc/html/rfc4659">RFC 4659</a>, DOI 10.17487/RFC4659, September 2006,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4659">https://www.rfc-editor.org/info/rfc4659</a>&gt;.

   [<a id="ref-RFC4684">RFC4684</a>]  Marques, P., Bonica, R., Fang, L., Martini, L., Raszuk,
              R., Patel, K., and J. Guichard, &quot;Constrained Route
              Distribution for Border Gateway Protocol/MultiProtocol
              Label Switching (BGP/MPLS) Internet Protocol (IP) Virtual
              Private Networks (VPNs)&quot;, <a href="/doc/html/rfc4684">RFC 4684</a>, DOI 10.17487/RFC4684,
              November 2006, &lt;<a href="https://www.rfc-editor.org/info/rfc4684">https://www.rfc-editor.org/info/rfc4684</a>&gt;.

   [<a id="ref-RFC4798">RFC4798</a>]  De Clercq, J., Ooms, D., Prevost, S., and F. Le Faucheur,
              &quot;Connecting IPv6 Islands over IPv4 MPLS Using IPv6
              Provider Edge Routers (6PE)&quot;, <a href="/doc/html/rfc4798">RFC 4798</a>,
              DOI 10.17487/RFC4798, February 2007,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4798">https://www.rfc-editor.org/info/rfc4798</a>&gt;.

   [<a id="ref-RFC4925">RFC4925</a>]  Li, X., Ed., Dawkins, S., Ed., Ward, D., Ed., and A.
              Durand, Ed., &quot;Softwire Problem Statement&quot;, <a href="/doc/html/rfc4925">RFC 4925</a>,
              DOI 10.17487/RFC4925, July 2007,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4925">https://www.rfc-editor.org/info/rfc4925</a>&gt;.

   [<a id="ref-RFC5549">RFC5549</a>]  Le Faucheur, F. and E. Rosen, &quot;Advertising IPv4 Network
              Layer Reachability Information with an IPv6 Next Hop&quot;,
              <a href="/doc/html/rfc5549">RFC 5549</a>, DOI 10.17487/RFC5549, May 2009,
              &lt;<a href="https://www.rfc-editor.org/info/rfc5549">https://www.rfc-editor.org/info/rfc5549</a>&gt;.

   [<a id="ref-RFC5565">RFC5565</a>]  Wu, J., Cui, Y., Metz, C., and E. Rosen, &quot;Softwire Mesh
              Framework&quot;, <a href="/doc/html/rfc5565">RFC 5565</a>, DOI 10.17487/RFC5565, June 2009,
              &lt;<a href="https://www.rfc-editor.org/info/rfc5565">https://www.rfc-editor.org/info/rfc5565</a>&gt;.

   [<a id="ref-RFC6074">RFC6074</a>]  Rosen, E., Davie, B., Radoaca, V., and W. Luo,
              &quot;Provisioning, Auto-Discovery, and Signaling in Layer 2
              Virtual Private Networks (L2VPNs)&quot;, <a href="/doc/html/rfc6074">RFC 6074</a>,
              DOI 10.17487/RFC6074, January 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6074">https://www.rfc-editor.org/info/rfc6074</a>&gt;.

   [<a id="ref-RFC6513">RFC6513</a>]  Rosen, E., Ed. and R. Aggarwal, Ed., &quot;Multicast in MPLS/
              BGP IP VPNs&quot;, <a href="/doc/html/rfc6513">RFC 6513</a>, DOI 10.17487/RFC6513, February
              2012, &lt;<a href="https://www.rfc-editor.org/info/rfc6513">https://www.rfc-editor.org/info/rfc6513</a>&gt;.

   [<a id="ref-RFC6514">RFC6514</a>]  Aggarwal, R., Rosen, E., Morin, T., and Y. Rekhter, &quot;BGP
              Encodings and Procedures for Multicast in MPLS/BGP IP
              VPNs&quot;, <a href="/doc/html/rfc6514">RFC 6514</a>, DOI 10.17487/RFC6514, February 2012,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6514">https://www.rfc-editor.org/info/rfc6514</a>&gt;.

Acknowledgments

   The authors would like to thank Francois Le Faucheur and Eric Rosen
   for their work on [<a href="/doc/html/rfc5549" title="&quot;Advertising IPv4 Network Layer Reachability Information with an IPv6 Next Hop&quot;">RFC5549</a>].

   The authors would like to thank Yakov Rekhter, Pranav Mehta, and John
   Scudder for their contributions to the approach defined in [<a href="/doc/html/rfc5549" title="&quot;Advertising IPv4 Network Layer Reachability Information with an IPv6 Next Hop&quot;">RFC5549</a>].

Authors&#x27; Addresses

   Stephane Litkowski
   Cisco

   Email: slitkows@cisco.com


   Swadesh Agrawal
   Cisco

   Email: swaagraw@cisco.com


   Krishna Muddenahally Ananthamurthy
   Cisco

   Email: kriswamy@cisco.com


   Keyur Patel
   Arrcus

   Email: keyur@arrcus.com
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

