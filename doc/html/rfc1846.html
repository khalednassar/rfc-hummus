<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc1846
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.33.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.33.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-ietf-mailext-smtp-521/">
  <meta name="description" content="SMTP 521 Reply Code (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.33.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.33.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgyellow"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc1846.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc1846.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc1846.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc1846/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc1846/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/mailext/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-ietf-mailext-smtp-521@ietf.org?subject=draft-ietf-mailext-smtp-521" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-ietf-mailext-smtp-521-03.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-ietf-mailext-smtp-521-03.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-ietf-mailext-smtp-521-03.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-ietf-mailext-smtp-521-03">draft-ietf-mailext-smtp-521-03</a>                        Experimental
Updated by: <a href="/doc/html/rfc7504">7504</a>                                                        </pre>
      </div>
    

    <div class="draftcontent">
    <pre>Network Working Group                                          A. Durand
Request For Comments: 1846                                          IMAG
Category: Experimental                                         F. Dupont
                                                      INRIA Rocquencourt
                                                          September 1995


                          <span class="h1">SMTP 521 Reply Code</span>


Status of this Memo

   This memo defines an Experimental Protocol for the Internet
   community.  This memo does not specify an Internet standard of any
   kind.  Discussion and suggestions for improvement are requested.
   Distribution of this memo is unlimited.

Abstract

   This memo defines a new Simple Mail Transfer Protocol (SMTP) [<a href="#ref-1" title="&quot;Simple Mail Transfer Protocol&quot;">1</a>]
   reply code, 521, which one may use to indicate that an Internet host
   does not accept incoming mail.

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>. Motivations</span>

   Hosts on the Internet have shifted from large, general-purpose hosts
   to smaller, more specialized hosts.  There is an increasing number of
   hosts which are dedicated to specific tasks, such as serving NTP or
   DNS.  These dedicated hosts frequently do not provide mail service.

   Usually, these mailless hosts do not run an SMTP server.
   Unfortunately, users will occasionally misaddress mail to these
   hosts.  Regular SMTP clients attempting to deliver this misaddressed
   mail must treat the lack of an SMTP server on the host as a temporary
   error.  They must queue the mail for later delivery, should an SMTP
   server be started at a later time.

   This causes the mail to remain queued for days, until it is returned
   with what is usually a confusing error message.

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>. Two  </span>complementary solutions

   Two complementary solutions MAY be implemented to deal with this
   issue.  The first one is to use MX relays to bounce misaddressed
   mails.  The second one is to implement a  minimal smtp server on the
   mailless host to bounce all mails.

   The choice between the two solutions is site dependent.



<span class="grey">Durand &amp; Dupont               Experimental                      [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc1846">RFC 1846</a>                  SMTP 521 Reply Code             September 1995</span>


<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>. The MX relays solution</span>

   MX relays may be used to indicate SMTP clients that an Internet host
   does not accept mail.

   During the SMTP dialog, these MX relays MAY bounce any message
   destinated to this particular host with an SMTP 521 reply code.


   SMTP dialog example:

   ---&gt; 220 relay.imag.fr ready
   &lt;--- HELO client.inria.fr
   ---&gt; 250 relay.imag.fr Hello client.inria.fr
   &lt;--- MAIL FROM: &lt;user1@client.inria.fr&gt;
   ---&gt; 250 &lt;user1@client.inria.fr&gt;... Sender Ok
   &lt;--- RCPT TO: &lt;user2@nomail.imag.fr&gt;
   ---&gt; 521 nomail.imag.fr does not accept mail
   &lt;--- QUIT
   ---&gt; 221 relay.imag.fr closing connection

   If an MX relay of precedence n for a mailless host bounces mails on
   its behalf, then any other MX relay of precedence lower than n for
   this mailless host SHOULD do the same.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>. The SMTP server solution</span>

<span class="h3"><a class="selflink" id="section-4.1" href="#section-4.1">4.1</a> 521 greeting</span>

   A host may indicate that it does not accept mail by sending an
   initial 521 &quot;Host does not accept mail&quot; reply to an incoming SMTP
   connection.  The official name of the server host or its IP address
   MUST be sent as the first word following the reply code.

   For example: 521 canon.inria.fr does not accept mail

<span class="h3"><a class="selflink" id="section-4.2" href="#section-4.2">4.2</a> SMTP dialog</span>

   After issuing the initial 521 reply, the server host MUST do one of
   the following two options:

   a) Close the SMTP connection.
   b) Read commands, issuing 521 replies to all commands except QUIT.
      If the SMTP client does not issue the QUIT command after a
      reasonable time, the SMTP server MUST time out and close the
      connection.  A suggested time-out value is 5 minutes.





<span class="grey">Durand &amp; Dupont               Experimental                      [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc1846">RFC 1846</a>                  SMTP 521 Reply Code             September 1995</span>


   DISCUSSION:

   When an SMTP server closes the connection immediatly after issuing
   the initial 521 reply, some existing SMTP clients treat the
   condition as a transient error and requeue the mail for later
   delivery.  If the SMTP server leaves the connection open, those
   clients immediately send the QUIT command and return the mail.

<span class="h3"><a class="selflink" id="section-4.3" href="#section-4.3">4.3</a> MX</span>

   A host which sends a 521 greeting message MUST NOT be listed as an MX
   record for any domain.

<span class="h3"><a class="selflink" id="section-4.4" href="#section-4.4">4.4</a> Postmaster</span>

   An SMTP server which sends a 521 greeting message IS NOT subject to
   the postmaster requirement of STD 3, <a href="/doc/html/rfc1123">RFC 1123</a> ([<a href="#ref-2" title="&quot;Requirements for Internet Hosts - Application and Support&quot;">2</a>]).

   DISCUSSION:

   Postmaster exists so you can report mail errors.  A host that doesn&#x27;t
   support mail doesn&#x27;t need a Postmaster.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>. SMTP client behavior</span>

   If an SMTP client encounters a host in an MX record that issues a 521
   greeting message, it must do one of the following two options:

   a) Attempt to deliver it to a different MX host for that domain.
   b) Return the mail with an appropriate non-delivery report.

   If an SMTP client encounters a 521 reply code in any other part of
   the SMTP dialog, it MUST return the mail with an appropriate non-
   delivery report.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>. Security Considerations</span>

   Not running any SMTP server, or running an SMTP server which simply
   emits fixed strings in response to incoming connection should provide
   significantly fewer opportunities for security problems than running
   a complete SMTP implementation.










<span class="grey">Durand &amp; Dupont               Experimental                      [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc1846">RFC 1846</a>                  SMTP 521 Reply Code             September 1995</span>


<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>. Authors&#x27; Addresses</span>

   Alain Durand
   Institut de Mathematiques Appliquees de Grenoble (IMAG)
   BP 53 38041 Grenoble CEDEX 9 France

   Phone : +33 76 63 57 03
   Fax   : +33 76 44 66 75
   EMail: Alain.Durand@imag.fr


   Francis Dupont
   Institut National de Recherche en Informatique et en Automatique
   B.P. 105 / 78153 Le Chesnay CEDEX France

   Phone : +33 1 39 63 52 13
   Fax   : +33 1 39 63 53 30
   EMail: Francis.Dupont@inria.fr

<span class="h2"><a class="selflink" id="section-8" href="#section-8">8</a>. Expericences</span>

   People implementing this reply code are suggested to send a message
   to mailext@list.cren.net to report their experience.

<span class="h2"><a class="selflink" id="section-9" href="#section-9">9</a>. References</span>

   [<a id="ref-1">1</a>] Postel, J., &quot;Simple Mail Transfer Protocol&quot;, STD 10, <a href="/doc/html/rfc821">RFC 821</a>,
       USC/Information Sciences Institute, August 1982.

   [<a id="ref-2">2</a>] Braden, R., Editor, &quot;Requirements for Internet Hosts -
       Application and Support&quot;, STD 3, <a href="/doc/html/rfc1123">RFC 1123</a>, USC/Information
       Sciences Institute, October 1989.



















Durand &amp; Dupont               Experimental                      [Page 4]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

