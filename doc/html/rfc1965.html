<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc1965
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.33.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.33.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-ietf-idr-bgp-confed/">
  <meta name="description" content="Autonomous System Confederations for BGP (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.33.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.33.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgbrown"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc1965.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc1965.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc1965.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc1965/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc1965/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/idr/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-ietf-idr-bgp-confed@ietf.org?subject=draft-ietf-idr-bgp-confed" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-ietf-idr-bgp-confed-00.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-ietf-idr-bgp-confed-00">draft-ietf-idr-bgp-confed-00</a>                          Experimental
Obsoleted by: <a href="/doc/html/rfc3065">3065</a>                                                      </pre>
      </div>
    

    <div class="draftcontent">
    <pre>Network Working Group                                          P. Traina
Request for Comments: 1965                                 cisco Systems
Category: Experimental                                         June 1996


                <span class="h1">Autonomous System Confederations for BGP</span>

Status of this Memo

   This memo defines an Experimental Protocol for the Internet
   community.  This memo does not specify an Internet standard of any
   kind.  Discussion and suggestions for improvement are requested.
   Distribution of this memo is unlimited.

Abstract

   Border Gateway Protocol [<a href="#ref-1" title="&quot;A Border Gateway Protocol 4 (BGP-4)&quot;">1</a>] is an inter-autonomous system routing
   protocol designed for TCP/IP networks.

   This document describes an extension to BGP which may be used to
   create a confederation of autonomous systems which is represented as
   one single autonomous system to BGP peers external to the
   confederation.

   The intention of this extension is to aid in policy administration
   and reduce the management complexity of maintaining a large
   autonomous system.

   The extension this document describes is widely deployed in the
   Internet today.

Introduction

   It may be useful to subdivide autonomous systems with a very large
   number of BGP speakers into smaller domains for purposes of
   controlling routing policy via information contained in the BGP
   AS_PATH attribute.  For example, one may chose to consider all BGP
   speakers in a geographic region as a single entity.

   In addition to improvements in routing policy control, current
   techniques for deploying BGP among speakers in the same autonomous
   system establish a full mesh of TCP connections among all speakers
   for the purpose of exchanging exterior routing information.  In
   autonomous systems the number of intra-domain connections that need
   to be maintained by each border router can become significant.

   Subdividing a large autonomous system allows a significant reduction
   in the total number of intra-domain BGP connections, as the



<span class="grey">Traina                        Experimental                      [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc1965">RFC 1965</a>               AS Confederations for BGP               June 1996</span>


   connectivity requirements simplify to the model used for inter-domain
   connections.

   Unfortunately subdividing an autonomous system may increase the
   complexity of policy routing based on AS_PATH information for all
   members of the Internet.  Additionally, this division increases the
   maintenance overhead of coordinating external peering when the
   internal topology of this collection of autonomous systems is
   modified.

   Finally, dividing a large AS may unnecessarily increase the length of
   the sequence portions of the AS_PATH attribute.  Several common BGP
   implementations can use the number of &quot;hops&quot; required to reach a
   given destination as part of the path selection criteria.  While this
   is not an optimal method of determining route preference, given the
   lack of other in-band information, it provides a reasonable default
   behavior which is widely used across the Internet.  Therefore,
   division of an autonomous system into separate systems may adversely
   affect optimal routing of packets through the Internet.

   However, there is usually no need to expose the internal topology of
   this divided autonomous system,  which means it is possible to regard
   a collection of autonomous systems under a common administration as a
   single entity or autonomous system when viewed from outside the
   confines of the confederation of autonomous systems itself.

Terms and Definitions

   AS Confederation
      A collection of autonomous systems advertised as a single AS
      number to BGP speakers that are not members of the confederation.

   AS Confederation Identifier
      An externally visible autonomous system number that identifies the
      confederation as a whole.

   Member-AS
      An autonomous system that is contained in a given AS
      confederation.

Overview

   IDRP[2] has the concept of a routing domain confederation.  An IDRP
   routing domain confederation appears to IDRP speakers external to the
   confederation as a single administrative entity.  This extension is
   based upon that work.





<span class="grey">Traina                        Experimental                      [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc1965">RFC 1965</a>               AS Confederations for BGP               June 1996</span>


   In IDRP, routing domain confederations may be nested within each
   other or disjoint portions of still larger confederations.  The
   algorithm BGP defines for additions to the AS_PATH attribute imposes
   an additional restriction that AS confederations must be strictly
   hierarchical in nature.

AS_CONFED segment type extension

   Currently, BGP specifies that the AS_PATH attribute is a well-known
   mandatory attribute that is composed of a sequence of AS path
   segments.  Each AS path segment is represented by a type/length/value
   triple.

   In [<a href="#ref-1" title="&quot;A Border Gateway Protocol 4 (BGP-4)&quot;">1</a>], the path segment type is a 1-octet long field with the two
   following values defined:

             Value     Segment Type

             1         AS_SET: unordered set of ASs a route in the
                              UPDATE message has traversed

             2         AS_SEQUENCE: ordered set of ASs a route in
                              the UPDATE message has traversed

   This document reserves two additional segment types:

             3         AS_CONFED_SET: unordered set of ASs in the local
                              confederation that the UPDATE message
                              has traversed

             4         AS_CONFED_SEQUENCE: ordered set of ASs in the
                              local confederation that the UPDATE
                              message has traversed

Operation

   A member of a BGP confederation will use its confederation identifier
   in all transactions with peers that are not members of its
   confederation.  This confederation identifier is considered to be the
   &quot;externally visible&quot; AS number and this number is used in OPEN
   messages and advertised in the AS_PATH attribute.

   A member of a BGP confederation will use its routing domain
   identifier (the internally visible AS number) in all transactions
   with peers that are members of the same confederation as the given
   router.





<span class="grey">Traina                        Experimental                      [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc1965">RFC 1965</a>               AS Confederations for BGP               June 1996</span>


   A BGP speaker receiving an AS_PATH attribute containing a
   confederation ID matching its own confederation shall treat the path
   in the same fashion as if it had received a path containing its own
   AS number.

AS_PATH modification rules

   Section 5.1.2 of [<a href="#ref-1" title="&quot;A Border Gateway Protocol 4 (BGP-4)&quot;">1</a>] is replaced with the following text.

   When a BGP speaker propagates a route which it has learned from
   another BGP speaker&#x27;s UPDATE message, it shall modify the route&#x27;s
   AS_PATH attribute based on the location of the BGP speaker to which
   the route will be sent:

      a) When a given BGP speaker advertises the route to another BGP
      speaker located in its own autonomous system, the advertising
      speaker shall not modify the AS_PATH attribute associated with
      the route.

      b) When a given BGP speaker advertises the route to a BGP
      speaker located in a neighboring autonomous system that is a
      member of the local autonomous system confederation, then the
      advertising speaker shall update the AS_PATH attribute as
      follows:

         1) if the first path segment of the AS_PATH is of type
         AS_CONFED_SEQUENCE, the local system shall prepend its own AS
         number as the last element of the sequence (put it in the
         leftmost position).

         2) if the first path segment of the AS_PATH is not of type
         AS_CONFED_SEQUENCE the local system shall prepend a new path
         segment of type AS_CONFED_SEQUENCE to the AS_PATH, including
         its own confederation identifier in that segment.

      c) When a given BGP speaker advertises the route to a BGP
      speaker located in a neighboring autonomous system that is not a
      member of the current routing domain confederation, then the
      advertising speaker shall update the AS_PATH attribute as
      follows:

         1) if the first path segment of the AS_PATH is of type
         AS_CONFED_SEQUENCE, that segment and any immediately
         following segments of the type AS_CONFED_SET are removed from
         the AS_PATH attribute, leaving the sanitized AS_PATH
         attribute to be operated on by steps 2, or 3.





<span class="grey">Traina                        Experimental                      [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc1965">RFC 1965</a>               AS Confederations for BGP               June 1996</span>


         2) if the first path segment of the remaining AS_PATH is of
         type AS_SEQUENCE, the local system shall prepend its own
         confederation identifier as the last element of the sequence
         (put it in the leftmost position).

         3) if there are no path segments following the removal of the
         first AS_CONFED_SET/AS_CONFED_SEQUENCE segments, or if the
         first path segment of the remaining AS_PATH is of type AS_SET
         the local system shall prepend a new path segment of type
         AS_SEQUENCE to the AS_PATH, including its own confederation
         identifier in that segment.

   When a BGP speaker originates a route:

      a) the originating speaker shall include an empty AS_PATH
      attribute in all UPDATE messages sent to BGP speakers located in
      its own autonomous system. (An empty AS_PATH attribute is one
      whose length field contains the value zero).

      b) the originating speaker shall include its own AS number in an
      AS_CONFED_SEQUENCE segment of the AS_PATH attribute of all
      UPDATE messages sent to BGP speakers located in neighboring
      autonomous systems that are members of the local confederation.
      (In this case, the AS number of the originating speaker&#x27;s member
      autonomous system number will be the only entry in the AS_PATH
      attribute).

      c) the originating speaker shall include its own confederation
      identifier in a AS_SEQUENCE segment of the AS_PATH attribute of
      all UPDATE messages sent to BGP speakers located in neighboring
      autonomous systems that are not members of the local
      confederation. (In this case, the confederation identifier of
      the originating speaker&#x27;s member confederation will be the only
      entry in the AS_PATH attribute).

Common Administration Issues

   It is reasonable for member ASs of a confederation to share a common
   administration and IGP information for the entire confederation.

   It shall be legal for a BGP speaker to advertise an unchanged
   NEXT_HOP and MULTI_EXIT_DISCRIMINATOR attribute to peers in a
   neighboring AS within the same confederation.  In addition, the
   restriction against sending the LOCAL_PREFERENCE attribute to peers
   in a neighboring AS within the same confederation is removed.  Path
   selection criteria for information received from members inside a
   confederation may follow the same rules used for information received
   from members inside the same autonomous system.



<span class="grey">Traina                        Experimental                      [Page 5]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-6" ></span>
<span class="grey"><a href="/doc/html/rfc1965">RFC 1965</a>               AS Confederations for BGP               June 1996</span>


Compatibility

   All BGP speakers participating in a confederation must recognize the
   AS_CONFED_SET and AS_CONFED_SEQUENCE segment type extensions to the
   AS_PATH attribute.

   Any BGP speaker not supporting these extensions will generate a
   notification message specifying an &quot;UPDATE Message Error&quot; and a sub-
   code of &quot;Malformed AS_PATH&quot;.

   This compatibility issue implies that all BGP speakers participating
   in a confederation must support BGP confederations,  however BGP
   speakers outside the confederation need not support these extensions.

Compatibility Discussion

   We considered the use of a distinct, optional, transitive attribute
   to carry AS confederation information as opposed to specifying new
   types in the existing AS path attribute.  This would relax the
   requirement that all BGP speakers participating in a confederation to
   allow the use of legacy units provided they have no external (i.e.
   neither inter-AS nor intra-confederation) connectivity.

   At the time of this writing, an implementation of this extension as
   documented is widely deployed throughout the Internet,  therefore the
   value of any change that is incompatible with this document must be
   weighed against the benefit gained from a relaxation of this
   restriction.

References

   [<a id="ref-1">1</a>] Rekhter, Y., and T. Li, &quot;A Border Gateway Protocol 4 (BGP-4)&quot;,
       <a href="/doc/html/rfc1771">RFC 1771</a>, March 1995.

   [<a id="ref-2">2</a>] Kunzinger, C. Editor, &quot;Inter-Domain Routing Protocol&quot;, ISO/IEC
       10747, October 1993.

Security Considerations

   Security issues are not discussed in this memo.

Acknowledgments

   Ravi Chandra and Yakov Rekhter reviewed this document and provided
   constructive and valuable comments.






<span class="grey">Traina                        Experimental                      [Page 6]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-7" ></span>
<span class="grey"><a href="/doc/html/rfc1965">RFC 1965</a>               AS Confederations for BGP               June 1996</span>


Author&#x27;s Address

   Paul Traina
   cisco Systems, Inc.
   170 W. Tasman Dr.
   San Jose, CA 95134

   EMail: pst@cisco.com











































Traina                        Experimental                      [Page 7]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

