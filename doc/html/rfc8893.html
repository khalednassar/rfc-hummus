<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc8893
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.33.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.33.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-ietf-sidrops-ov-egress/">
  <meta name="description" content="Resource Public Key Infrastructure (RPKI) Origin Validation for BGP Export (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.33.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.33.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgblue"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc8893.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc8893.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/rfc8893.xml" title="XML source for this document">xml</a>|<a href="https://www.rfc-editor.org/rfc/rfc8893.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc8893/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc8893/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/sidrops/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-ietf-sidrops-ov-egress@ietf.org?subject=draft-ietf-sidrops-ov-egress" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-ietf-sidrops-ov-egress-04.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-ietf-sidrops-ov-egress-04.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-ietf-sidrops-ov-egress-04.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-ietf-sidrops-ov-egress-04">draft-ietf-sidrops-ov-egress-04</a>                  Proposed Standard
                                                        <a class="text-warning" href="/ipr/search/?submit=draft&amp;id=draft-ietf-sidrops-ov-egress">IPR declarations</a></pre>
      </div>
    

    <div class="draftcontent">
    <pre>Internet Engineering Task Force (IETF)                           R. Bush
Request for Comments: 8893            Internet Initiative Japan &amp; Arrcus
Updates: <a href="/doc/html/rfc6811">6811</a>                                                    R. Volk
Category: Standards Track
ISSN: 2070-1721                                                 J. Heitz
                                                                   Cisco
                                                          September 2020


  <span class="h1">Resource Public Key Infrastructure (RPKI) Origin Validation for BGP</span>
                                 <span class="h1">Export</span>

Abstract

   A BGP speaker may perform Resource Public Key Infrastructure (RPKI)
   origin validation not only on routes received from BGP neighbors and
   routes that are redistributed from other routing protocols, but also
   on routes it sends to BGP neighbors.  For egress policy, it is
   important that the classification use the &#x27;effective origin AS&#x27; of
   the processed route, which may specifically be altered by the
   commonly available knobs, such as removing private ASes,
   confederation handling, and other modifications of the origin AS.
   This document updates <a href="/doc/html/rfc6811">RFC 6811</a>.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="/doc/html/rfc7841#section-2">Section&nbsp;2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8893">https://www.rfc-editor.org/info/rfc8893</a>.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="/doc/html/bcp78">BCP 78</a> and the IETF Trust&#x27;s Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction
   2.  Suggested Reading
   3.  Egress Processing
   4.  Operational Considerations
   5.  Security Considerations
   6.  IANA Considerations
   7.  References
     7.1.  Normative References
     7.2.  Informative References
   Acknowledgments
   Authors&#x27; Addresses

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Introduction</span>

   This document does not change the protocol or semantics of [<a href="/doc/html/rfc6811" title="&quot;BGP Prefix Origin Validation&quot;">RFC6811</a>],
   BGP prefix origin validation.  It highlights an important use case of
   origin validation in external BGP (eBGP) egress policies, explaining
   specifics of correct implementation in this context.

   The term &#x27;effective origin AS&#x27; as used in this document refers to the
   Route Origin Autonomous System Number (ASN) [<a href="/doc/html/rfc6811" title="&quot;BGP Prefix Origin Validation&quot;">RFC6811</a>] of the UPDATE
   to be sent to neighboring BGP speakers.

   The effective origin AS of a BGP UPDATE is decided by configuration
   and outbound policy of the BGP speaker.  A validating BGP speaker
   MUST apply Route Origin Validation policy semantics (see <a href="/doc/html/rfc6811#section-2">Section&nbsp;2 of
   [RFC6811]</a> and <a href="/doc/html/rfc8481#section-4">Section&nbsp;4 of [RFC8481]</a>) after applying any egress
   configuration and policy.

   This effective origin AS of the announcement might be affected by
   removal of private ASes, confederation [<a href="/doc/html/rfc5065" title="&quot;Autonomous System Confederations for BGP&quot;">RFC5065</a>], migration
   [<a href="/doc/html/rfc7705" title="&quot;Autonomous System Migration Mechanisms and Their Effects on the BGP AS_PATH Attribute&quot;">RFC7705</a>], etc.  Any AS_PATH modifications resulting in effective
   origin AS change MUST be taken into account.

   This document updates [<a href="/doc/html/rfc6811" title="&quot;BGP Prefix Origin Validation&quot;">RFC6811</a>] by clarifying that implementations
   must use the effective origin AS to determine the Origin Validation
   state when applying egress policy.

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;NOT RECOMMENDED&quot;, &quot;MAY&quot;, and
   &quot;OPTIONAL&quot; in this document are to be interpreted as described in
   <a href="/doc/html/bcp14">BCP 14</a> [<a href="/doc/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>] [<a href="/doc/html/rfc8174" title="&quot;Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words&quot;">RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  Suggested Reading</span>

   It is assumed that the reader understands BGP [<a href="/doc/html/rfc4271" title="&quot;A Border Gateway Protocol 4 (BGP-4)&quot;">RFC4271</a>], the RPKI
   [<a href="/doc/html/rfc6480" title="&quot;An Infrastructure to Support Secure Internet Routing&quot;">RFC6480</a>], Route Origin Authorizations (ROAs) [<a href="/doc/html/rfc6482" title="&quot;A Profile for Route Origin Authorizations (ROAs)&quot;">RFC6482</a>], RPKI-based
   Prefix Validation [<a href="/doc/html/rfc6811" title="&quot;BGP Prefix Origin Validation&quot;">RFC6811</a>], and Origin Validation Clarifications
   [<a href="/doc/html/rfc8481" title="&quot;Clarifications to BGP Origin Validation Based on Resource Public Key Infrastructure (RPKI)&quot;">RFC8481</a>].

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  Egress Processing</span>

   BGP implementations supporting RPKI-based origin validation MUST
   provide the same policy configuration primitives for decisions based
   on the validation state available for use in ingress, redistribution,
   and egress policies.  When applied to egress policy, validation state
   MUST be determined using the effective origin AS of the route as it
   will (or would) be announced to the peer.  The effective origin AS
   may differ from that of the route in the RIB due to commonly
   available knobs, such as removal of private ASes, AS path
   manipulation, confederation handling, etc.

   Egress policy handling can provide more robust protection for
   outbound eBGP than relying solely on ingress (iBGP, eBGP, connected,
   static, etc.) redistribution being configured and working correctly
   -- i.e., better support for the robustness principle.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Operational Considerations</span>

   Configurations may have a complex policy where the effective origin
   AS may not be easily determined before the outbound policies have
   been run.  It SHOULD be possible to specify a selective origin
   validation policy to be applied after any existing non-validating
   outbound policies.

   An implementation SHOULD be able to list announcements that were not
   sent to a peer, e.g., because they were marked Invalid, as long as
   the router still has them in memory.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  Security Considerations</span>

   This document does not create security considerations beyond those of
   [<a href="/doc/html/rfc6811" title="&quot;BGP Prefix Origin Validation&quot;">RFC6811</a>] and [<a href="/doc/html/rfc8481" title="&quot;Clarifications to BGP Origin Validation Based on Resource Public Key Infrastructure (RPKI)&quot;">RFC8481</a>].  By facilitating more correct validation, it
   attempts to improve BGP reliability.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  IANA Considerations</span>

   This document has no IANA actions.

<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>.  References</span>

<span class="h3"><a class="selflink" id="section-7.1" href="#section-7.1">7.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., &quot;Key words for use in RFCs to Indicate
              Requirement Levels&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc2119">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC4271">RFC4271</a>]  Rekhter, Y., Ed., Li, T., Ed., and S. Hares, Ed., &quot;A
              Border Gateway Protocol 4 (BGP-4)&quot;, <a href="/doc/html/rfc4271">RFC 4271</a>,
              DOI 10.17487/RFC4271, January 2006,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4271">https://www.rfc-editor.org/info/rfc4271</a>&gt;.

   [<a id="ref-RFC5065">RFC5065</a>]  Traina, P., McPherson, D., and J. Scudder, &quot;Autonomous
              System Confederations for BGP&quot;, <a href="/doc/html/rfc5065">RFC 5065</a>,
              DOI 10.17487/RFC5065, August 2007,
              &lt;<a href="https://www.rfc-editor.org/info/rfc5065">https://www.rfc-editor.org/info/rfc5065</a>&gt;.

   [<a id="ref-RFC6482">RFC6482</a>]  Lepinski, M., Kent, S., and D. Kong, &quot;A Profile for Route
              Origin Authorizations (ROAs)&quot;, <a href="/doc/html/rfc6482">RFC 6482</a>,
              DOI 10.17487/RFC6482, February 2012,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6482">https://www.rfc-editor.org/info/rfc6482</a>&gt;.

   [<a id="ref-RFC6811">RFC6811</a>]  Mohapatra, P., Scudder, J., Ward, D., Bush, R., and R.
              Austein, &quot;BGP Prefix Origin Validation&quot;, <a href="/doc/html/rfc6811">RFC 6811</a>,
              DOI 10.17487/RFC6811, January 2013,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6811">https://www.rfc-editor.org/info/rfc6811</a>&gt;.

   [<a id="ref-RFC7705">RFC7705</a>]  George, W. and S. Amante, &quot;Autonomous System Migration
              Mechanisms and Their Effects on the BGP AS_PATH
              Attribute&quot;, <a href="/doc/html/rfc7705">RFC 7705</a>, DOI 10.17487/RFC7705, November 2015,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7705">https://www.rfc-editor.org/info/rfc7705</a>&gt;.

   [<a id="ref-RFC8174">RFC8174</a>]  Leiba, B., &quot;Ambiguity of Uppercase vs Lowercase in <a href="/doc/html/rfc2119">RFC</a>
              <a href="/doc/html/rfc2119">2119</a> Key Words&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc8174">RFC 8174</a>, DOI 10.17487/RFC8174,
              May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.

   [<a id="ref-RFC8481">RFC8481</a>]  Bush, R., &quot;Clarifications to BGP Origin Validation Based
              on Resource Public Key Infrastructure (RPKI)&quot;, <a href="/doc/html/rfc8481">RFC 8481</a>,
              DOI 10.17487/RFC8481, September 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8481">https://www.rfc-editor.org/info/rfc8481</a>&gt;.

<span class="h3"><a class="selflink" id="section-7.2" href="#section-7.2">7.2</a>.  Informative References</span>

   [<a id="ref-RFC6480">RFC6480</a>]  Lepinski, M. and S. Kent, &quot;An Infrastructure to Support
              Secure Internet Routing&quot;, <a href="/doc/html/rfc6480">RFC 6480</a>, DOI 10.17487/RFC6480,
              February 2012, &lt;<a href="https://www.rfc-editor.org/info/rfc6480">https://www.rfc-editor.org/info/rfc6480</a>&gt;.

Acknowledgments

   Thanks to reviews and comments from Linda Dunbar, Nick Hilliard,
   Benjamin Kaduk, Chris Morrow, Keyur Patel, Alvaro Retana, Job
   Snijders, Robert Sparks, and Robert Wilton.

Authors&#x27; Addresses

   Randy Bush
   Internet Initiative Japan &amp; Arrcus
   5147 Crystal Springs
   Bainbridge Island, WA 98110
   United States of America

   Email: randy@psg.com


   Rüdiger Volk

   Email: ietf@rewvolk.de


   Jakob Heitz
   Cisco
   170 West Tasman Drive
   San Jose, CA 95134
   United States of America

   Email: jheitz@cisco.com
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

