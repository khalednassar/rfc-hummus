<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc6842
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.34.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.34.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-ietf-dhc-client-id/">
  <meta name="description" content="Client Identifier Option in DHCP Server Replies (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.34.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.34.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgblue"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc6842.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc6842.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc6842.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc6842/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc6842/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/dhc/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-ietf-dhc-client-id@ietf.org?subject=draft-ietf-dhc-client-id" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-ietf-dhc-client-id-07.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-ietf-dhc-client-id-07.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-ietf-dhc-client-id-07.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-ietf-dhc-client-id-07">draft-ietf-dhc-client-id-07</a>                      Proposed Standard</pre>
      </div>
    

    <div class="draftcontent">
    <pre>Internet Engineering Task Force (IETF)                          N. Swamy
Request for Comments: 6842                                 Samsung India
Updates: <a href="/doc/html/rfc2131">2131</a>                                                G. Halwasia
Category: Standards Track                                    P. Jhingran
ISSN: 2070-1721                                            Cisco Systems
                                                            January 2013


            <span class="h1">Client Identifier Option in DHCP Server Replies</span>

Abstract

   This document updates <a href="/doc/html/rfc2131">RFC 2131</a> &quot;Dynamic Host Configuration Protocol&quot;
   by addressing the issues arising from that document&#x27;s specification
   that the server MUST NOT return the &#x27;client identifier&#x27; option to the
   client.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="/doc/html/rfc5741#section-2">Section&nbsp;2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6842">http://www.rfc-editor.org/info/rfc6842</a>.

Copyright Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="/doc/html/bcp78">BCP 78</a> and the IETF Trust&#x27;s Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.






<span class="grey">Swamy, et al.                Standards Track                    [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc6842">RFC 6842</a>                Client Identifier Option            January 2013</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
      <a href="#section-1.1">1.1</a>. Requirements Language ......................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. Problem Statement ...............................................<a href="#page-2">2</a>
   <a href="#section-3">3</a>. Modification to <a href="/doc/html/rfc2131">RFC 2131</a> ........................................<a href="#page-3">3</a>
   <a href="#section-4">4</a>. Security Considerations .........................................<a href="#page-4">4</a>
   <a href="#section-5">5</a>. Acknowledgments .................................................<a href="#page-4">4</a>
   <a href="#section-6">6</a>. Normative References ............................................<a href="#page-4">4</a>

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Introduction</span>

   The Dynamic Host Configuration Protocol (DHCP) defined in [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>]
   provides configuration parameters to hosts on an IP-based network.
   DHCP is built on a client-server model, where designated DHCP servers
   allocate network addresses and deliver configuration parameters to
   dynamically configured hosts.

   The changes to [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>] defined in this document clarify the use of
   the &#x27;client identifier&#x27; option by the DHCP servers.  The
   clarification addresses the issues (as mentioned in Problem
   Statement) arising out of the point specified by [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>] that the
   server MUST NOT return the &#x27;client identifier&#x27; option to the client.

<span class="h3"><a class="selflink" id="section-1.1" href="#section-1.1">1.1</a>.  Requirements Language</span>

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this
   document are to be interpreted as described in [<a href="/doc/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>].

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  Problem Statement</span>

   [<a id="ref-RFC2131">RFC2131</a>] specifies that a combination of &#x27;client identifier&#x27; or
   &#x27;chaddr&#x27; and assigned network address constitute a unique identifier
   for the client&#x27;s lease and are used by both the client and server to
   identify a lease referred in any DHCP messages.  [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>] also
   specifies that the server MUST NOT return the &#x27;client identifier&#x27;
   option in DHCPOFFER and DHCPACK messages.  Furthermore, DHCP relay
   agents and servers implementing [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>] MAY drop the DHCP packets
   in the absence of both the &#x27;client identifier&#x27; and &#x27;chaddr&#x27; option.

   In some cases, a client may not have a valid hardware address to
   populate the &#x27;chaddr&#x27; field and may set the field to all zeroes.  One
   such example is when DHCP is used to assign an IP address to a mobile
   phone or a tablet and where the &#x27;chaddr&#x27; field is set to zero in DHCP
   request packets.  In such cases, the client usually sets the &#x27;client





<span class="grey">Swamy, et al.                Standards Track                    [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc6842">RFC 6842</a>                Client Identifier Option            January 2013</span>


   identifier&#x27; option field (to a value as permitted in [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>]), and
   both the client and server use this field to uniquely identify the
   client with in a subnet.

   Note that due to aforementioned recommendations in [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>], valid
   downstream DHCP packets (DHCPOFFER, DHCPACK, and DHCPNAK) from the
   server MAY get dropped at the DHCP relay agent in the absence of the
   &#x27;client identifier&#x27; option when the &#x27;chaddr&#x27; field is set to zero.

   The problem may get aggravated when a client receives a response from
   the server without &#x27;client identifier&#x27; and with the &#x27;chaddr&#x27; value
   set to zero, as it cannot guarantee that the response is intended for
   it.  This is due to the fact that even though the &#x27;xid&#x27; field is
   present to map responses with requests, this field alone cannot
   guarantee that a particular response is for a particular client, as
   &#x27;xid&#x27; values generated by multiple clients within a subnet need not
   be unique.

   Lack of the &#x27;client identifier&#x27; option in DHCP reply messages also
   affects the scenario where multiple DHCP clients may be running on
   the same host sharing the same &#x27;chaddr&#x27;.

   This document attempts to address these problems faced by the DHCP
   relay agent and client by proposing modification to DHCP server
   behavior.  The solution specified in this document is in line with
   DHCPv6 [<a href="/doc/html/rfc3315" title="&quot;Dynamic Host Configuration Protocol for IPv6 (DHCPv6)&quot;">RFC3315</a>] where the server always includes the Client
   Identifier option in the Reply messages.

   The requirement for DHCP servers not to return the &#x27;client
   identifier&#x27; option was made purely to conserve the limited space in
   the packet.  It is possible, though unlikely, that clients will drop
   packets that contain this formerly unexpected option.  There are no
   known client implementations that will drop packets, but the benefit
   provided by this change outweighs any small risk of such behavior.
   More harm is being done by not having the &#x27;client identifier&#x27; option
   present than might be done by adding it now.

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  Modification to <a href="/doc/html/rfc2131">RFC 2131</a></span>

   If the &#x27;client identifier&#x27; option is present in a message received
   from a client, the server MUST return the &#x27;client identifier&#x27; option,
   unaltered, in its response message.

   The following table is extracted from <a href="/doc/html/rfc2131#section-4.3.1">Section&nbsp;4.3.1 of [RFC2131]</a> and
   relevant fields are modified accordingly to overcome the problems
   mentioned in this document.





<span class="grey">Swamy, et al.                Standards Track                    [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc6842">RFC 6842</a>                Client Identifier Option            January 2013</span>


   Option                    DHCPOFFER    DHCPACK            DHCPNAK
   ------                    ---------    -------            -------
   Client identifier (if     MUST         MUST               MUST
     sent by client)
   Client identifier (if     MUST NOT     MUST NOT           MUST NOT
     not sent by client)


   When a client receives a DHCP message containing a &#x27;client
   identifier&#x27; option, the client MUST compare that client identifier to
   the one it is configured to send.  If the two client identifiers do
   not match, the client MUST silently discard the message.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Security Considerations</span>

   This specification does not add any new security considerations other
   than the ones already mentioned in [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>].  It is worth noting
   that DHCP clients routinely connect to different IP networks managed
   by different network providers.  DHCP clients have no a priori
   knowledge of which network they are connecting to.  Consequently, the
   client identifier will, by definition, be routinely shared with
   network operators and could be used in ways that violate the user&#x27;s
   privacy.  This is a problem that existed in [<a href="/doc/html/rfc2131" title="&quot;Dynamic Host Configuration Protocol&quot;">RFC2131</a>].  This document
   does nothing to address this problem.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  Acknowledgments</span>

   The authors would like to thank Bernie Volz, Ted Lemon, Barr Hibbs,
   Richard Johnson, Barry Leiba, Stephen Farrell, and Adrian Farrel for
   insightful discussions and review.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., &quot;Key words for use in RFCs to Indicate
              Requirement Levels&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc2119">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2131">RFC2131</a>]  Droms, R., &quot;Dynamic Host Configuration Protocol&quot;,
              <a href="/doc/html/rfc2131">RFC 2131</a>, March 1997.

   [<a id="ref-RFC3315">RFC3315</a>]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C.,
              and M. Carney, &quot;Dynamic Host Configuration Protocol for
              IPv6 (DHCPv6)&quot;, <a href="/doc/html/rfc3315">RFC 3315</a>, July 2003.









<span class="grey">Swamy, et al.                Standards Track                    [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc6842">RFC 6842</a>                Client Identifier Option            January 2013</span>


Authors&#x27; Addresses

   Narasimha Swamy Nelakuditi
   Samsung India
   Block-B, Bagmane Lakeview,
   66/1, Bagmane Tech Park,
   Byrasandra, C.V. Raman Nagar, Bangalore, 560093
   India

   Phone: +91 80 4181 9999
   EMail: nn.swamy@samsung.com


   Gaurav Halwasia
   Cisco Systems
   SEZ Unit, Cessna Business Park
   Sarjapur Marathalli Outer Ring Road
   Bangalore, 560103
   India

   Phone: +91 80 4426 1321
   EMail: ghalwasi@cisco.com


   Prashant Jhingran
   Cisco Systems
   SEZ Unit, Cessna Business Park
   Sarjapur Marathalli Outer Ring Road
   Bangalore, 560103
   India

   Phone: +91 80 4426 1800
   EMail: pjhingra@cisco.com


















Swamy, et al.                Standards Track                    [Page 5]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

