<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc2698
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.34.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.34.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-heinanen-diffserv-trtcm/">
  <meta name="description" content="A Two Rate Three Color Marker (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.34.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.34.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.34.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgorange"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc2698.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc2698.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc2698.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc2698/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc2698/" title="Datatracker information for this document">Tracker</a>] [<a href="mailto:draft-heinanen-diffserv-trtcm@ietf.org?subject=draft-heinanen-diffserv-trtcm" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-heinanen-diffserv-trtcm-01.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-heinanen-diffserv-trtcm-01.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-heinanen-diffserv-trtcm-01.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-heinanen-diffserv-trtcm-01">draft-heinanen-diffserv-trtcm-01</a>                     Informational
                                                        <a class="text-warning" href="/ipr/search/?submit=draft&amp;id=draft-heinanen-diffserv-trtcm">IPR declarations</a></pre>
      </div>
    

    <div class="draftcontent">
    <pre>Network Working Group                                        J. Heinanen
Request for Comments: 2698                                 Telia Finland
Category: Informational                                        R. Guerin
                                              University of Pennsylvania
                                                          September 1999


                     <span class="h1">A Two Rate Three Color Marker</span>

Status of this Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

Abstract

   This document defines a Two Rate Three Color Marker (trTCM), which
   can be used as a component in a Diffserv traffic conditioner
   [RFC2475, <a href="/doc/html/rfc2474">RFC2474</a>].  The trTCM meters an IP packet stream and marks
   its packets based on two rates, Peak Information Rate (PIR) and
   Committed Information Rate (CIR), and their associated burst sizes to
   be either green, yellow, or red.  A packet is marked red if it
   exceeds the PIR.  Otherwise it is marked either yellow or green
   depending on whether it exceeds or doesn&#x27;t exceed the CIR.

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>. Introduction</span>

   The Two Rate Three Color Marker (trTCM) meters an IP packet stream
   and marks its packets either green, yellow, or red.  A packet is
   marked red if it exceeds the Peak Information Rate (PIR).  Otherwise
   it is marked either yellow or green depending on whether it exceeds
   or doesn&#x27;t exceed the Committed Information Rate (CIR).  The trTCM is
   useful, for example, for ingress policing of a service, where a peak
   rate needs to be enforced separately from a committed rate.












<span class="grey">Heinanen &amp; Guerin            Informational                      [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc2698">RFC 2698</a>             A Two Rate Three Color Marker        September 1999</span>


   The Meter meters each packet and passes the packet and the metering
   result to the Marker:

                            +------------+
                            |   Result   |
                            |            V
                        +-------+    +--------+
                        |       |    |        |
      Packet Stream ===&gt;| Meter |===&gt;| Marker |===&gt; Marked Packet Stream
                        |       |    |        |
                        +-------+    +--------+
   The Meter operates in one of two modes.  In the Color-Blind mode, the
   Meter assumes that the packet stream is uncolored.  In the Color-
   Aware mode the Meter assumes that some preceding entity has pre-
   colored the incoming packet stream so that each packet is either
   green, yellow, or red.  The details of the pre-coloring process,
   including handling of error scenarios, and how the Meter determines
   the color of a pre-colored packet are DS domain specific and outside
   the scope of this document.

   The Marker (re)colors an IP packet according to the results of the
   Meter.  The color is coded in the DS field [<a href="/doc/html/rfc2474" title="&quot;Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers&quot;">RFC2474</a>] of the packet in
   a PHB specific manner (see <a href="#section-4">section 4</a> for an example).

   A companion document [<a href="/doc/html/rfc2697" title="&quot;A Single Rate Three Color Marker&quot;">RFC2697</a>] describes another three color marker,
   called a Single Rate Three Color Maker (srTCM), where packets are
   marked based on a single rate and two burst sizes.

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>. Configuration</span>

   The trTCM is configured by setting its mode and by assigning values
   to four traffic parameters: a Peak Information Rate (PIR) and its
   associated Peak Burst Size (PBS) and a Committed Information Rate
   (CIR) and its associated Committed Burst Size (CBS).

   The PIR and CIR are measured in bytes of IP packets per second, i.e.,
   it includes the IP header, but not link specific headers.  The PIR
   must be equal to or greater than the CIR.

   The PBS and the CBS and are measured in bytes and both of them must
   be configured to be greater than 0.  It is recommended that they be
   configured to be equal to or greater than the size of the largest
   possible IP packet in the stream.








<span class="grey">Heinanen &amp; Guerin            Informational                      [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc2698">RFC 2698</a>             A Two Rate Three Color Marker        September 1999</span>


<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>. Metering</span>

   The behavior of the Meter is specified in terms of its mode and two
   token buckets, P and C, with rates PIR and CIR, respectively.  The
   maximum size of the token bucket P is PBS and the maximum size of the
   token bucket C is CBS.

   The token buckets P and C are initially (at time 0) full, i.e., the
   token count Tp(0) = PBS and the token count Tc(0) = CBS.  Thereafter,
   the token count Tp is incremented by one PIR times per second up to
   PBS and the token count Tc is incremented by one CIR times per second
   up to CBS.

   When a packet of size B bytes arrives at time t, the following
   happens if the trTCM is configured to operate in the Color-Blind
   mode:

     o If Tp(t)-B &lt; 0, the packet is red, else

     o if Tc(t)-B &lt; 0, the packet is yellow and Tp is decremented by B,
       else

     o the packet is green and both Tp and Tc are decremented by B.

   When a packet of size B bytes arrives at time t, the following
   happens if the trTCM is configured to operate in the Color-Aware
   mode:

     o If the packet has been precolored as red or if Tp(t)-B &lt; 0, the
       packet is red, else

     o if the packet has been precolored as yellow or if Tc(t)-B &lt; 0,
       the packet is yellow and Tp is decremented by B, else

     o the packet is green and both Tp and Tc are decremented by B.

   The actual implementation of a Meter doesn&#x27;t need to be modeled
   according to the above formal specification.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>. Marking</span>

   The Marker reflects the metering result by setting the DS field of
   the packet to a particular codepoint.  In case of the AF PHB
   [<a href="/doc/html/rfc2597" title="&quot;Assured Forwarding PHB Group&quot;">RFC2597</a>], the color can be coded as the drop precedence of the
   packet.






<span class="grey">Heinanen &amp; Guerin            Informational                      [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc2698">RFC 2698</a>             A Two Rate Three Color Marker        September 1999</span>


<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>. Service Example</span>

   The trTCM can be used to mark a IP packet stream in a service, where
   different, decreasing levels of assurances (either absolute or
   relative) are given to packets which are green, yellow, or red.  For
   example, a service may discard all red packets, because they exceeded
   the peak rate, forward yellow packets as best effort, and forward
   green packets with a low drop probability.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>. Security Considerations</span>

   The trTCM has no known security concerns.

<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>. References</span>

   [<a id="ref-RFC2697">RFC2697</a>] Heinanen, J. and R. Guerin, &quot;A Single Rate Three Color
               Marker&quot;, <a href="/doc/html/rfc2697">RFC 2697</a>, September 1999.

   [<a id="ref-RFC2597">RFC2597</a>] Heinanen, J., Baker, F., Weiss, W. and J. Wroclawski,
               &quot;Assured Forwarding PHB Group&quot;, <a href="/doc/html/rfc2597">RFC 2597</a>, June 1999.

   [<a id="ref-RFC2474">RFC2474</a>]   Nichols, K., Blake, S., Baker, F. and D. Black,
               &quot;Definition of the Differentiated Services Field (DS
               Field) in the IPv4 and IPv6 Headers&quot;, <a href="/doc/html/rfc2474">RFC 2474</a>, December
               1998.

   [<a id="ref-RFC2475">RFC2475</a>]   Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z
               and W. Weiss, &quot;An Architecture for Differentiated
               Services&quot;,  <a href="/doc/html/rfc2475">RFC 2475</a>, December 1998.

<span class="h2"><a class="selflink" id="section-8" href="#section-8">8</a>. Authors&#x27; Addresses</span>

   Juha Heinanen
   Telia Finland, Inc.
   Myyrmaentie 2
   01600 Vantaa, Finland

   EMail: jh@telia.fi


   Roch Guerin
   University of Pennsylvania
   Department of Electrical Engineering, Rm 367 GRW
   200 South 33rd Street
   Philadelphia, PA 19104

   EMail: guerin@ee.upenn.edu




<span class="grey">Heinanen &amp; Guerin            Informational                      [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc2698">RFC 2698</a>             A Two Rate Three Color Marker        September 1999</span>


<span class="h2"><a class="selflink" id="section-9" href="#section-9">9</a>.  Full Copyright Statement</span>

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   &quot;AS IS&quot; basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Heinanen &amp; Guerin            Informational                      [Page 5]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

