<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc1041
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.33.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.33.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/rfc1041/">
  <meta name="description" content="Telnet 3270 regime option (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.33.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.33.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bggrey"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc1041.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc1041.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc1041.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc1041/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc1041/" title="Datatracker information for this document">Tracker</a>] [<a href="mailto:rfc1041@ietf.org?subject=rfc1041" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=rfc1041-.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=rfc1041-.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/rfc1041-.txt" title="Run an idnits check of this document">Nits</a>]

Updated by: <a href="/doc/html/rfc6270">6270</a>                                                Historic</pre>
      </div>
    

    <div class="draftcontent">
    <pre>Network Working Group                                         J. Rekhter
Request For Comments:  1041             T.J. Watson Research Center, IBM
                                                            January 1988


                       <span class="h1">Telnet 3270 Regime Option</span>


STATUS OF THIS MEMO

   This RFC specifies a proposed standard for the Internet community.
   Hosts on the Internet, that want to support 3270 data stream within
   the Telnet protocol, are expected to adopt and implement this
   standard.  Distribution of this memo is unlimited.

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Command Name and Code</span>

   3270-REGIME     29

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  Command Meaning</span>

   IAC WILL 3270-REGIME

      Sender is willing to send list of supported 3270 Regimes in
      a subsequent sub-negotiation.

   IAC WON&#x27;T 3270-REGIME

      Sender refuses to send the list of supported 3270 Regimes.

   IAC DO 3270-REGIME

      Sender is willing to receive a list of supported 3270 Regimes in a
      subsequent sub-negotiation.

   IAC DON&#x27;T 3270-REGIME

      Sender refuses to accept the list of supported 3270 Regimes.

   IAC SB 3270-REGIME ARE REGIME-LIST IAC SE

      Sender sends the list of all possible 3270 Regimes it is able to
      support.  The code for ARE is 1.

      REGIME-LIST is an ASCII string which has meaning to both sides of
      the negotiation.  This string may be composed of different
      terminal type names (as specified in the &quot;Assigned Numbers&quot;) which
      are separated by space character.  Terminal type names which have



<span class="grey">Rekhter                                                         [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc1041">RFC 1041</a>               Telnet 3270 Regime Option            January 1988</span>


      imbedded spaces should escape it with backslash character (&#x27;\&#x27;).
      Backslash character imbedded into terminal type name should be
      escaped with another backslash character.

      Empty REGIME-LIST means, that sender is able to support only NVT
      ASCII terminal as defined in [<a href="#ref-4">4</a>].

   IAC SB 3270-REGIME IS REGIME IAC SE

      Sender is stating the name of the terminal it is willing to
      support.  The code for IS is 0.

      REGIME is an ASCII string (possibly empty) which is substring of
      the received REGIME-LIST string.  Empty string means that the
      sender is willing to support only NVT ASCII terminal as defined in
      [<a href="#ref-4">4</a>].

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  Default</span>

   WON&#x27;T 3270-REGIME

      3270 Regime will not be established.

   DON&#x27;T 3270-REGIME

      3270 Regime will not be established.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Motivation for the option</span>

   This option allows a telnet server running VM or MVS to negotiate
   with the telnet client on the type of data stream (3270 or NVT ASCII)
   which both sides are willing support.

   The main reason for this option is to allow simple and efficient way
   to:

      o state, that both client and server want to exchange 3270 data
        stream,

      o switch from 3270 Regime into NVT ASCII Regime and back into 3270
        Regime,

      o dynamically renegotiate 3270 Regime parameters (like terminal
        type).







<span class="grey">Rekhter                                                         [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc1041">RFC 1041</a>               Telnet 3270 Regime Option            January 1988</span>


   Support for 3270 data stream requires that both sides:

      o be able to exchange binary data,

      o be able to put well defined delimiters into inbound/outbound
        data stream,

      o be able to establish the agreement between client and server on
        what type of terminal will be used.

   Current implementations requires 3 different options, TERMINALTYPE
   [<a href="#ref-1">1</a>], BINARY [<a href="#ref-2">2</a>] and EOR [<a href="#ref-3">3</a>], to be successfully negotiated between
   client and server prior to establishing 3270 Regime.  Moreover, it is
   unclear at what point in this negotiation process, 3270 regime is
   actually established (whether after TERMINALTYPE or after BINARY or
   after EOR).  Also, order for these negotiations was never specified.

   Subnegotiation for the TERMINALTYPE is possible with only single
   terminal type at a time.

   Once 3270 Regime is established, there is no standard of how to get
   out of this regime back into NVT ASCII mode.

   Based on the 3270 Regime requirements, which stated above, we feel
   that separate negotiation for EOR and BINARY should not be done.
   Rather, 3270 Regime establishment should imply that:

      o each character in the Telnet data stream should be interpreted
        as 8 bits of binary data,

      o both sides agreed to use a certain character sequence(Telnet IAC
        EOR) as a delimiter in inbound/outbound Telnet data stream,

      o both sides agreed on the type of the terminal they are willing
        to support.

   By providing the list of possible terminals which Telnet client can
   support, telnet server could select the type of the terminal it can
   support and pass it back to the Telnet client, thus eliminating
   multiple TERMINALTYPE negotiations.

   As stated in [<a href="#ref-5">5</a>], &quot;The purpose of the Telnet Protocol is to provide a
   fairly general, bi-directional, eight-bit byte oriented communication
   facility.&quot;  Therefore we feel that such issues as color support,
   graphics support, extended data streams mapping, etc., do not belong
   logically to the Telnet protocol, but rather should be considered as
   a part of a separate protocol which defines 3270 inbound/outbound
   data stream (see [<a href="#ref-5">5</a>], [<a href="#ref-6">6</a>], [<a href="#ref-7">7</a>], [<a href="#ref-8">8</a>]).  The purpose of this memo is



<span class="grey">Rekhter                                                         [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc1041">RFC 1041</a>               Telnet 3270 Regime Option            January 1988</span>


   not to describe (or define) protocols which are used in 3270 Regime,
   but rather define a new option for the Telnet Protocol, which would
   allow both sides to negotiate for the 3270 Regime establishment over
   the telnet connection.

   While this options does not include direct negotiation for such
   things as colors, graphics, structured fields, etc., certain features
   (like the ability to support colors) may be negotiated indirectly by
   using certain terminal type names specified in 3270-REGIME
   subnegotiation.

   We also feel that such issues as keyboard mapping, whether to have
   one telnet for both ASCII and 3270 mode or two separate programs, one
   for ASCII and another for 3270 mode, are implementation dependent and
   should be considered as a local matter.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  Description of the Option</span>

   WILL and DO commands are used to obtain and grant permission for the
   subsequent subnegotiation.  Both sides must exchange WILL 3270-REGIME
   and DO 3270-REGIME prior to subnegotiation.  The actual exchange of
   information is done within the option subcommand (IAC SB
   3270-REGIME).

   Either Telnet client or Telnet server can initialize 3270-REGIME
   negotiation.  However, in order to simplify negotiation, only Telnet
   client is allowed to send IAC SB 3270-REGIME ARE... IAC SE command,
   and only Telnet server is allowed to reply with IAC SB 3270-REGIME
   IS... IAC SE command.

   Since this negotiation is asymmetric, each time Telnet client/server
   decide to negotiate/renegotiate this option they have to perform
   complete negotiation process (DO...  WILL... SB 3270-REGIME...).

   The following is an example of use of the option:

      1.  Host A: IAC DO 3270-REGIME

      2.  Host B: IAC WILL 3270-REGIME

      3.  Host B: IAC DO 3270-REGIME

      4.  Host A: IAC WILL 3270-REGIME

      5.  (At this point side which runs Telnet client can start
          subnegotiation.)





<span class="grey">Rekhter                                                         [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc1041">RFC 1041</a>               Telnet 3270 Regime Option            January 1988</span>


      6.  Host A: IAC SB 3270-REGIME ARE &#x27;ibm3279-3 ibm3279-2 ibm3278-3&#x27;
          IAC SE

      7.  Host B: IAC SB 3270-REGIME IS &#x27;ibm3279-2&#x27; IAC SE

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  Implementation Suggestions</span>

   If the side is able to support more that one terminal type, then
   terminal type names are listed in REGIME-LIST from most desirable to
   least desirable.  Other side upon receive of the REGIME-LIST scans it
   from left to right and finds the first terminal type which it is able
   to support returns it in REGIME part of the 3270-REGIME IS
   subnegotiation.

   The side which wants to switch into NVT ASCII mode should send empty
   REGIME-LIST.  Since empty string is a subset of empty string, the
   side which receives empty REGIME-LIST should reply with empty REGIME.
   At that point both sides are switched to NVT ASCII mode.

   It is possible to renegotiate 3270 Regime parameters (like terminal
   type).  Certain precaution should be taken to insure that such
   renegotiation would not cause switch into NVT ASCII mode.  As a
   possible measure, the side which wants to renegotiate for another
   terminal should include both the current and the new terminal type
   names into REGIME-LIST.  This way, if the other side is unable to
   change 3270 Regime terminal type, it will continue to use current
   terminal type.

   Since IAC character (255 decimal) is used as a delimiter (together
   with EOR) in inbound/outbound data stream, care must be taken to
   escape IAC characters which are part of data stream itself with
   another IAC character.

   To prevent ambiguity in interpreting inbound/outbound data stream
   during negotiation process the following rules should be observed:


      1.  Telnet client should not accept any data from the user as soon
          as it enters 3270 Regime negotiation.

      2.  Telnet client should not send any data to the Telnet server
          after it sends &quot;3270-REGIME ARE....&quot;.

      3.  Telnet server should try not to send any data to the telnet
          client while negotiation is in progress.

      4.  Telnet server may reply with &quot;3270-REGIME IS...&quot; to the telnet
          client only after all outstanding data have been already sent



<span class="grey">Rekhter                                                         [Page 5]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-6" ></span>
<span class="grey"><a href="/doc/html/rfc1041">RFC 1041</a>               Telnet 3270 Regime Option            January 1988</span>


          to the Telnet client.

      5.  Telnet server can switch from its previous regime to the new
          regime only after it sends &quot;IAC SB 3270-REGIME IS &#x27;regime&#x27; IAC
          SE&quot; to the telnet client.

      6.  Telnet client can switch from its previous regime to the new
          regime only after it receives &quot;IAC SB 3270-REGIME IS &#x27;regime&#x27;
          IAC SE&quot;.

      7.  Switch from one regime to another may require flushing of all
          outstanding data in both telnet client and telnet server.

<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>.  References</span>

   [<a id="ref-1">1</a>] <a href="/doc/html/rfc854">RFC-854</a>, Telnet Terminal Type Option.

   [<a id="ref-2">2</a>] <a href="/doc/html/rfc856">RFC-856</a>, Telnet Binary Transmission.

   [<a id="ref-3">3</a>] <a href="/doc/html/rfc885">RFC-885</a>, Telnet End Of Record Option.

   [<a id="ref-4">4</a>] <a href="/doc/html/rfc854">RFC-854</a>, Telnet Protocol Specification.

   [<a id="ref-5">5</a>] IBM 3270 Information Display System.  3274 Control Unit
       Description and Programmer&#x27;s Guide.  GA23-0061-1.

   [<a id="ref-6">6</a>] IBM 3279 Information Display System: Color and Programmed
       Symbols.  GA33-3056-1.

   [<a id="ref-7">7</a>] IBM 3270 Information Display System. Data Stream Programmer&#x27;s
       Reference. GA23-0059-1.

   [<a id="ref-8">8</a>] IBM 3270 Information Display System.  Description and
       Configuration: APL/Text Feature.  GA18-2044-0.

















Rekhter                                                         [Page 6]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

