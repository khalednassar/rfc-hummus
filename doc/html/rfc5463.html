<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc5463
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.33.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.33.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-freed-sieve-ihave/">
  <meta name="description" content="Sieve Email Filtering:  Ihave Extension (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.33.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.33.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgblue"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc5463.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc5463.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc5463.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc5463/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc5463/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/sieve/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-freed-sieve-ihave@ietf.org?subject=draft-freed-sieve-ihave" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-freed-sieve-ihave-04.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-freed-sieve-ihave-04.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-freed-sieve-ihave-04.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-freed-sieve-ihave-04">draft-freed-sieve-ihave-04</a>                       Proposed Standard</pre>
      </div>
    

    <div class="draftcontent">
    <pre>Network Working Group                                           N. Freed
Request for Comments: 5463                              Sun Microsystems
Category: Standards Track                                     March 2009


                <span class="h1">Sieve Email Filtering:  Ihave Extension</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the &quot;Internet
   Official Protocol Standards&quot; (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="/doc/html/bcp78">BCP 78</a> and the IETF Trust&#x27;s Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.

Abstract

   This document describes the &quot;ihave&quot; extension to the Sieve email
   filtering language.  The &quot;ihave&quot; extension provides a means to write
   scripts that can take advantage of optional Sieve features but can
   still run when those optional features are not available.  The
   extension also defines a new error control command intended to be
   used to report situations where no combination of available
   extensions satisfies the needs of the script.

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Introduction</span>

   Sieve [<a href="/doc/html/rfc5228" title="&quot;Sieve: An Email Filtering Language&quot;">RFC5228</a>] is a language for filtering email messages at or
   around the time of final delivery.  It is designed to be
   implementable on either a mail client or mail server.  It is suitable
   for running on a mail server where users may not be allowed to
   execute arbitrary programs, such as on black-box Internet Message
   Access Protocol [<a href="/doc/html/rfc3501" title="&quot;INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1&quot;">RFC3501</a>] servers, as it has no user-controlled loops
   or the ability to run external programs.






<span class="grey">Freed                       Standards Track                     [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc5463">RFC 5463</a>                 Sieve Ihave Extension                March 2009</span>


   Various sieve extensions have already been defined, e.g., [<a href="/doc/html/rfc5229" title="&quot;Sieve Email Filtering: Variables Extension&quot;">RFC5229</a>],
   [<a href="/doc/html/rfc5230" title="&quot;Sieve Email Filtering: Vacation Extension&quot;">RFC5230</a>], [<a href="/doc/html/rfc5231" title="&quot;Sieve Email Filtering: Relational Extension&quot;">RFC5231</a>], [<a href="/doc/html/rfc5232" title="&quot;Sieve Email Filtering: Imap4flags Extension&quot;">RFC5232</a>], [<a href="/doc/html/rfc5233" title="&quot;Sieve Email Filtering: Subaddress Extension&quot;">RFC5233</a>], [<a href="/doc/html/rfc5235" title="&quot;Sieve Email Filtering: Spamtest and Virustest Extensions&quot;">RFC5235</a>], and many more
   are sure to be created over time.  Sieve&#x27;s require clause is used to
   specify the extensions a particular sieve needs; an error results if
   the script&#x27;s require clause calls for an extension that isn&#x27;t
   available.  This mechanism is sufficient in most situations.
   However, there can be cases where a script may be able to take
   advantage of an extension if it is available but can still operate if
   it is not, possibly with some degradation of functionality.  Cases
   can also arise where a script would prefer one extension but can
   employ a different one if the first one is not available.

   The &quot;ihave&quot; extension provides a means to write scripts that make use
   of extensions only when they are actually available.  It defines a
   new &quot;ihave&quot; test that takes a list of capability names as an argument
   and succeeds if and only if all of those capabilities are present.
   Additionally, specification of the &quot;ihave&quot; extension in the require
   clause disables parse-time checking of extension use in scripts; run-
   time checking must be used instead.  This makes it possible to write
   portable scripts that can operate in multiple environments making
   effective use of whatever extensions are available even though
   differing sets of extensions are provided in different places.

   The &quot;ihave&quot; extension also defines a new error control command.  An
   error causes script execution to terminate with the error message
   given as the argument to the error control.

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  Conventions Used in This Document</span>

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this
   document are to be interpreted as described in [<a href="/doc/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>].

   The terms used to describe the various components of the Sieve
   language are taken from <a href="/doc/html/rfc5228#section-1.1">Section&nbsp;1.1 of [RFC5228]</a>.

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  Capability Identifiers</span>

   The capability string associated with the extension defined in this
   document is &quot;ihave&quot;.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Ihave Test</span>

   Usage:   ihave &lt;capabilities: string-list&gt;

   The &quot;ihave&quot; test provides a means for Sieve scripts to test for the
   existence of a given extension prior to actually using it.  The
   capabilities argument to &quot;ihave&quot; is the same as the similarly-named



<span class="grey">Freed                       Standards Track                     [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc5463">RFC 5463</a>                 Sieve Ihave Extension                March 2009</span>


   argument to the require control statement: It specifies the names of
   one or more Sieve extensions or comparators.  The &quot;ihave&quot; test
   succeeds if all the extensions specified in the capabilities list are
   available to the script.

   Unlike most Sieve tests, &quot;ihave&quot; accepts no match or comparator
   arguments.  The type of match for &quot;ihave&quot; is always &quot;:is&quot; and the
   comparator is always &quot;i;octet&quot;.

   The strings in the capabilities list are constant strings in the
   context of Sieve variables [<a href="/doc/html/rfc5229" title="&quot;Sieve Email Filtering: Variables Extension&quot;">RFC5229</a>].  It is an error to pass a non-
   constant string as an argument to &quot;ihave&quot;.

   The Sieve base specification demands that all Sieve extensions used
   in a given script be specified in the initial require control
   statement.  It is an error for a script to call for extensions the
   interpreter doesn&#x27;t support or to attempt to use extensions that have
   not been listed in the script&#x27;s require clause.  Using &quot;ihave&quot;
   changes Sieve interpreter behavior and the underlying requirements in
   the following ways:

   1.  Use of a given extension is allowed subsequent to the successful
       evaluation of an &quot;ihave&quot; test on that extension all the way to
       the end of the script, even outside the block enclosed by the
       &quot;ihave&quot; test.  In other words, subsequent to a successful
       &quot;ihave&quot;, things operate just as if the extension had been
       specified in the script&#x27;s require clause.  The extension cannot
       be used prior to the evaluation of such a test and a run-time
       error MUST be generated if such usage is attempted.  However,
       subsequent use of that extension may still need to be
       conditionally handled via an &quot;ihave&quot; test to deal with the case
       where it is not supported.

   2.  Sieve interpreters normally have the option of checking extension
       use at either parse time or execution time.  The specification of
       &quot;ihave&quot; in a script&#x27;s require clause changes this behavior:
       Scripts MUST either defer extension checking to run time or else
       take the presence of &quot;ihave&quot; tests into account at parse time.
       Note that since &quot;ihave&quot; can be used inside of &quot;anyof&quot;, &quot;allof&quot;,
       and &quot;not&quot; tests, full parse-time checking of &quot;ihave&quot; may be very
       difficult to implement.

   3.  Although it makes little sense to do so, an extension can be
       specified in both the require control statement and in an &quot;ihave&quot;
       test.  If this is done and the extension has been implemented,
       the extension can be used anywhere in the script and an &quot;ihave&quot;
       test of that extension will always return true.




<span class="grey">Freed                       Standards Track                     [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc5463">RFC 5463</a>                 Sieve Ihave Extension                March 2009</span>


   4.  The &quot;ihave&quot; test accepts a list of capabilities.  If any of the
       specified capabilities are unavailable, the test fails and none
       of the capabilities are enabled.

   5.  The Sieve base specification does not require that interpreters
       evaluate arguments in any particular order or that test
       evaluation be short-circuited.  If &quot;ihave&quot; is enabled, the
       interpreter MUST short-circuit tests, i.e., not perform more
       tests than necessary to find the result.  Additionally,
       evaluation order MUST be left to right if &quot;ihave&quot; is enabled.

   The &quot;ihave&quot; extension is designed to be used with other extensions
   that add tests, actions, comparators, or arguments.  Implementations
   MUST NOT allow it to be used with extensions that change the
   underlying Sieve grammar, or extensions like encoded-character
   [<a href="/doc/html/rfc5228" title="&quot;Sieve: An Email Filtering Language&quot;">RFC5228</a>], or variables [<a href="/doc/html/rfc5229" title="&quot;Sieve Email Filtering: Variables Extension&quot;">RFC5229</a>] that change how the content of
   Sieve scripts are interpreted.  The test MUST fail and the extension
   MUST NOT be enabled if such usage is attempted.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  Error Control</span>

   Usage:   error &lt;message: string&gt;

   The error control causes script execution to terminate with a run-
   time error.  The message argument provides a text description of the
   error condition that SHOULD be included in any generated report
   regarding the error.  <a href="/doc/html/rfc5228#section-2.10.6">Section&nbsp;2.10.6 of [RFC5228]</a> describes how run-
   time errors are handled in Sieve.

   Note that the message argument, like all Sieve strings, employs the
   UTF-8 charset and can contain non-US-ASCII characters.  This must be
   taken into consideration when reporting script errors.

   The error control is included as part of the &quot;ihave&quot; extension so
   that it is unconditionally available to scripts using ihave.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  Security Considerations</span>

   A potential security issue with Sieve scripts is that when a script
   fails to run due to the lack of some extension, it may fail to block
   dangerous email.  The &quot;ihave&quot; extension makes it possible to improve
   script portability and generality, which may improve the overall
   security provided by Sieve.

   Script robustness aside, ihave is essentially a more flexible variant
   of Sieve&#x27;s existing require mechanism.  As such, it does not add any
   additional capabilities to a Sieve implementation that could create




<span class="grey">Freed                       Standards Track                     [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc5463">RFC 5463</a>                 Sieve Ihave Extension                March 2009</span>


   security issues.  Of course, all of the security considerations given
   in the base Sieve specification and in any extensions that are
   employed are still relevant.

<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>.  IANA Considerations</span>

   The following template specifies the IANA registration of the Sieve
   extension specified in this document:

      To: iana@iana.org
      Subject: Registration of new Sieve extension

      Capability name: ihave
      Description:     The &quot;ihave&quot; extension provides a means to write
                       scripts that make use of other extensions only
                       when they are actually available.
      RFC number:      <a href="/doc/html/rfc5463">RFC 5463</a>
      Contact address: Sieve discussion list &lt;ietf-mta-filters@imc.org&gt;

<span class="h2"><a class="selflink" id="section-8" href="#section-8">8</a>.  References</span>

<span class="h3"><a class="selflink" id="section-8.1" href="#section-8.1">8.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., &quot;Key words for use in RFCs to Indicate
              Requirement Levels&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc2119">RFC 2119</a>, March 1997.

   [<a id="ref-RFC5228">RFC5228</a>]  Guenther, P. and T. Showalter, &quot;Sieve: An Email Filtering
              Language&quot;, <a href="/doc/html/rfc5228">RFC 5228</a>, January 2008.

<span class="h3"><a class="selflink" id="section-8.2" href="#section-8.2">8.2</a>.  Informative References</span>

   [<a id="ref-RFC3501">RFC3501</a>]  Crispin, M., &quot;INTERNET MESSAGE ACCESS PROTOCOL - VERSION
              4rev1&quot;, <a href="/doc/html/rfc3501">RFC 3501</a>, March 2003.

   [<a id="ref-RFC5229">RFC5229</a>]  Homme, K., &quot;Sieve Email Filtering: Variables Extension&quot;,
              <a href="/doc/html/rfc5229">RFC 5229</a>, January 2008.

   [<a id="ref-RFC5230">RFC5230</a>]  Showalter, T. and N. Freed, &quot;Sieve Email Filtering:
              Vacation Extension&quot;, <a href="/doc/html/rfc5230">RFC 5230</a>, January 2008.

   [<a id="ref-RFC5231">RFC5231</a>]  Segmuller, W. and B. Leiba, &quot;Sieve Email Filtering:
              Relational Extension&quot;, <a href="/doc/html/rfc5231">RFC 5231</a>, January 2008.

   [<a id="ref-RFC5232">RFC5232</a>]  Melnikov, A., &quot;Sieve Email Filtering: Imap4flags
              Extension&quot;, <a href="/doc/html/rfc5232">RFC 5232</a>, January 2008.

   [<a id="ref-RFC5233">RFC5233</a>]  Murchison, K., &quot;Sieve Email Filtering: Subaddress
              Extension&quot;, <a href="/doc/html/rfc5233">RFC 5233</a>, January 2008.



<span class="grey">Freed                       Standards Track                     [Page 5]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-6" ></span>
<span class="grey"><a href="/doc/html/rfc5463">RFC 5463</a>                 Sieve Ihave Extension                March 2009</span>


   [<a id="ref-RFC5235">RFC5235</a>]  Daboo, C., &quot;Sieve Email Filtering: Spamtest and Virustest
              Extensions&quot;, <a href="/doc/html/rfc5235">RFC 5235</a>, January 2008.

<span class="h2"><a class="selflink" id="section-9" href="#section-9">9</a>.  Acknowledgments</span>

   Stephan Bosch, Cyrus Daboo, Arnt Gulbrandsen, Andrew McKeon, and
   Alexey Melnikov provided helpful suggestions and corrections.

Author&#x27;s Address

   Ned Freed
   Sun Microsystems
   800 Royal Oaks
   Monrovia, CA  91016-6347
   USA

   Phone: +1 909 457 4293
   EMail: ned.freed@mrochek.com

































Freed                       Standards Track                     [Page 6]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

