<!DOCTYPE html> 

<!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/htmlized_base.html -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
  
    rfc5397
  
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

  @media only screen 
    and (min-width: 992px)
    and (max-width: 1199px) {
      body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 768px)
    and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-width: 480px)
    and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
  @media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
  @media only screen 
    and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
      font-weight: bold;
            /* line-height: 0pt; */
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
      font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
  .pre {
      white-space: pre;
      font-family: monospace;
  }
  .header{
      font-weight: bold;
  }
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        @media print {
            body {
                margin-top: 5em;
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
  @media screen {
      .grey, .grey a:link, .grey a:visited {
    color: #777;
      }
            .meta-info {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .pad {
                padding-top: 7px;
                line-height: 24px;
                padding-bottom: 4px;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
  }
    
     

.bgwhite  { background-color: white; }
.bgred    { background-color: #F44; }
.bggrey   { background-color: #666; }
.bgbrown  { background-color: #840; }            
.bgorange { background-color: #FA0; }
.bgyellow { background-color: #EE0; }
.bgmagenta{ background-color: #F4F; }
.bgblue   { background-color: #66F; }
.bgcyan   { background-color: #4DD; }
.bggreen  { background-color: #4F4; }

.draftcontent { margin-top:0px !important;}


    </style>

    <!--[if lt IE 9]>
        <script src="https://www.ietf.org/lib/dt/7.33.0/html5shiv/html5shiv.min.js"></script>
        <script src="https://www.ietf.org/lib/dt/7.33.0/respond/dest/respond.min.js"></script>
    <![endif]-->
    
  <link rel="alternate" type="application/atom+xml" title="Document changes" href="/feed/document-changes/draft-sanchez-webdav-current-principal/">
  <meta name="description" content="WebDAV Current Principal Extension (RFC )">
  <script src="https://www.ietf.org/lib/dt/7.33.0/d3/d3.min.js"></script>
  <script src="https://www.ietf.org/lib/dt/7.33.0/jquery/jquery.min.js"></script>


    
    <link rel="shortcut icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/ietf-icon-blue3.png">
    
    <link rel="apple-touch-icon" href="https://www.ietf.org/lib/dt/7.33.0/ietf/images/apple-touch-icon.png">
  </head>

  <body style="padding-top: 0;">

	  <div class="content" id="content">
        
  <!-- template: /a/www/ietf-datatracker/web/ietf/templates/doc/document_html.html -->
 
  <div class="rfcmarkup">
    <div class="noprint" style="height: 6px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showLegend();"
         onmouseout="hideLegend()"
         style="height: 6px; min-height: 6px; width: 96ex; position: absolute; margin-top:0; "
         class="meta-info bgblue"
         title="Click for colour legend." >&nbsp;</div>
      <div id="legend"
           class="meta-info noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showLegend();"
           onmouseout="hideLegend();">
      </div>
    </div>

    
      <div class="noprint">
	 <pre class="pre meta-info">[<a href="https://datatracker.ietf.org" title="Document search and retrieval page">Search</a>] [<a href="https://www.rfc-editor.org/rfc/rfc5397.txt" title="Plaintext version of this document">txt</a>|<a href="https://www.rfc-editor.org/rfc/rfc5397.html" title="HTML version of this document, from XML2RFC">html</a>|<a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc5397.txt.pdf" title="PDF version of this document">pdf</a>|<a href="/doc/rfc5397/bibtex" title="BibTex entry for this document">bibtex</a>] [<a href="/doc/rfc5397/" title="Datatracker information for this document">Tracker</a>] [<a href="/group/gen/" title="The working group handling this document">WG</a>] [<a href="mailto:draft-sanchez-webdav-current-principal@ietf.org?subject=draft-sanchez-webdav-current-principal" title="Send email to the document authors">Email</a>] [<a href="https://www.ietf.org/rfcdiff?difftype=--hwdiff&url2=draft-sanchez-webdav-current-principal-02.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://www.ietf.org/rfcdiff?url2=draft-sanchez-webdav-current-principal-02.txt" title="Side-by-side diff">Diff2</a>] [<a href="https://www.ietf.org/tools/idnits?url=https://www.ietf.org/archive/id/draft-sanchez-webdav-current-principal-02.txt" title="Run an idnits check of this document">Nits</a>]

From: <a href="/doc/html/draft-sanchez-webdav-current-principal-02">draft-sanchez-webdav-current-principal-02</a>        Proposed Standard</pre>
      </div>
    

    <div class="draftcontent">
    <pre>Network Working Group                                         W. Sanchez
Request for Comments: 5397                                      C. Daboo
Category: Standards Track                                     Apple Inc.
                                                           December 2008


                   <span class="h1">WebDAV Current Principal Extension</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the &quot;Internet
   Official Protocol Standards&quot; (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (c) 2008 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="/doc/html/bcp78">BCP 78</a> and the IETF Trust&#x27;s Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.

Abstract

   This specification defines a new WebDAV property that allows clients
   to quickly determine the principal corresponding to the current
   authenticated user.

Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Conventions Used in This Document . . . . . . . . . . . . . . . <a href="#page-2">2</a>
   <a href="#section-3">3</a>.  DAV:current-user-principal  . . . . . . . . . . . . . . . . . . <a href="#page-3">3</a>
   <a href="#section-4">4</a>.  Security Considerations . . . . . . . . . . . . . . . . . . . . <a href="#page-4">4</a>
   <a href="#section-5">5</a>.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-4">4</a>
   <a href="#section-6">6</a>.  Normative References  . . . . . . . . . . . . . . . . . . . . . <a href="#page-4">4</a>









<span class="grey">Sanchez &amp; Daboo              Standards Track                    [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="/doc/html/rfc5397">RFC 5397</a>                WebDAV Current Principal           December 2008</span>


<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>.  Introduction</span>

   WebDAV [<a href="/doc/html/rfc4918" title="&quot;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)&quot;">RFC4918</a>] is an extension to HTTP [<a href="/doc/html/rfc2616" title="&quot;Hypertext Transfer Protocol -- HTTP/1.1&quot;">RFC2616</a>] to support
   improved document authoring capabilities.  The WebDAV Access Control
   Protocol (&quot;WebDAV ACL&quot;) [<a href="/doc/html/rfc3744" title="&quot;Web Distributed Authoring and Versioning (WebDAV) Access Control Protocol&quot;">RFC3744</a>] extension adds access control
   capabilities to WebDAV.  It introduces the concept of a &quot;principal&quot;
   resource, which is used to represent information about authenticated
   entities on the system.

   Some clients have a need to determine which [<a href="/doc/html/rfc3744" title="&quot;Web Distributed Authoring and Versioning (WebDAV) Access Control Protocol&quot;">RFC3744</a>] principal a
   server is associating with the currently authenticated HTTP user.
   While [<a href="/doc/html/rfc3744" title="&quot;Web Distributed Authoring and Versioning (WebDAV) Access Control Protocol&quot;">RFC3744</a>] defines a DAV:current-user-privilege-set property for
   retrieving the privileges granted to that principal, there is no
   recommended way to identify the principal in question, which is
   necessary to perform other useful operations.  For example, a client
   may wish to determine which groups the current user is a member of,
   or modify a property of the principal resource associated with the
   current user.

   The DAV:principal-match REPORT provides some useful functionality,
   but there are common situations where the results from that query can
   be ambiguous.  For example, not only is an individual user principal
   returned, but also every group principal that the user is a member
   of, and there is no clear way to distinguish which is which.

   This specification proposes an extension to WebDAV ACL that adds a
   DAV:current-user-principal property to resources under access control
   on the server.  This property provides a URL to a principal resource
   corresponding to the currently authenticated user.  This allows a
   client to &quot;bootstrap&quot; itself by performing additional queries on the
   principal resource to obtain additional information from that
   resource, which is the purpose of this extension.  Note that while it
   is possible for multiple URLs to refer to the same principal
   resource, or for multiple principal resources to correspond to a
   single principal, this specification only allows for a single http(s)
   URL in the DAV:current-user-principal property.  If a client wishes
   to obtain alternate URLs for the principal, it can query the
   principal resource for this information; it is not the purpose of
   this extension to provide a complete list of such URLs, but simply to
   provide a means to locate a resource which contains that (and other)
   information.

<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>.  Conventions Used in This Document</span>

   The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;,
   &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this
   document are to be interpreted as described in [<a href="/doc/html/rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>].




<span class="grey">Sanchez &amp; Daboo              Standards Track                    [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="/doc/html/rfc5397">RFC 5397</a>                WebDAV Current Principal           December 2008</span>


   When XML element types in the namespace &quot;DAV:&quot; are referenced in this
   document outside of the context of an XML fragment, the string &quot;DAV:&quot;
   will be prefixed to the element type names.

   Processing of XML by clients and servers MUST follow the rules
   defined in <a href="#section-17">Section 17</a> of WebDAV [<a href="/doc/html/rfc4918" title="&quot;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)&quot;">RFC4918</a>].

   Some of the declarations refer to XML elements defined by WebDAV
   [<a href="/doc/html/rfc4918" title="&quot;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)&quot;">RFC4918</a>].

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>.  DAV:current-user-principal</span>

   Name:  current-user-principal

   Namespace:  DAV:

   Purpose:  Indicates a URL for the currently authenticated user&#x27;s
      principal resource on the server.

   Value:  A single DAV:href or DAV:unauthenticated element.

   Protected:  This property is computed on a per-request basis, and
      therefore is protected.

   Description:  The DAV:current-user-principal property contains either
      a DAV:href or DAV:unauthenticated XML element.  The DAV:href
      element contains a URL to a principal resource corresponding to
      the currently authenticated user.  That URL MUST be one of the
      URLs in the DAV:principal-URL or DAV:alternate-URI-set properties
      defined on the principal resource and MUST be an http(s) scheme
      URL.  When authentication has not been done or has failed, this
      property MUST contain the DAV:unauthenticated pseudo-principal.

      In some cases, there may be multiple principal resources
      corresponding to the same authenticated principal.  In that case,
      the server is free to choose any one of the principal resource
      URIs for the value of the DAV:current-user-principal property.
      However, servers SHOULD be consistent and use the same principal
      resource URI for each authenticated principal.

   COPY/MOVE behavior:  This property is computed on a per-request
      basis, and is thus never copied or moved.

   Definition:

      &lt;!ELEMENT current-user-principal (unauthenticated | href)&gt;
      &lt;!-- href value: a URL to a principal resource --&gt;




<span class="grey">Sanchez &amp; Daboo              Standards Track                    [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="/doc/html/rfc5397">RFC 5397</a>                WebDAV Current Principal           December 2008</span>


   Example:

      &lt;D:current-user-principal xmlns:D=&quot;DAV:&quot;&gt;
        &lt;D:href&gt;/principals/users/cdaboo&lt;/D:href&gt;
      &lt;/D:current-user-principal&gt;

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>.  Security Considerations</span>

   This specification does not introduce any additional security issues
   beyond those defined for HTTP [<a href="/doc/html/rfc2616" title="&quot;Hypertext Transfer Protocol -- HTTP/1.1&quot;">RFC2616</a>], WebDAV [<a href="/doc/html/rfc4918" title="&quot;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)&quot;">RFC4918</a>], and WebDAV
   ACL [<a href="/doc/html/rfc3744" title="&quot;Web Distributed Authoring and Versioning (WebDAV) Access Control Protocol&quot;">RFC3744</a>].

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>.  Acknowledgments</span>

   This specification is based on discussions that took place within the
   Calendaring and Scheduling Consortium&#x27;s CalDAV Technical Committee.
   The authors thank the participants of that group for their input.

   The authors thank Julian Reschke for his valuable input via the
   WebDAV working group mailing list.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., &quot;Key words for use in RFCs to Indicate
              Requirement Levels&quot;, <a href="/doc/html/bcp14">BCP 14</a>, <a href="/doc/html/rfc2119">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2616">RFC2616</a>]  Fielding, R., Gettys, J., Mogul, J., Frystyk, H.,
              Masinter, L., Leach, P., and T. Berners-Lee, &quot;Hypertext
              Transfer Protocol -- HTTP/1.1&quot;, <a href="/doc/html/rfc2616">RFC 2616</a>, June 1999.

   [<a id="ref-RFC3744">RFC3744</a>]  Clemm, G., Reschke, J., Sedlar, E., and J. Whitehead, &quot;Web
              Distributed Authoring and Versioning (WebDAV)
              Access Control Protocol&quot;, <a href="/doc/html/rfc3744">RFC 3744</a>, May 2004.

   [<a id="ref-RFC4918">RFC4918</a>]  Dusseault, L., &quot;HTTP Extensions for Web Distributed
              Authoring and Versioning (WebDAV)&quot;, <a href="/doc/html/rfc4918">RFC 4918</a>, June 2007.

Authors&#x27; Addresses

   Wilfredo Sanchez
   Apple Inc.
   1 Infinite Loop
   Cupertino, CA  95014
   USA

   EMail: wsanchez@wsanchez.net
   URI:   <a href="http://www.apple.com/">http://www.apple.com/</a>




<span class="grey">Sanchez &amp; Daboo              Standards Track                    [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="/doc/html/rfc5397">RFC 5397</a>                WebDAV Current Principal           December 2008</span>


   Cyrus Daboo
   Apple Inc.
   1 Infinite Loop
   Cupertino, CA  95014
   USA

   EMail: cyrus@daboo.name
   URI:   <a href="http://www.apple.com/">http://www.apple.com/</a>











































Sanchez &amp; Daboo              Standards Track                    [Page 5]
</pre>
    </div>

  </div>


        
	  </div>

	

	

    </div>

      
      <script>$(".visible-nojs").removeClass("visible-nojs");</script>
      <script>$(".hidden-nojs").removeClass("hidden-nojs");</script>
      
    <script type="text/javascript"><!--
    var legend_html = "Colour legend:<br /> \
     <table> \
        <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
        <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr> \
    </table>";
    function showLegend() {
        var elem = document.getElementById('legend');
        elem.innerHTML = legend_html
        elem.style.visibility='visible';
    }
    function hideLegend() {
        var elem = document.getElementById('legend');
        elem.style.visibility='hidden';
        elem.innerHTML = "";
    }
    // -->
    </script>

  </body>
</html>

